<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="hello world">
<meta property="og:type" content="website">
<meta property="og:title" content="Bruce&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Bruce&#39;s Blog">
<meta property="og:description" content="hello world">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bruce&#39;s Blog">
<meta name="twitter:description" content="hello world">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/4/"/>





  <title>Bruce's Blog</title>
  














</head>


<script type="text/javascript"
color="0,0,255" opacity='0.7' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>


<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <a href="https://github.com/a1049145827"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Bruce's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Hi~</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/19/ios/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/19/ios/" itemprop="url">iOS消除警告</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-19T17:33:24+08:00">
                2018-03-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>在iOS开发过程中, 我们可能会碰到一些警告,例如:系统弃用方法,没有实现的selector等一些警告。对于有强迫症的程序猿来说,十分不能忍受,那么我们今天就来解决它吧!</strong></p>
<p>首先学会基本的语句<br>示例1:消除selector没有实现的警告</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignored(忽视)消除对应的selector的警告</span></span><br><span class="line"><span class="comment">//开始</span></span><br><span class="line"><span class="meta">#pragma clang diagnostic push</span></span><br><span class="line"><span class="meta">#pragma clang diagnostic ignored <span class="meta-string">"-Wundeclared-selector"</span></span></span><br><span class="line"><span class="comment">// 要消除警告的代码</span></span><br><span class="line"><span class="keyword">id</span> target = <span class="keyword">self</span>.interactivePopGestureRecognizer.delegate;</span><br><span class="line"><span class="built_in">UIPanGestureRecognizer</span> *pan = [[<span class="built_in">UIPanGestureRecognizer</span> alloc] initWithTarget:target action:<span class="keyword">@selector</span>(handleNavigationTransition:)];</span><br><span class="line">[<span class="keyword">self</span>.view addGestureRecognizer:pan];</span><br><span class="line"><span class="comment">// 结束</span></span><br><span class="line"><span class="meta">#pragma clang diagnostic pop</span></span><br></pre></td></tr></table></figure>
<p>示例2: 消除方法过期(弃用)警告</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 消除方法弃用(过时)的警告</span></span><br><span class="line"><span class="meta">#pragma clang diagnostic push</span></span><br><span class="line"><span class="meta">#pragma clang diagnostic ignored <span class="meta-string">"-Wdeprecated-declarations"</span></span></span><br><span class="line"><span class="comment">// 要消除警告的代码</span></span><br><span class="line"><span class="built_in">UINavigationBar</span> *bar = [<span class="built_in">UINavigationBar</span> appearanceWhenContainedIn:<span class="keyword">self</span>, <span class="literal">nil</span>];</span><br><span class="line"><span class="meta">#pragma clang diagnostic pop</span></span><br></pre></td></tr></table></figure>
<p>相信大家通过上面的2个例子知道这个消除警告的方法怎么用了吧!<br>大家可以在下面找到对应的警告,找到每一行最前面的字符串,直接替换就可以了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br></pre></td><td class="code"><pre><span class="line">Semantic Warnings</span><br><span class="line">Warning    Message</span><br><span class="line">-WCFString-literal    input conversion stopped due to an input byte that does not belong to the input codeset UTF-8</span><br><span class="line">-WNSObject-attribute    __attribute ((NSObject)) may be put on a typedef only, attribute is ignored</span><br><span class="line">-Wabstract-vbase-init    initializer for virtual base class %0 of abstract class %1 will never be used</span><br><span class="line">-Waddress-of-array-temporary    pointer is initialized by a temporary array, which will be destroyed at the end of the full-expression</span><br><span class="line">-Warc-maybe-repeated-use-of-weak    &quot;weak %select&#123;variable|property|implicit property|instance variable&#125;0 %1 may be accessed multiple times in this %select&#123;function|method|block|lambda&#125;2 and may be unpredictably set to nil assign to a strong variable to keep the object alive</span><br><span class="line">-Warc-non-pod-memaccess    %select&#123;destination for|source of&#125;0 this %1 call is a pointer to ownership-qualified type %2</span><br><span class="line">-Warc-performSelector-leaks    performSelector may cause a leak because its selector is unknown</span><br><span class="line">-Warc-repeated-use-of-weak    &quot;weak %select&#123;variable|property|implicit property|instance variable&#125;0 %1 is accessed multiple times in this %select&#123;function|method|block|lambda&#125;2 but may be unpredictably set to nil assign to a strong variable to keep the object alive</span><br><span class="line">-Warc-retain-cycles    capturing %0 strongly in this block is likely to lead to a retain cycle</span><br><span class="line">-Warc-unsafe-retained-assign    assigning retained object to unsafe property object will be released after assignment</span><br><span class="line">-Warc-unsafe-retained-assign    assigning %select&#123;array literal|dictionary literal|numeric literal|boxed expression|should not happen|block literal&#125;0 to a weak %select&#123;property|variable&#125;1 object will be released after assignment</span><br><span class="line">-Warc-unsafe-retained-assign    assigning retained object to %select&#123;weak|unsafe_unretained&#125;0 %select&#123;property|variable&#125;1 object will be released after assignment</span><br><span class="line">-Warray-bounds    array index %0 is past the end of the array (which contains %1 element%s2)</span><br><span class="line">-Warray-bounds    array index %0 is before the beginning of the array</span><br><span class="line">-Warray-bounds    &apos;static&apos; has no effect on zero-length arrays</span><br><span class="line">-Warray-bounds    array argument is too small contains %0 elements, callee requires at least %1</span><br><span class="line">-Warray-bounds-pointer-arithmetic    the pointer incremented by %0 refers past the end of the array (that contains %1 element%s2)</span><br><span class="line">-Warray-bounds-pointer-arithmetic    the pointer decremented by %0 refers before the beginning of the array</span><br><span class="line">-Wassign-enum    integer constant not in range of enumerated type %0</span><br><span class="line">-Watomic-property-with-user-defined-accessor    writable atomic property %0 cannot pair a synthesized %select&#123;getter|setter&#125;1 with a user defined %select&#123;getter|setter&#125;2</span><br><span class="line">-Wattributes    unknown attribute %0 ignored</span><br><span class="line">-Wauto-var-id    &apos;auto&apos; deduced as &apos;id&apos; in declaration of %0</span><br><span class="line">-Wavailability    unknown platform %0 in availability macro</span><br><span class="line">-Wavailability    overriding method %select&#123;introduced after|deprecated before|obsoleted before&#125;0 overridden method on %1 (%2 vs. %3)</span><br><span class="line">-Wavailability    availability does not match previous declaration</span><br><span class="line">-Wavailability    overriding method cannot be unavailable on %0 when its overridden method is available</span><br><span class="line">-Wavailability    feature cannot be %select&#123;introduced|deprecated|obsoleted&#125;0 in %1 version %2 before it was %select&#123;introduced|deprecated|obsoleted&#125;3 in version %4 attribute ignored</span><br><span class="line">-Wbad-function-cast    cast from function call of type %0 to non-matching type %1</span><br><span class="line">-Wbitfield-constant-conversion    implicit truncation from %2 to bitfield changes value from %0 to %1</span><br><span class="line">-Wbitwise-op-parentheses    &apos;&amp;&apos; within &apos;|&apos;</span><br><span class="line">-Wbool-conversion    &quot;initialization of pointer of type %0 to null from a constant boolean &quot; &quot;expression</span><br><span class="line">-Wbridge-cast    %0 cannot bridge to %1</span><br><span class="line">-Wbridge-cast    %0 bridges to %1, not %2</span><br><span class="line">-Wbuiltin-requires-header    declaration of built-in function &apos;%0&apos; requires inclusion of the header stdio.h</span><br><span class="line">-Wbuiltin-requires-header    declaration of built-in function &apos;%0&apos; requires inclusion of the header setjmp.h</span><br><span class="line">-Wbuiltin-requires-header    declaration of built-in function &apos;%0&apos; requires inclusion of the header ucontext.h</span><br><span class="line">-Wc++-compat    %select&#123;|empty &#125;0%select&#123;struct|union&#125;1 has size 0 in C, %select&#123;size 1|non-zero size&#125;2 in C++</span><br><span class="line">-Wc++11-compat    explicit instantiation cannot be &apos;inline&apos;</span><br><span class="line">-Wc++11-compat    explicit instantiation of %0 must occur at global scope</span><br><span class="line">-Wc++11-compat    explicit instantiation of %0 not in a namespace enclosing %1</span><br><span class="line">-Wc++11-compat    explicit instantiation of %q0 must occur in namespace %1</span><br><span class="line">-Wc++11-narrowing    constant expression evaluates to %0 which cannot be narrowed to type %1 in C++11</span><br><span class="line">-Wc++11-narrowing    type %0 cannot be narrowed to %1 in initializer list in C++11</span><br><span class="line">-Wc++11-narrowing    non-constant-expression cannot be narrowed from type %0 to %1 in initializer list in C++11</span><br><span class="line">-Wc++98-c++11-compat    type definition in a constexpr %select&#123;function|constructor&#125;0 is incompatible with C++ standards before C++1y</span><br><span class="line">-Wc++98-c++11-compat    use of this statement in a constexpr %select&#123;function|constructor&#125;0 is incompatible with C++ standards before C++1y</span><br><span class="line">-Wc++98-c++11-compat    init-captures.def warn_cxx11_compat_init_capture : Warning &quot;initialized lambda captures are incompatible with C++ standards &quot; &quot;before C++1y</span><br><span class="line">-Wc++98-c++11-compat    variable declaration in a constexpr %select&#123;function|constructor&#125;0 is incompatible with C++ standards before C++1y</span><br><span class="line">-Wc++98-c++11-compat    constexpr function with no return statements is incompatible with C++ standards before C++1y</span><br><span class="line">-Wc++98-c++11-compat    multiple return statements in constexpr function is incompatible with C++ standards before C++1y</span><br><span class="line">-Wc++98-c++11-compat    variable templates are incompatible with C++ standards before C++1y</span><br><span class="line">-Wc++98-compat    substitution failure due to access control is incompatible with C++98</span><br><span class="line">-Wc++98-compat    %select&#123;anonymous struct|union&#125;0 member %1 with a non-trivial %select&#123;constructor|copy constructor|move constructor|copy assignment operator|move assignment operator|destructor&#125;2 is incompatible with C++98</span><br><span class="line">-Wc++98-compat    enumeration type in nested name specifier is incompatible with C++98</span><br><span class="line">-Wc++98-compat    static data member %0 in union is incompatible with C++98</span><br><span class="line">-Wc++98-compat    default template arguments for a function template are incompatible with C++98</span><br><span class="line">-Wc++98-compat    scalar initialized from empty initializer list is incompatible with C++98</span><br><span class="line">-Wc++98-compat    befriending %1 without &apos;%select&#123;struct|interface|union|class|enum&#125;0&apos; keyword is incompatible with C++98</span><br><span class="line">-Wc++98-compat    use of null pointer as non-type template argument is incompatible with C++98</span><br><span class="line">-Wc++98-compat    friend declaration naming a member of the declaring class is incompatible with C++98</span><br><span class="line">-Wc++98-compat    non-class friend type %0 is incompatible with C++98</span><br><span class="line">-Wc++98-compat    befriending enumeration type %0 is incompatible with C++98</span><br><span class="line">-Wc++98-compat    use of non-static data member %0 in an unevaluated context is incompatible with C++98</span><br><span class="line">-Wc++98-compat    friend function %0 would be implicitly redefined in C++98</span><br><span class="line">-Wc++98-compat    %select&#123;class template|class template partial|variable template|variable template partial|function template|member function|static data member|member class|member enumeration&#125;0 specialization of %1 outside namespace %2 is incompatible with C++98</span><br><span class="line">-Wc++98-compat    reference initialized from initializer list is incompatible with C++98</span><br><span class="line">-Wc++98-compat    redundant parentheses surrounding address non-type template argument are incompatible with C++98</span><br><span class="line">-Wc++98-compat    initialization of initializer_list object is incompatible with C++98</span><br><span class="line">-Wc++98-compat    use of &apos;template&apos; keyword outside of a template is incompatible with C++98</span><br><span class="line">-Wc++98-compat    non-type template argument referring to %select&#123;function|object&#125;0 %1 with internal linkage is incompatible with C++98</span><br><span class="line">-Wc++98-compat    use of &apos;typename&apos; outside of a template is incompatible with C++98</span><br><span class="line">-Wc++98-compat    passing object of trivial but non-POD type %0 through variadic %select&#123;function|block|method|constructor&#125;1 is incompatible with C++98</span><br><span class="line">-Wc++98-compat    goto would jump into protected scope in C++98</span><br><span class="line">-Wc++98-compat    constructor call from initializer list is incompatible with C++98</span><br><span class="line">-Wc++98-compat    &apos;auto&apos; type specifier is incompatible with C++98</span><br><span class="line">-Wc++98-compat    delegating constructors are incompatible with C++98</span><br><span class="line">-Wc++98-compat    &apos;constexpr&apos; specifier is incompatible with C++98</span><br><span class="line">-Wc++98-compat    inheriting constructors are incompatible with C++98</span><br><span class="line">-Wc++98-compat    explicit conversion functions are incompatible with C++98</span><br><span class="line">-Wc++98-compat    switch case would be in a protected scope in C++98</span><br><span class="line">-Wc++98-compat    &apos;%0&apos; type specifier is incompatible with C++98</span><br><span class="line">-Wc++98-compat    indirect goto might cross protected scopes in C++98</span><br><span class="line">-Wc++98-compat-pedantic    cast between pointer-to-function and pointer-to-object is incompatible with C++98</span><br><span class="line">-Wc++98-compat-pedantic    implicit conversion from array size expression of type %0 to %select&#123;integral|enumeration&#125;1 type %2 is incompatible with C++98</span><br><span class="line">-Wcast-align    cast from %0 to %1 increases required alignment from %2 to %3</span><br><span class="line">-Wcast-of-sel-type    cast of type %0 to %1 is deprecated use sel_getName instead</span><br><span class="line">-Wchar-subscripts    array subscript is of type &apos;char&apos;</span><br><span class="line">-Wconditional-uninitialized    variable %0 may be uninitialized when %select&#123;used here|captured by block&#125;1</span><br><span class="line">-Wconstant-logical-operand    use of logical &apos;%0&apos; with constant operand</span><br><span class="line">-Wconstexpr-not-const    &apos;constexpr&apos; non-static member function will not be implicitly &apos;const&apos; in C++1y add &apos;const&apos; to avoid a change in behavior</span><br><span class="line">-Wconsumed    state of variable &apos;%0&apos; must match at the entry and exit of loop</span><br><span class="line">-Wconsumed    parameter &apos;%0&apos; not in expected state when the function returns: expected &apos;%1&apos;, observed &apos;%2&apos;</span><br><span class="line">-Wconsumed    argument not in expected state expected &apos;%0&apos;, observed &apos;%1&apos;</span><br><span class="line">-Wconsumed    invalid invocation of method &apos;%0&apos; on a temporary object while it is in the &apos;%1&apos; state</span><br><span class="line">-Wconsumed    return state set for an unconsumable type &apos;%0&apos;</span><br><span class="line">-Wconsumed    consumed analysis attribute is attached to member of class &apos;%0&apos; which isn&apos;t marked as consumable</span><br><span class="line">-Wconsumed    invalid invocation of method &apos;%0&apos; on object &apos;%1&apos; while it is in the &apos;%2&apos; state</span><br><span class="line">-Wconsumed    return value not in expected state expected &apos;%0&apos;, observed &apos;%1&apos;</span><br><span class="line">-Wconversion    implicit conversion discards imaginary component: %0 to %1</span><br><span class="line">-Wconversion    non-type template argument with value &apos;%0&apos; converted to &apos;%1&apos; for unsigned template parameter of type %2</span><br><span class="line">-Wconversion    implicit conversion loses floating-point precision: %0 to %1</span><br><span class="line">-Wconversion    implicit conversion loses integer precision: %0 to %1</span><br><span class="line">-Wconversion    non-type template argument value &apos;%0&apos; truncated to &apos;%1&apos; for template parameter of type %2</span><br><span class="line">-Wconversion    implicit conversion turns vector to scalar: %0 to %1</span><br><span class="line">-Wconversion    implicit conversion turns floating-point number into integer: %0 to %1</span><br><span class="line">-Wcovered-switch-default    default label in switch which covers all enumeration values</span><br><span class="line">-Wcustom-atomic-properties    atomic by default property %0 has a user defined %select&#123;getter|setter&#125;1 (property should be marked &apos;atomic&apos; if this is intended)</span><br><span class="line">-Wdangling-field    initializing pointer member %0 with the stack address of parameter %1</span><br><span class="line">-Wdangling-field    binding reference %select&#123;|subobject of &#125;1member %0 to a temporary value</span><br><span class="line">-Wdangling-field    binding reference member %0 to stack allocated parameter %1</span><br><span class="line">-Wdangling-initializer-list    array backing the initializer list will be destroyed at the end of %select&#123;the full-expression|the constructor&#125;0</span><br><span class="line">-Wdelete-incomplete    deleting pointer to incomplete type %0 may cause undefined behavior</span><br><span class="line">-Wdelete-non-virtual-dtor    delete called on %0 that is abstract but has non-virtual destructor</span><br><span class="line">-Wdelete-non-virtual-dtor    delete called on %0 that has virtual functions but non-virtual destructor</span><br><span class="line">-Wdeprecated    access declarations are deprecated use using declarations instead</span><br><span class="line">-Wdeprecated    definition of implicit copy %select&#123;constructor|assignment operator&#125;1 for %0 is deprecated because it has a user-declared %select&#123;copy %select&#123;assignment operator|constructor&#125;1|destructor&#125;2</span><br><span class="line">-Wdeprecated    dynamic exception specifications are deprecated</span><br><span class="line">-Wdeprecated-increment-bool    incrementing expression of type bool is deprecated</span><br><span class="line">-Wdeprecated-objc-isa-usage    assignment to Objective-C&apos;s isa is deprecated in favor of object_setClass()</span><br><span class="line">-Wdeprecated-objc-isa-usage    direct access to Objective-C&apos;s isa is deprecated in favor of object_getClass()</span><br><span class="line">-Wdeprecated-objc-pointer-introspection    bitmasking for introspection of Objective-C object pointers is strongly discouraged</span><br><span class="line">-Wdeprecated-objc-pointer-introspection-performSelector    warn_objc_pointer_masking.Text</span><br><span class="line">-Wdeprecated-writable-strings    dummy warning to enable -fconst-strings</span><br><span class="line">-Wdirect-ivar-access    instance variable %0 is being directly accessed</span><br><span class="line">-Wdistributed-object-modifiers    conflicting distributed object modifiers on return type in implementation of %0</span><br><span class="line">-Wdistributed-object-modifiers    conflicting distributed object modifiers on parameter type in implementation of %0</span><br><span class="line">-Wdivision-by-zero    division by zero is undefined</span><br><span class="line">-Wdivision-by-zero    remainder by zero is undefined</span><br><span class="line">-Wdocumentation    parameter &apos;%0&apos; not found in the function declaration</span><br><span class="line">-Wdocumentation    not a Doxygen trailing comment</span><br><span class="line">-Wduplicate-enum    element %0 has been implicitly assigned %1 which another element has been assigned</span><br><span class="line">-Wduplicate-method-match    multiple declarations of method %0 found and ignored</span><br><span class="line">-Wdynamic-class-memaccess    %select&#123;destination for|source of|first operand of|second operand of&#125;0 this %1 call is a pointer to dynamic class %2 vtable pointer will be %select&#123;overwritten|copied|moved|compared&#125;3</span><br><span class="line">-Wempty-body    switch statement has empty body</span><br><span class="line">-Wempty-body    for loop has empty body</span><br><span class="line">-Wempty-body    if statement has empty body</span><br><span class="line">-Wempty-body    range-based for loop has empty body</span><br><span class="line">-Wempty-body    while loop has empty body</span><br><span class="line">-Wenum-compare    comparison of two values with different enumeration types%diff&#123; ($ and $)|&#125;0,1</span><br><span class="line">-Wenum-conversion    implicit conversion from enumeration type %0 to different enumeration type %1</span><br><span class="line">-Wexit-time-destructors    declaration requires an exit-time destructor</span><br><span class="line">-Wexplicit-ownership-type    method parameter of type %0 with no explicit ownership</span><br><span class="line">-Wextern-c-compat    %select&#123;|empty &#125;0%select&#123;struct|union&#125;1 has size 0 in C, %select&#123;size 1|non-zero size&#125;2 in C++</span><br><span class="line">-Wextern-initializer    &apos;extern&apos; variable has an initializer</span><br><span class="line">-Wfloat-equal    comparing floating point with == or != is unsafe</span><br><span class="line">-Wformat    &quot;data argument position &apos;%0&apos; exceeds the number of data arguments (%1)</span><br><span class="line">-Wformat    position arguments in format strings start counting at 1 (not 0)</span><br><span class="line">-Wformat    invalid position specified for %select&#123;field width|field precision&#125;0</span><br><span class="line">-Wformat    cannot mix positional and non-positional arguments in format string</span><br><span class="line">-Wformat    values of type &apos;%0&apos; should not be used as format arguments add an explicit cast to %1 instead</span><br><span class="line">-Wformat    format specifies type %0 but the argument has type %1</span><br><span class="line">-Wformat    zero field width in scanf format string is unused</span><br><span class="line">-Wformat    no closing &apos;]&apos; for &apos;%%[&apos; in scanf format string</span><br><span class="line">-Wformat    format string should not be a wide string</span><br><span class="line">-Wformat    format string contains &apos;\\0&apos; within the string body</span><br><span class="line">-Wformat    &apos;%select&#123;*|.*&#125;0&apos; specified field %select&#123;width|precision&#125;0 is missing a matching &apos;int&apos; argument</span><br><span class="line">-Wformat    field %select&#123;width|precision&#125;0 should have type %1, but argument has type %2</span><br><span class="line">-Wformat    %select&#123;field width|precision&#125;0 used with &apos;%1&apos; conversion specifier, resulting in undefined behavior</span><br><span class="line">-Wformat    format string missing</span><br><span class="line">-Wformat    incomplete format specifier</span><br><span class="line">-Wformat    flag &apos;%0&apos; results in undefined behavior with &apos;%1&apos; conversion specifier</span><br><span class="line">-Wformat    flag &apos;%0&apos; is ignored when flag &apos;%1&apos; is present</span><br><span class="line">-Wformat    more &apos;%%&apos; conversions than data arguments</span><br><span class="line">-Wformat    length modifier &apos;%0&apos; results in undefined behavior or no effect with &apos;%1&apos; conversion specifier</span><br><span class="line">-Wformat-extra-args    data argument not used by format string</span><br><span class="line">-Wformat-invalid-specifier    invalid conversion specifier &apos;%0&apos;</span><br><span class="line">-Wformat-nonliteral    format string is not a string literal</span><br><span class="line">-Wformat-security    format string is not a string literal (potentially insecure)</span><br><span class="line">-Wformat-zero-length    format string is empty</span><br><span class="line">-Wgcc-compat    GCC does not allow the &apos;cleanup&apos; attribute argument to be anything other than a simple identifier</span><br><span class="line">-Wglobal-constructors    declaration requires a global constructor</span><br><span class="line">-Wglobal-constructors    declaration requires a global destructor</span><br><span class="line">-Wgnu-conditional-omitted-operand    use of GNU ?: conditional expression extension, omitting middle operand</span><br><span class="line">-Wheader-hygiene    using namespace directive in global context in header</span><br><span class="line">-Widiomatic-parentheses    using the result of an assignment as a condition without parentheses</span><br><span class="line">-Wignored-attributes    &apos;malloc&apos; attribute only applies to functions returning a pointer type</span><br><span class="line">-Wignored-attributes    %0 attribute only applies to %select&#123;functions|unions|variables and functions|functions and methods|parameters|functions, methods and blocks|functions, methods, and classes|functions, methods, and parameters|classes|variables|methods|variables, functions and labels|fields and global variables|structs|variables, functions and tag types|thread-local variables|variables and fields|variables, data members and tag types|types and namespaces|Objective-C interfaces&#125;1</span><br><span class="line">-Wignored-attributes    &apos;%0&apos; attribute cannot be specified on a definition</span><br><span class="line">-Wignored-attributes    __weak attribute cannot be specified on an automatic variable when ARC is not enabled</span><br><span class="line">-Wignored-attributes    Objective-C GC does not allow weak variables on the stack</span><br><span class="line">-Wignored-attributes    __weak attribute cannot be specified on a field declaration</span><br><span class="line">-Wignored-attributes    attribute %0 cannot be applied to %select&#123;functions|Objective-C method&#125;1 without return value</span><br><span class="line">-Wignored-attributes    attribute declaration must precede definition</span><br><span class="line">-Wignored-attributes    attribute %0 is ignored, place it after \&quot;%select&#123;class|struct|union|interface|enum&#125;1\&quot; to apply attribute to type declaration</span><br><span class="line">-Wignored-attributes    __declspec attribute %0 is not supported</span><br><span class="line">-Wignored-attributes    attribute %0 ignored, because it cannot be applied to a type</span><br><span class="line">-Wignored-attributes    attribute %0 after definition is ignored</span><br><span class="line">-Wignored-attributes    %0 attribute ignored</span><br><span class="line">-Wignored-attributes    &apos;sentinel&apos; attribute only supported for variadic %select&#123;functions|blocks&#125;0</span><br><span class="line">-Wignored-attributes    &apos;sentinel&apos; attribute requires named arguments</span><br><span class="line">-Wignored-attributes    &apos;%0&apos; only applies to %select&#123;function|pointer|Objective-C object or block pointer&#125;1 types type here is %2</span><br><span class="line">-Wignored-attributes    &apos;nonnull&apos; attribute applied to function with no pointer arguments</span><br><span class="line">-Wignored-attributes    %0 attribute can only be applied to instance variables or properties</span><br><span class="line">-Wignored-attributes    ibaction attribute can only be applied to Objective-C instance methods</span><br><span class="line">-Wignored-attributes    %0 calling convention ignored on variadic function</span><br><span class="line">-Wignored-attributes    %0 only applies to variables with static storage duration and functions</span><br><span class="line">-Wignored-attributes    %0 attribute argument not supported: %1</span><br><span class="line">-Wignored-attributes    #pramga ms_struct can not be used with dynamic classes or structures</span><br><span class="line">-Wignored-attributes    transparent union definition must contain at least one field transparent_union attribute ignored</span><br><span class="line">-Wignored-attributes    first field of a transparent union cannot have %select&#123;floating point|vector&#125;0 type %1 transparent_union attribute ignored</span><br><span class="line">-Wignored-attributes    &apos;gnu_inline&apos; attribute requires function to be marked &apos;inline&apos;, attribute ignored</span><br><span class="line">-Wignored-attributes    calling convention %0 ignored for this target</span><br><span class="line">-Wignored-attributes    transparent_union attribute can only be applied to a union definition attribute ignored</span><br><span class="line">-Wignored-attributes    %select&#123;alignment|size&#125;0 of field %1 (%2 bits) does not match the %select&#123;alignment|size&#125;0 of the first field in transparent union transparent_union attribute ignored</span><br><span class="line">-Wignored-attributes    attribute %0 is already applied</span><br><span class="line">-Wignored-attributes    %0 attribute ignored for field of type %1</span><br><span class="line">-Wignored-attributes    %0 attribute ignored when parsing type</span><br><span class="line">-Wignored-attributes    %0 attribute only applies to %select&#123;functions|methods|properties&#125;1 that return %select&#123;an Objective-C object|a pointer|a non-retainable pointer&#125;2</span><br><span class="line">-Wignored-attributes    %0 attribute only applies to %select&#123;Objective-C object|pointer&#125;1 parameters</span><br><span class="line">-Wignored-attributes    attribute %0 is already applied with different parameters</span><br><span class="line">-Wignored-attributes    unknown visibility %0</span><br><span class="line">-Wignored-qualifiers    &quot;&apos;%0&apos; type qualifier%s1 on return type %plural&#123;1:has|:have&#125;1 no effect</span><br><span class="line">-Wignored-qualifiers    ARC %select&#123;unused|__unsafe_unretained|__strong|__weak|__autoreleasing&#125;0 lifetime qualifier on return type is ignored</span><br><span class="line">-Wimplicit-atomic-properties    property is assumed atomic by default</span><br><span class="line">-Wimplicit-atomic-properties    property is assumed atomic when auto-synthesizing the property</span><br><span class="line">-Wimplicit-fallthrough    fallthrough annotation in unreachable code</span><br><span class="line">-Wimplicit-fallthrough    unannotated fall-through between switch labels</span><br><span class="line">-Wimplicit-fallthrough    fallthrough annotation does not directly precede switch label</span><br><span class="line">-Wimplicit-function-declaration    implicit declaration of function %0</span><br><span class="line">-Wimplicit-function-declaration    use of unknown builtin %0</span><br><span class="line">-Wimplicit-retain-self    &quot;block implicitly retains &apos;self&apos; explicitly mention &apos;self&apos; to indicate this is intended behavior</span><br><span class="line">-Wincompatible-library-redeclaration    incompatible redeclaration of library function %0</span><br><span class="line">-Wincomplete-implementation    method definition for %0 not found</span><br><span class="line">-Winherited-variadic-ctor    inheriting constructor does not inherit ellipsis</span><br><span class="line">-Winitializer-overrides    subobject initialization overrides initialization of other fields within its enclosing subobject</span><br><span class="line">-Winitializer-overrides    initializer overrides prior initialization of this subobject</span><br><span class="line">-Wint-to-pointer-cast    cast to %1 from smaller integer type %0</span><br><span class="line">-Wint-to-void-pointer-cast    cast to %1 from smaller integer type %0</span><br><span class="line">-Winvalid-iboutlet    IBOutletCollection properties should be copy/strong and not assign</span><br><span class="line">-Winvalid-iboutlet    %select&#123;instance variable|property&#125;2 with %0 attribute must be an object type (invalid %1)</span><br><span class="line">-Winvalid-noreturn    function %0 declared &apos;noreturn&apos; should not return</span><br><span class="line">-Winvalid-noreturn    function declared &apos;noreturn&apos; should not return</span><br><span class="line">-Wlarge-by-value-copy    return value of %0 is a large (%1 bytes) pass-by-value object pass it by reference instead ?</span><br><span class="line">-Wlarge-by-value-copy    %0 is a large (%1 bytes) pass-by-value argument pass it by reference instead ?</span><br><span class="line">-Wliteral-conversion    implicit conversion from %0 to %1 changes value from %2 to %3</span><br><span class="line">-Wliteral-range    magnitude of floating-point constant too large for type %0 maximum is %1</span><br><span class="line">-Wliteral-range    magnitude of floating-point constant too small for type %0 minimum is %1</span><br><span class="line">-Wlogical-not-parentheses    logical not is only applied to the left hand side of this comparison</span><br><span class="line">-Wlogical-op-parentheses    &apos;&amp;&amp;&apos; within &apos;||&apos;</span><br><span class="line">-Wloop-analysis    variable%select&#123;s| %1|s %1 and %2|s %1, %2, and %3|s %1, %2, %3, and %4&#125;0 used in loop condition not modified in loop body</span><br><span class="line">-Wloop-analysis    variable %0 is %select&#123;decremented|incremented&#125;1 both in the loop header and in the loop body</span><br><span class="line">-Wmethod-signatures    conflicting parameter types in implementation of %0: %1 vs %2</span><br><span class="line">-Wmethod-signatures    conflicting return type in implementation of %0: %1 vs %2</span><br><span class="line">-Wmicrosoft    extra qualification on member %0</span><br><span class="line">-Wmismatched-method-attributes    attributes on method implementation and its declaration must match</span><br><span class="line">-Wmismatched-parameter-types    conflicting parameter types in implementation of %0%diff&#123;: $ vs $|&#125;1,2</span><br><span class="line">-Wmismatched-return-types    conflicting return type in implementation of %0%diff&#123;: $ vs $|&#125;1,2</span><br><span class="line">-Wmissing-braces    suggest braces around initialization of subobject</span><br><span class="line">-Wmissing-declarations    &apos;%0&apos; ignored on this declaration</span><br><span class="line">-Wmissing-field-initializers    missing field &apos;%0&apos; initializer</span><br><span class="line">-Wmissing-method-return-type    method has no return type specified defaults to &apos;id&apos;</span><br><span class="line">-Wmissing-noreturn    %select&#123;function|method&#125;0 %1 could be declared with attribute &apos;noreturn&apos;</span><br><span class="line">-Wmissing-noreturn    block could be declared with attribute &apos;noreturn&apos;</span><br><span class="line">-Wmissing-prototypes    no previous prototype for function %0</span><br><span class="line">-Wmissing-variable-declarations    no previous extern declaration for non-static variable %0</span><br><span class="line">-Wmultiple-move-vbase    defaulted move assignment operator of %0 will move assign virtual base class %1 multiple times</span><br><span class="line">-Wnested-anon-types    anonymous types declared in an anonymous union/struct are an extension</span><br><span class="line">-Wno-typedef-redefinition    Redefinition of typedef &apos;%0&apos; is a C11 feature</span><br><span class="line">-Wnon-literal-null-conversion    &quot;expression which evaluates to zero treated as a null pointer constant of &quot; &quot;type %0</span><br><span class="line">-Wnon-pod-varargs    second argument to &apos;va_arg&apos; is of ARC ownership-qualified type %0</span><br><span class="line">-Wnon-pod-varargs    cannot pass %select&#123;non-POD|non-trivial&#125;0 object of type %1 to variadic %select&#123;function|block|method|constructor&#125;2 expected type from format string was %3</span><br><span class="line">-Wnon-pod-varargs    second argument to &apos;va_arg&apos; is of non-POD type %0</span><br><span class="line">-Wnon-pod-varargs    cannot pass object of %select&#123;non-POD|non-trivial&#125;0 type %1 through variadic %select&#123;function|block|method|constructor&#125;2 call will abort at runtime</span><br><span class="line">-Wnon-virtual-dtor    %0 has virtual functions but non-virtual destructor</span><br><span class="line">-Wnonnull    null passed to a callee which requires a non-null argument</span><br><span class="line">-Wnull-arithmetic    use of NULL in arithmetic operation</span><br><span class="line">-Wnull-arithmetic    comparison between NULL and non-pointer %select&#123;(%1 and NULL)|(NULL and %1)&#125;0</span><br><span class="line">-Wnull-dereference    indirection of non-volatile null pointer will be deleted, not trap</span><br><span class="line">-Wobjc-autosynthesis-property-ivar-name-match    autosynthesized property %0 will use %select&#123;|synthesized&#125;1 instance variable %2, not existing instance variable %3</span><br><span class="line">-Wobjc-forward-class-redefinition    redefinition of forward class %0 of a typedef name of an object type is ignored</span><br><span class="line">-Wobjc-interface-ivars    declaration of instance variables in the interface is deprecated</span><br><span class="line">-Wobjc-literal-compare    direct comparison of %select&#123;an array literal|a dictionary literal|a numeric literal|a boxed expression|&#125;0 has undefined behavior</span><br><span class="line">-Wobjc-literal-missing-atsign    string literal must be prefixed by &apos;@&apos;</span><br><span class="line">-Wobjc-method-access    instance method %objcinstance0 not found (return type defaults to &apos;id&apos;) did you mean %objcinstance2?</span><br><span class="line">-Wobjc-method-access    class method %objcclass0 not found (return type defaults to &apos;id&apos;) did you mean %objcclass2?</span><br><span class="line">-Wobjc-method-access    instance method %objcinstance0 not found (return type defaults to &apos;id&apos;)</span><br><span class="line">-Wobjc-method-access    instance method %0 is being used on &apos;Class&apos; which is not in the root class</span><br><span class="line">-Wobjc-method-access    class method %objcclass0 not found (return type defaults to &apos;id&apos;)</span><br><span class="line">-Wobjc-method-access    instance method %0 found instead of class method %1</span><br><span class="line">-Wobjc-missing-property-synthesis    &quot;auto property synthesis is synthesizing property not explicitly synthesized</span><br><span class="line">-Wobjc-missing-super-calls    method possibly missing a [super %0] call</span><br><span class="line">-Wobjc-noncopy-retain-block-property    &quot;retain&apos;ed block property does not copy the block &quot; &quot;- use copy attribute instead</span><br><span class="line">-Wobjc-nonunified-exceptions    can not catch an exception thrown with @throw in C++ in the non-unified exception model</span><br><span class="line">-Wobjc-property-implementation    property %0 requires method %1 to be defined - use @dynamic or provide a method implementation in this category</span><br><span class="line">-Wobjc-property-implementation    property %0 requires method %1 to be defined - use @synthesize, @dynamic or provide a method implementation in this class implementation</span><br><span class="line">-Wobjc-property-implicit-mismatch    &quot;primary property declaration is implicitly strong while redeclaration in class extension is weak</span><br><span class="line">-Wobjc-property-matches-cocoa-ownership-rule    property&apos;s synthesized getter follows Cocoa naming convention for returning &apos;owned&apos; objects</span><br><span class="line">-Wobjc-property-no-attribute    no &apos;assign&apos;, &apos;retain&apos;, or &apos;copy&apos; attribute is specified - &apos;assign&apos; is assumed</span><br><span class="line">-Wobjc-property-no-attribute    default property attribute &apos;assign&apos; not appropriate for non-GC object</span><br><span class="line">-Wobjc-property-synthesis    auto property synthesis will not synthesize property &apos;%0&apos; because it is &apos;readwrite&apos; but it will be synthesized &apos;readonly&apos; via another property</span><br><span class="line">-Wobjc-property-synthesis    &quot;auto property synthesis will not synthesize property &apos;%0&apos; because it cannot share an ivar with another synthesized property</span><br><span class="line">-Wobjc-protocol-method-implementation    category is implementing a method which will also be implemented by its primary class</span><br><span class="line">-Wobjc-protocol-property-synthesis    auto property synthesis will not synthesize property declared in a protocol</span><br><span class="line">-Wobjc-redundant-literal-use    using %0 with a literal is redundant</span><br><span class="line">-Wobjc-root-class    class %0 defined without specifying a base class</span><br><span class="line">-Wobjc-string-compare    direct comparison of a string literal has undefined behavior</span><br><span class="line">-Wobjc-string-concatenation    concatenated NSString literal for an NSArray expression - possibly missing a comma</span><br><span class="line">-Wover-aligned    type %0 requires %1 bytes of alignment and the default allocator only guarantees %2 bytes</span><br><span class="line">-Woverloaded-shift-op-parentheses    overloaded operator %select&#123;|&#125;0 has lower precedence than comparison operator</span><br><span class="line">-Woverloaded-virtual    %q0 hides overloaded virtual %select&#123;function|functions&#125;1</span><br><span class="line">-Woverriding-method-mismatch    conflicting distributed object modifiers on parameter type in declaration of %0</span><br><span class="line">-Woverriding-method-mismatch    conflicting parameter types in declaration of %0: %1 vs %2</span><br><span class="line">-Woverriding-method-mismatch    conflicting variadic declaration of method and its implementation</span><br><span class="line">-Woverriding-method-mismatch    conflicting distributed object modifiers on return type in declaration of %0</span><br><span class="line">-Woverriding-method-mismatch    conflicting parameter types in declaration of %0%diff&#123;: $ vs $|&#125;1,2</span><br><span class="line">-Woverriding-method-mismatch    conflicting return type in declaration of %0%diff&#123;: $ vs $|&#125;1,2</span><br><span class="line">-Woverriding-method-mismatch    conflicting return type in declaration of %0: %1 vs %2</span><br><span class="line">-Wpacked    packed attribute is unnecessary for %0</span><br><span class="line">-Wpadded    padding %select&#123;struct|interface|class&#125;0 %1 with %2 %select&#123;byte|bit&#125;3%select&#123;|s&#125;4 to align anonymous bit-field</span><br><span class="line">-Wpadded    padding %select&#123;struct|interface|class&#125;0 %1 with %2 %select&#123;byte|bit&#125;3%select&#123;|s&#125;4 to align %5</span><br><span class="line">-Wpadded    padding size of %0 with %1 %select&#123;byte|bit&#125;2%select&#123;|s&#125;3 to alignment boundary</span><br><span class="line">-Wparentheses    using the result of an assignment as a condition without parentheses</span><br><span class="line">-Wparentheses    %0 has lower precedence than %1 %1 will be evaluated first</span><br><span class="line">-Wparentheses    operator &apos;?:&apos; has lower precedence than &apos;%0&apos; &apos;%0&apos; will be evaluated first</span><br><span class="line">-Wparentheses-equality    equality comparison with extraneous parentheses</span><br><span class="line">-Wpointer-arith    subtraction of pointers to type %0 of zero size has undefined behavior</span><br><span class="line">-Wpredefined-identifier-outside-function    predefined identifier is only valid inside function</span><br><span class="line">-Wprivate-extern    use of __private_extern__ on a declaration may not produce external symbol private to the linkage unit and is deprecated</span><br><span class="line">-Wprotocol    method %0 in protocol not implemented</span><br><span class="line">-Wprotocol-property-synthesis-ambiguity    property of type %0 was selected for synthesis</span><br><span class="line">-Wreadonly-iboutlet-property    readonly IBOutlet property &apos;%0&apos; when auto-synthesized may not work correctly with &apos;nib&apos; loader</span><br><span class="line">-Wreadonly-setter-attrs    property attributes &apos;%0&apos; and &apos;%1&apos; are mutually exclusive</span><br><span class="line">-Wreceiver-expr    receiver type %0 is not &apos;id&apos; or interface pointer, consider casting it to &apos;id&apos;</span><br><span class="line">-Wreceiver-forward-class    receiver type %0 for instance message is a forward declaration</span><br><span class="line">-Wreceiver-is-weak    &quot;weak %select&#123;receiver|property|implicit property&#125;0 may be unpredictably set to nil</span><br><span class="line">-Wreinterpret-base-class    &apos;reinterpret_cast&apos; %select&#123;from|to&#125;3 class %0 %select&#123;to|from&#125;3 its %select&#123;virtual base|base at non-zero offset&#125;2 %1 behaves differently from &apos;static_cast&apos;</span><br><span class="line">-Wreorder    %select&#123;field|base class&#125;0 %1 will be initialized after %select&#123;field|base&#125;2 %3</span><br><span class="line">-Wrequires-super-attribute    %0 attribute cannot be applied to %select&#123;methods in protocols|dealloc&#125;1</span><br><span class="line">-Wreturn-stack-address    returning address of local temporary object</span><br><span class="line">-Wreturn-stack-address    returning address of label, which is local</span><br><span class="line">-Wreturn-stack-address    address of stack memory associated with local variable %0 returned</span><br><span class="line">-Wreturn-stack-address    reference to stack memory associated with local variable %0 returned</span><br><span class="line">-Wreturn-stack-address    returning reference to local temporary object</span><br><span class="line">-Wreturn-type    control may reach end of non-void function</span><br><span class="line">-Wreturn-type    non-void %select&#123;function|method&#125;1 %0 should return a value, DefaultError</span><br><span class="line">-Wreturn-type    control reaches end of non-void function</span><br><span class="line">-Wreturn-type-c-linkage    %0 has C-linkage specified, but returns incomplete type %1 which could be incompatible with C</span><br><span class="line">-Wreturn-type-c-linkage    %0 has C-linkage specified, but returns user-defined type %1 which is incompatible with C</span><br><span class="line">-Wsection    section does not match previous declaration</span><br><span class="line">-Wselector    creating selector for nonexistent method %0</span><br><span class="line">-Wselector-type-mismatch    multiple selectors named %0 found</span><br><span class="line">-Wself-assign    explicitly assigning a variable of type %0 to itself</span><br><span class="line">-Wself-assign-field    assigning %select&#123;field|instance variable&#125;0 to itself</span><br><span class="line">-Wsentinel    &quot;missing sentinel in %select&#123;function call|method dispatch|block call&#125;0</span><br><span class="line">-Wsentinel    not enough variable arguments in %0 declaration to fit a sentinel</span><br><span class="line">-Wshadow    declaration shadows a %select&#123;&quot; &quot;local variable|&quot; &quot;variable in %2|&quot; &quot;static data member of %2|&quot; &quot;field of %2&#125;1</span><br><span class="line">-Wshadow-ivar    local declaration of %0 hides instance variable</span><br><span class="line">-Wshift-count-negative    shift count is negative</span><br><span class="line">-Wshift-count-overflow    shift count = width of type</span><br><span class="line">-Wshift-op-parentheses    operator &apos;%0&apos; has lower precedence than &apos;%1&apos; &apos;%1&apos; will be evaluated first</span><br><span class="line">-Wshift-overflow    signed shift result (%0) requires %1 bits to represent, but %2 only has %3 bits</span><br><span class="line">-Wshift-sign-overflow    signed shift result (%0) sets the sign bit of the shift expression&apos;s type (%1) and becomes negative</span><br><span class="line">-Wshorten-64-to-32    implicit conversion loses integer precision: %0 to %1</span><br><span class="line">-Wsign-compare    comparison of integers of different signs: %0 and %1</span><br><span class="line">-Wsign-conversion    implicit conversion changes signedness: %0 to %1</span><br><span class="line">-Wsign-conversion    operand of ? changes signedness: %0 to %1</span><br><span class="line">-Wsizeof-array-argument    sizeof on array function parameter will return size of %0 instead of %1</span><br><span class="line">-Wsizeof-array-decay    sizeof on pointer operation will return size of %0 instead of %1</span><br><span class="line">-Wsizeof-pointer-memaccess    &apos;%0&apos; call operates on objects of type %1 while the size is based on a &quot; &quot;different type %2</span><br><span class="line">-Wsizeof-pointer-memaccess    argument to &apos;sizeof&apos; in %0 call is the same pointer type %1 as the %select&#123;destination|source&#125;2 expected %3 or an explicit length</span><br><span class="line">-Wsometimes-uninitialized    variable %0 is %select&#123;used|captured&#125;1 uninitialized whenever %select&#123;&apos;%3&apos; condition is %select&#123;true|false&#125;4|&apos;%3&apos; loop %select&#123;is entered|exits because its condition is false&#125;4|&apos;%3&apos; loop %select&#123;condition is true|exits because its condition is false&#125;4|switch %3 is taken|its declaration is reached|%3 is called&#125;2</span><br><span class="line">-Wstatic-local-in-inline    non-constant static local variable in inline function may be different in different files</span><br><span class="line">-Wstatic-self-init    static variable %0 is suspiciously used within its own initialization</span><br><span class="line">-Wstrict-selector-match    multiple methods named %0 found</span><br><span class="line">-Wstring-compare    result of comparison against %select&#123;a string literal|@encode&#125;0 is unspecified (use strncmp instead)</span><br><span class="line">-Wstring-conversion    implicit conversion turns string literal into bool: %0 to %1</span><br><span class="line">-Wstring-plus-char    adding %0 to a string pointer does not append to the string</span><br><span class="line">-Wstring-plus-int    adding %0 to a string does not append to the string</span><br><span class="line">-Wstrlcpy-strlcat-size    size argument in %0 call appears to be size of the source expected the size of the destination</span><br><span class="line">-Wstrncat-size    the value of the size argument in &apos;strncat&apos; is too large, might lead to a &quot; &quot;buffer overflow</span><br><span class="line">-Wstrncat-size    size argument in &apos;strncat&apos; call appears &quot; &quot;to be size of the source</span><br><span class="line">-Wstrncat-size    the value of the size argument to &apos;strncat&apos; is wrong</span><br><span class="line">-Wsuper-class-method-mismatch    method parameter type %diff&#123;$ does not match super class method parameter type $|does not match super class method parameter type&#125;0,1</span><br><span class="line">-Wswitch    overflow converting case value to switch condition type (%0 to %1)</span><br><span class="line">-Wswitch    case value not in enumerated type %0</span><br><span class="line">-Wswitch    %0 enumeration values not handled in switch: %1, %2, %3...</span><br><span class="line">-Wswitch    enumeration values %0 and %1 not handled in switch</span><br><span class="line">-Wswitch    enumeration value %0 not handled in switch</span><br><span class="line">-Wswitch    enumeration values %0, %1, and %2 not handled in switch</span><br><span class="line">-Wswitch-enum    enumeration values %0, %1, and %2 not explicitly handled in switch</span><br><span class="line">-Wswitch-enum    enumeration values %0 and %1 not explicitly handled in switch</span><br><span class="line">-Wswitch-enum    %0 enumeration values not explicitly handled in switch: %1, %2, %3...</span><br><span class="line">-Wswitch-enum    enumeration value %0 not explicitly handled in switch</span><br><span class="line">-Wtautological-compare    comparison of %0 unsigned%select&#123;| enum&#125;2 expression is always %1</span><br><span class="line">-Wtautological-compare    %select&#123;self-|array &#125;0comparison always evaluates to %select&#123;false|true|a constant&#125;1</span><br><span class="line">-Wtautological-compare    comparison of unsigned%select&#123;| enum&#125;2 expression %0 is always %1</span><br><span class="line">-Wtautological-constant-out-of-range-compare    comparison of constant %0 with expression of type %1 is always %select&#123;false|true&#125;2</span><br><span class="line">-Wthread-safety-analysis    locking &apos;%0&apos; that is already locked</span><br><span class="line">-Wthread-safety-analysis    cannot call function &apos;%0&apos; while mutex &apos;%1&apos; is locked</span><br><span class="line">-Wthread-safety-analysis    %select&#123;reading|writing&#125;2 the value pointed to by &apos;%0&apos; requires locking %select&#123;&apos;%1&apos;|&apos;%1&apos; exclusively&#125;2</span><br><span class="line">-Wthread-safety-analysis    unlocking &apos;%0&apos; that was not locked</span><br><span class="line">-Wthread-safety-analysis    mutex &apos;%0&apos; is locked exclusively and shared in the same scope</span><br><span class="line">-Wthread-safety-analysis    calling function &apos;%0&apos; requires %select&#123;shared|exclusive&#125;2 lock on &apos;%1&apos;</span><br><span class="line">-Wthread-safety-analysis    %select&#123;reading|writing&#125;2 variable &apos;%0&apos; requires locking %select&#123;&apos;%1&apos;|&apos;%1&apos; exclusively&#125;2</span><br><span class="line">-Wthread-safety-analysis    cannot resolve lock expression</span><br><span class="line">-Wthread-safety-analysis    expecting mutex &apos;%0&apos; to be locked at the end of function</span><br><span class="line">-Wthread-safety-analysis    mutex &apos;%0&apos; is not locked on every path through here</span><br><span class="line">-Wthread-safety-analysis    %select&#123;reading|writing&#125;1 the value pointed to by &apos;%0&apos; requires locking %select&#123;any mutex|any mutex exclusively&#125;1</span><br><span class="line">-Wthread-safety-analysis    %select&#123;reading|writing&#125;1 variable &apos;%0&apos; requires locking %select&#123;any mutex|any mutex exclusively&#125;1</span><br><span class="line">-Wthread-safety-analysis    mutex &apos;%0&apos; is still locked at the end of function</span><br><span class="line">-Wthread-safety-analysis    expecting mutex &apos;%0&apos; to be locked at start of each loop</span><br><span class="line">-Wthread-safety-attributes    ignoring %0 attribute because its argument is invalid</span><br><span class="line">-Wthread-safety-attributes    %0 attribute only applies to %select&#123;fields and global variables|functions and methods|classes and structs&#125;1</span><br><span class="line">-Wthread-safety-attributes    %0 attribute requires arguments that are class type or point to class type type here is &apos;%1&apos;</span><br><span class="line">-Wthread-safety-attributes    %0 attribute can only be applied in a context annotated with &apos;lockable&apos; attribute</span><br><span class="line">-Wthread-safety-attributes    %0 attribute requires arguments whose type is annotated with &apos;lockable&apos; attribute type here is &apos;%1&apos;</span><br><span class="line">-Wthread-safety-attributes    &apos;%0&apos; only applies to pointer types type here is %1</span><br><span class="line">-Wthread-safety-beta    Thread safety beta warning.</span><br><span class="line">-Wthread-safety-precise    %select&#123;reading|writing&#125;2 the value pointed to by &apos;%0&apos; requires locking %select&#123;&apos;%1&apos;|&apos;%1&apos; exclusively&#125;2</span><br><span class="line">-Wthread-safety-precise    %select&#123;reading|writing&#125;2 variable &apos;%0&apos; requires locking %select&#123;&apos;%1&apos;|&apos;%1&apos; exclusively&#125;2</span><br><span class="line">-Wthread-safety-precise    calling function &apos;%0&apos; requires %select&#123;shared|exclusive&#125;2 lock on &apos;%1&apos;</span><br><span class="line">-Wtype-safety    this type tag was not designed to be used with this function</span><br><span class="line">-Wtype-safety    specified %0 type tag requires a null pointer</span><br><span class="line">-Wtype-safety    argument type %0 doesn&apos;t match specified &apos;%1&apos; type tag %select&#123;that requires %3|&#125;2</span><br><span class="line">-Wundeclared-selector    undeclared selector %0 did you mean %1?</span><br><span class="line">-Wundeclared-selector    undeclared selector %0</span><br><span class="line">-Wundefined-inline    inline function %q0 is not defined</span><br><span class="line">-Wundefined-internal    %select&#123;function|variable&#125;0 %q1 has internal linkage but is not defined</span><br><span class="line">-Wundefined-reinterpret-cast    dereference of type %1 that was reinterpret_cast from type %0 has undefined behavior</span><br><span class="line">-Wundefined-reinterpret-cast    reinterpret_cast from %0 to %1 has undefined behavior</span><br><span class="line">-Wuninitialized    reference %0 is not yet bound to a value when used within its own initialization</span><br><span class="line">-Wuninitialized    field %0 is uninitialized when used here</span><br><span class="line">-Wuninitialized    block pointer variable %0 is uninitialized when captured by block</span><br><span class="line">-Wuninitialized    variable %0 is uninitialized when used within its own initialization</span><br><span class="line">-Wuninitialized    variable %0 is uninitialized when %select&#123;used here|captured by block&#125;1</span><br><span class="line">-Wuninitialized    reference %0 is not yet bound to a value when used here</span><br><span class="line">-Wunneeded-internal-declaration    %select&#123;function|variable&#125;0 %1 is not needed and will not be emitted</span><br><span class="line">-Wunneeded-internal-declaration    &apos;static&apos; function %0 declared in header file should be declared &apos;static inline&apos;</span><br><span class="line">-Wunneeded-member-function    member function %0 is not needed and will not be emitted</span><br><span class="line">-Wunreachable-code    will never be executed</span><br><span class="line">-Wunsequenced    multiple unsequenced modifications to %0</span><br><span class="line">-Wunsequenced    unsequenced modification and access to %0</span><br><span class="line">-Wunsupported-friend    dependent nested name specifier &apos;%0&apos; for friend template declaration is not supported ignoring this friend declaration</span><br><span class="line">-Wunsupported-friend    dependent nested name specifier &apos;%0&apos; for friend class declaration is not supported turning off access control for %1</span><br><span class="line">-Wunsupported-visibility    target does not support &apos;protected&apos; visibility using &apos;default&apos;</span><br><span class="line">-Wunused-comparison    %select&#123;equality|inequality&#125;0 comparison result unused</span><br><span class="line">-Wunused-const-variable    unused variable %0</span><br><span class="line">-Wunused-exception-parameter    unused exception parameter %0</span><br><span class="line">-Wunused-function    unused function %0</span><br><span class="line">-Wunused-label    unused label %0</span><br><span class="line">-Wunused-member-function    unused member function %0</span><br><span class="line">-Wunused-parameter    unused parameter %0</span><br><span class="line">-Wunused-private-field    private field %0 is not used</span><br><span class="line">-Wunused-property-ivar    ivar %0 which backs the property is not referenced in this property&apos;s accessor</span><br><span class="line">-Wunused-result    ignoring return value of function declared with warn_unused_result attribute</span><br><span class="line">-Wunused-value    ignoring return value of function declared with %0 attribute</span><br><span class="line">-Wunused-value    expression result unused should this cast be to &apos;void&apos;?</span><br><span class="line">-Wunused-value    expression result unused</span><br><span class="line">-Wunused-variable    unused variable %0</span><br><span class="line">-Wunused-volatile-lvalue    expression result unused assign into a variable to force a volatile load</span><br><span class="line">-Wused-but-marked-unused    %0 was marked unused but was used</span><br><span class="line">-Wuser-defined-literals    user-defined literal suffixes not starting with &apos;_&apos; are reserved%select&#123; no literal will invoke this operator|&#125;0</span><br><span class="line">-Wvarargs    second parameter of &apos;va_start&apos; not last named argument</span><br><span class="line">-Wvarargs    &apos;va_start&apos; has undefined behavior with reference types</span><br><span class="line">-Wvarargs    second argument to &apos;va_arg&apos; is of promotable type %0 this va_arg has undefined behavior because arguments will be promoted to %1</span><br><span class="line">-Wvector-conversion    incompatible vector types %select&#123;%diff&#123;assigning to $ from $|assigning to different types&#125;0,1|%diff&#123;passing $ to parameter of type $|passing to parameter of different type&#125;0,1|%diff&#123;returning $ from a function with result type $|returning from function with different return type&#125;0,1|%diff&#123;converting $ to type $|converting between types&#125;0,1|%diff&#123;initializing $ with an expression of type $|initializing with expression of different type&#125;0,1|%diff&#123;sending $ to parameter of type $|sending to parameter of different type&#125;0,1|%diff&#123;casting $ to type $|casting between types&#125;0,1&#125;2</span><br><span class="line">-Wvexing-parse    parentheses were disambiguated as a function declaration</span><br><span class="line">-Wvexing-parse    empty parentheses interpreted as a function declaration</span><br><span class="line">-Wvisibility    declaration of %0 will not be visible outside of this function</span><br><span class="line">-Wvisibility    redefinition of %0 will not be visible outside of this function</span><br><span class="line">-Wvla    variable length array used</span><br><span class="line">-Wvla-extension    variable length arrays are a C99 feature</span><br><span class="line">-Wweak-template-vtables    explicit template instantiation %0 will emit a vtable in every translation unit</span><br><span class="line">-Wweak-vtables    %0 has no out-of-line virtual method definitions; its vtable will be emitted in every translation unit</span><br><span class="line">Lexer Warnings</span><br><span class="line">Warning    Message</span><br><span class="line">-W#pragma-messages    %0</span><br><span class="line">-W#warnings    %0</span><br><span class="line">-W#warnings    %0</span><br><span class="line">-Wambiguous-macro    ambiguous expansion of macro %0</span><br><span class="line">-Wauto-import    treating #%select&#123;include|import|include_next|__include_macros&#125;0 as an import of module &apos;%1&apos;</span><br><span class="line">-Wbackslash-newline-escape    backslash and newline separated by space</span><br><span class="line">-Wc++11-compat    identifier after literal will be treated as a user-defined literal suffix in C++11</span><br><span class="line">-Wc++11-compat    &apos;%0&apos; is a keyword in C++11</span><br><span class="line">-Wc++98-c++11-compat    digit separators are incompatible with C++ standards before C++1y</span><br><span class="line">-Wc++98-c++11-compat-pedantic    binary integer literals are incompatible with C++ standards before C++1y</span><br><span class="line">-Wc++98-compat    raw string literals are incompatible with C++98</span><br><span class="line">-Wc++98-compat    unicode literals are incompatible with C++98</span><br><span class="line">-Wc++98-compat    universal character name referring to a control character is incompatible with C++98</span><br><span class="line">-Wc++98-compat    &apos;::&apos; is treated as digraph &apos;:&apos; (aka &apos;[&apos;) followed by &apos;:&apos; in C++98</span><br><span class="line">-Wc++98-compat    using this character in an identifier is incompatible with C++98</span><br><span class="line">-Wc++98-compat    specifying character &apos;%0&apos; with a universal character name is incompatible with C++98</span><br><span class="line">-Wc++98-compat-pedantic    variadic macros are incompatible with C++98</span><br><span class="line">-Wc++98-compat-pedantic    #line number greater than 32767 is incompatible with C++98</span><br><span class="line">-Wc++98-compat-pedantic    C++98 requires newline at end of file</span><br><span class="line">-Wc++98-compat-pedantic    empty macro arguments are incompatible with C++98</span><br><span class="line">-Wc99-compat    unicode literals are incompatible with C99</span><br><span class="line">-Wc99-compat    %select&#123;using this character in an identifier|starting an identifier with this character&#125;0 is incompatible with C99</span><br><span class="line">-Wcomment    &apos;/*&apos; within block comment</span><br><span class="line">-Wcomment    escaped newline between */ characters at block comment end</span><br><span class="line">-Wdisabled-macro-expansion    disabled expansion of recursive macro</span><br><span class="line">-Wheader-guard    %0 is used as a header guard here, followed by #define of a different macro</span><br><span class="line">-Wignored-attributes    unknown attribute &apos;%0&apos;</span><br><span class="line">-Wincomplete-module    header &apos;%0&apos; is included in module &apos;%1&apos; but not listed in module map</span><br><span class="line">-Wincomplete-umbrella    umbrella header for module &apos;%0&apos; does not include header &apos;%1&apos;</span><br><span class="line">-Winvalid-token-paste    pasting formed &apos;%0&apos;, an invalid preprocessing token, DefaultError</span><br><span class="line">-Wmalformed-warning-check    __has_warning expected option name (e.g. \&quot;-Wundef\&quot;)</span><br><span class="line">-Wnewline-eof    no newline at end of file</span><br><span class="line">-Wnull-character    null character ignored</span><br><span class="line">-Wnull-character    null character(s) preserved in string literal</span><br><span class="line">-Wnull-character    null character(s) preserved in character literal</span><br><span class="line">-Wtrigraphs    ignored trigraph would end block comment</span><br><span class="line">-Wtrigraphs    trigraph ignored</span><br><span class="line">-Wundef    %0 is not defined, evaluates to 0</span><br><span class="line">-Wunicode    universal character names are only valid in C99 or C++ treating as &apos;\\&apos; followed by identifier</span><br><span class="line">-Wunicode    \\%0 used with no following hex digits treating as &apos;\\&apos; followed by identifier</span><br><span class="line">-Wunicode    incomplete universal character name treating as &apos;\\&apos; followed by identifier</span><br><span class="line">-Wunicode    universal character name refers to a surrogate character</span><br><span class="line">-Wunknown-pragmas    unknown pragma ignored</span><br><span class="line">-Wunknown-pragmas    pragma STDC FENV_ACCESS ON is not supported, ignoring pragma</span><br><span class="line">-Wunused-macros    macro is not used</span><br><span class="line">Parser Warnings</span><br><span class="line">Warning    Message</span><br><span class="line">-Warc-bridge-casts-disallowed-in-nonarc    &apos;%0&apos; casts have no effect when not using ARC</span><br><span class="line">-Wattributes    unknown __declspec attribute %0 ignored</span><br><span class="line">-Wavailability    &apos;unavailable&apos; availability overrides all other availability information</span><br><span class="line">-Wc++11-compat    use of right-shift operator (&apos;&apos;) in template argument will require parentheses in C++11</span><br><span class="line">-Wc++11-compat    &apos;auto&apos; storage class specifier is redundant and incompatible with C++11</span><br><span class="line">-Wc++98-c++11-compat    &apos;decltype(auto)&apos; type specifier is incompatible with C++ standards before C++1y</span><br><span class="line">-Wc++98-compat    range-based for loop is incompatible with C++98</span><br><span class="line">-Wc++98-compat    alias declarations are incompatible with C++98</span><br><span class="line">-Wc++98-compat    in-class initialization of non-static data members is incompatible with C++98</span><br><span class="line">-Wc++98-compat    defaulted function definitions are incompatible with C++98</span><br><span class="line">-Wc++98-compat    rvalue references are incompatible with C++98</span><br><span class="line">-Wc++98-compat    reference qualifiers on functions are incompatible with C++98</span><br><span class="line">-Wc++98-compat    inline namespaces are incompatible with C++98</span><br><span class="line">-Wc++98-compat    generalized initializer lists are incompatible with C++98</span><br><span class="line">-Wc++98-compat    trailing return types are incompatible with C++98</span><br><span class="line">-Wc++98-compat    enumeration types with a fixed underlying type are incompatible with C++98</span><br><span class="line">-Wc++98-compat    alignof expressions are incompatible with C++98</span><br><span class="line">-Wc++98-compat    &apos;%0&apos; keyword is incompatible with C++98</span><br><span class="line">-Wc++98-compat    &apos;decltype&apos; type specifier is incompatible with C++98</span><br><span class="line">-Wc++98-compat    deleted function definitions are incompatible with C++98</span><br><span class="line">-Wc++98-compat    consecutive right angle brackets are incompatible with C++98 (use &apos;&gt; &gt;&apos;)</span><br><span class="line">-Wc++98-compat    static_assert declarations are incompatible with C++98</span><br><span class="line">-Wc++98-compat    scoped enumerations are incompatible with C++98</span><br><span class="line">-Wc++98-compat    lambda expressions are incompatible with C++98</span><br><span class="line">-Wc++98-compat    attributes are incompatible with C++98</span><br><span class="line">-Wc++98-compat    &apos;alignas&apos; is incompatible with C++98</span><br><span class="line">-Wc++98-compat    noexcept specifications are incompatible with C++98</span><br><span class="line">-Wc++98-compat    literal operators are incompatible with C++98</span><br><span class="line">-Wc++98-compat    noexcept expressions are incompatible with C++98</span><br><span class="line">-Wc++98-compat    &apos;nullptr&apos; is incompatible with C++98</span><br><span class="line">-Wc++98-compat-pedantic    extra &apos;&apos; outside of a function is incompatible with C++98</span><br><span class="line">-Wc++98-compat-pedantic    extern templates are incompatible with C++98</span><br><span class="line">-Wc++98-compat-pedantic    commas at the end of enumerator lists are incompatible with C++98</span><br><span class="line">-Wdangling-else    add explicit braces to avoid dangling else</span><br><span class="line">-Wdeprecated    Use of &apos;long&apos; with &apos;__vector&apos; is deprecated</span><br><span class="line">-Wdeprecated-declarations    use of C-style parameters in Objective-C method declarations is deprecated</span><br><span class="line">-Wdeprecated-register    &apos;register&apos; storage class specifier is deprecated</span><br><span class="line">-Wduplicate-decl-specifier    duplicate &apos;%0&apos; declaration specifier</span><br><span class="line">-Wextra-semi    extra &apos;;&apos; after member function definition</span><br><span class="line">-Wextra-tokens    &quot;extra tokens at the end of &apos;#pragma omp %0&apos; are ignored</span><br><span class="line">-Wgcc-compat    GCC does not allow %0 attribute in this position on a function definition</span><br><span class="line">-Wignored-attributes    attribute %0 ignored, because it is not attached to a declaration</span><br><span class="line">-Wmicrosoft-exists    dependent %select&#123;__if_not_exists|__if_exists&#125;0 declarations are ignored</span><br><span class="line">-Wmissing-selector-name    %0 used as the name of the previous parameter rather than as part of the selector</span><br><span class="line">-Wsemicolon-before-method-body    semicolon before method body is ignored</span><br><span class="line">-Wsource-uses-openmp    &quot;unexpected &apos;#pragma omp ...&apos; in program</span><br><span class="line">-Wstatic-inline-explicit-instantiation    ignoring &apos;%select&#123;static|inline&#125;0&apos; keyword on exp</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/19/xcode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/19/xcode/" itemprop="url">xcode中使用正则表达式来搜索替换代码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-19T17:32:45+08:00">
                2018-03-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>有这样的需求：<br>类似于</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GLOBAL_STR(@&quot;请继续添加&quot;);</span><br></pre></td></tr></table></figure>
<p>这样的代码，需要批量修改为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GLOBAL_STR(@&quot;请继续添加&quot;, nil);</span><br></pre></td></tr></table></figure>
<p>这里使用普通的查找替换不能够达到目的，需要用到正则表达式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GLOBAL_STR(.*);</span><br></pre></td></tr></table></figure>
<p>替换文本的正则：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GLOBAL_STR(.$1,nil);</span><br></pre></td></tr></table></figure>
<p><strong>xcode的查找替换选项里面选择regular expression，使用上面的正则即可解决问题。</strong></p>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/13/Swift4-0中使用NSSelectorFromString/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/13/Swift4-0中使用NSSelectorFromString/" itemprop="url">Swift4.0中使用NSSelectorFromString()</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-13T17:22:44+08:00">
                2018-03-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS开发/" itemprop="url" rel="index">
                    <span itemprop="name">iOS开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Swift4.0中调用Selector采用#selector(xxx)的方式，而且要求被调用的Selector前面加上@objc修饰符。否则编译器报错 如图所示。</p>
<p><img src="https://github.com/a1049145827/Resources/raw/master/Swift_Selector_objc.jpg" alt="编译器报错"></p>
<p>有时候项目中会有一些特殊的需求，需要用到NSSelectorFromString()，然后使用 perform(_ aSelector: Selector!) -&gt; Unmanaged<anyobject>! 进行方法调用，如下代码。</anyobject></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sel: <span class="type">Selector</span> = <span class="type">NSSelectorFromString</span>(<span class="string">"doSomething"</span>)</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.responds(to: sel)) &#123;</span><br><span class="line">    <span class="keyword">self</span>.perform(sel)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样调用的话，需要在实现方法的前面也加上@objc修饰符，否则编译可以通过，但是调用没有效果。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 代码示例</span></span><br><span class="line"><span class="meta">@objc</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">()</span></span> -&gt; <span class="type">Void</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"doSomething"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>看起来和OC中使用差别并不大，但是如果被调用的方法带参数的话，情况就不一样了。由于Swift的语法特性，带参数的func有3种写法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@objc</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething1</span><span class="params">(name: String?, type: String?)</span></span> -&gt; <span class="type">Void</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"doSomething1:"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@objc</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething2</span><span class="params">(with name: String?, type: String?)</span></span> -&gt; <span class="type">Void</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"doSomething2:"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@objc</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething3</span><span class="params">(<span class="number">_</span> name: String?, type: String?)</span></span> -&gt; <span class="type">Void</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"doSomething3:"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样一来，NSSelectorFromString(“xxx”)中，方法名该如何填写呢？</p>
<p>这里有一个思路，既然方法名前面都有@objc修饰符，那我们应该是可以通过runtime，将这些方法获取并打印出来，那么方法名就一览无余啦。</p>
<p>接下来在Swift中建一个OC类文件做一个工具类，之后再桥接上头文件。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入runtime头文件</span></span><br><span class="line">#<span class="keyword">import</span> &lt;objc/runtime.h&gt;</span><br><span class="line"></span><br><span class="line">@implementation <span class="type">MethodTool</span></span><br><span class="line"></span><br><span class="line">+ (void)printMothListWithObj:(id)obj &#123;</span><br><span class="line"></span><br><span class="line">    unsigned int mothCout_f =<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">Method</span>* mothList_f = class_copyMethodList([obj <span class="class"><span class="keyword">class</span>], &amp;<span class="title">mothCout_f</span>);</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">for</span> (<span class="title">int</span> <span class="title">i</span> = 0; <span class="title">i</span> &lt; <span class="title">mothCout_f</span>; <span class="title">i</span> ++) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Method</span> temp_f = mothList_f[i];</span><br><span class="line">        <span class="type">IMP</span> imp_f = method_getImplementation(temp_f);</span><br><span class="line">        <span class="type">SEL</span> name_f = method_getName(temp_f);</span><br><span class="line"></span><br><span class="line">        const char *name_s = sel_getName(method_getName(temp_f));</span><br><span class="line">        int arguments = method_getNumberOfArguments(temp_f);</span><br><span class="line">        const char *encoding = method_getTypeEncoding(temp_f);</span><br><span class="line"></span><br><span class="line">        <span class="type">NSLog</span>(@<span class="string">"方法名：%@,参数个数：%d,编码方式：%@"</span>,[<span class="type">NSString</span> stringWithUTF8String:name_s], arguments, [<span class="type">NSString</span> stringWithUTF8String:encoding]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    free(mothList_f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>工具搞好了，创建一个Swift对象，用工具类打印出方法，得出如下结果：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2018</span>-<span class="number">03</span>-<span class="number">13</span> <span class="number">18</span>:<span class="number">03</span>:<span class="number">51.163992</span>+<span class="number">0800</span> <span class="type">SwiftOCDemo</span>[<span class="number">92116</span>:<span class="number">21107487</span>] 方法名：doSomething1WithName:type:,参数个数：<span class="number">4</span>,编码方式：v32@<span class="number">0</span>:<span class="number">8</span>@<span class="number">16</span>@<span class="number">24</span></span><br><span class="line"><span class="number">2018</span>-<span class="number">03</span>-<span class="number">13</span> <span class="number">18</span>:<span class="number">03</span>:<span class="number">51.164126</span>+<span class="number">0800</span> <span class="type">SwiftOCDemo</span>[<span class="number">92116</span>:<span class="number">21107487</span>] 方法名：doSomething2With:type:,参数个数：<span class="number">4</span>,编码方式：v32@<span class="number">0</span>:<span class="number">8</span>@<span class="number">16</span>@<span class="number">24</span></span><br><span class="line"><span class="number">2018</span>-<span class="number">03</span>-<span class="number">13</span> <span class="number">18</span>:<span class="number">03</span>:<span class="number">51.164265</span>+<span class="number">0800</span> <span class="type">SwiftOCDemo</span>[<span class="number">92116</span>:<span class="number">21107487</span>] 方法名：doSomething3:type:,参数个数：<span class="number">4</span>,编码方式：v32@<span class="number">0</span>:<span class="number">8</span>@<span class="number">16</span>@<span class="number">24</span></span><br></pre></td></tr></table></figure>
<p>果然，Swift4中带参数的方法名在写法不同的情况下，生成的方法名是不同的，最终我们根据输出结果，就可以放心调用啦！</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sel1 = <span class="type">NSSelectorFromString</span>(<span class="string">"doSomething1WithName:type:"</span>)</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.responds(to: sel1)) &#123;</span><br><span class="line">    <span class="keyword">self</span>.perform(sel1, with: <span class="string">""</span>, with: <span class="string">""</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sel2 = <span class="type">NSSelectorFromString</span>(<span class="string">"doSomething2With:type:"</span>)</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.responds(to: sel2)) &#123;</span><br><span class="line">    <span class="keyword">self</span>.perform(sel2, with: <span class="string">""</span>, with: <span class="string">""</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sel3 = <span class="type">NSSelectorFromString</span>(<span class="string">"doSomething3:type:"</span>)</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.responds(to: sel3)) &#123;</span><br><span class="line">    <span class="keyword">self</span>.perform(sel3, with: <span class="string">""</span>, with: <span class="string">""</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>虽然需求得以实现，不过在此还是提醒大家，Swift语言的初衷是为大家提供方便并且安全的开发方式，这种通过NSSelectorFromString(“xxx”)的方式显然是违背设计原则的，大家在开发的过程中尽量避免使用这种方式。当然，遇到坑爹的需求就另说了，毕竟技术要服务于业务嘛。。。</p>
<p>还有一点就是，我在Swift提供的perform()方法中只发现了这几个func</p>
<p><img src="https://github.com/a1049145827/Resources/raw/master/Swift_Perform_Selector.jpg" alt="perform"></p>
<p>如果你要调用的方法多于两个参数的话，那就得考虑一下用何种方案了。</p>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/13/Swift4-0中使用NSClassFromString/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/13/Swift4-0中使用NSClassFromString/" itemprop="url">Swift4.0中使用NSClassFromString()</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-13T13:59:54+08:00">
                2018-03-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS开发/" itemprop="url" rel="index">
                    <span itemprop="name">iOS开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>如果我们需要在项目中需要使用NSClassFromString()方法来获取一个Swift语言写的类。那么直接按照原来OC的方式来写：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cls = <span class="type">NSClassFromString</span>(className)!</span><br></pre></td></tr></table></figure>
<p>编译器是不会报错的，不过运行的时候就懵逼了，cls是空的。</p>
<p><strong>Swift跟OC的差别还是蛮大的，由字符串转为类型的时候 如果类型是自定义的 需要在类型字符串前边加上你的项目的名字！（个人认为应该是Target名）</strong></p>
<p>正确写法:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 拼接类名字</span></span><br><span class="line"><span class="keyword">let</span> className = <span class="string">"xxx."</span> + <span class="string">"your className"</span> <span class="comment">// xxx替换为你的Xcode工程里对应Target的名字，而且中间还要加一点 "."</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 然后使用NSClassFromString()获取Class</span></span><br><span class="line"><span class="keyword">let</span> cls = <span class="type">NSClassFromString</span>(className)!</span><br></pre></td></tr></table></figure>
<p><strong>同理，在OC中调用NSClassFromString()方法获取Swift语言写的类，也需要用在类名前加上工程名（个人认为应该是Target名）和路径连接符 “.” 。</strong></p>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/13/Xcode工程项目中实现Swift和OC混编-相互引用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/13/Xcode工程项目中实现Swift和OC混编-相互引用/" itemprop="url">Xcode工程项目中实现Swift和OC混编 相互引用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-13T11:45:25+08:00">
                2018-03-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS开发/" itemprop="url" rel="index">
                    <span itemprop="name">iOS开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="一、OC工程中的相互引用"><a href="#一、OC工程中的相互引用" class="headerlink" title="一、OC工程中的相互引用"></a>一、OC工程中的相互引用</h3><p><strong>适用于初始工程为OC后续引入Swift的场景, 初始工程为Swift后续引入OC的直接看第二节</strong></p>
<h4 id="OC工程中引用Swift"><a href="#OC工程中引用Swift" class="headerlink" title="OC工程中引用Swift"></a>OC工程中引用Swift</h4><p>1.通过CocoaClass新建一个Swift文件</p>
<p><img src="https://github.com/a1049145827/Resources/raw/master/Create_Swift_File.jpg" alt="创建Swift文件"></p>
<p>2.填好文件名 ，-&gt;create, 弹出是否要创建桥接文件的提示框</p>
<p><img src="https://github.com/a1049145827/Resources/raw/master/Create_Swift_Class.jpg" alt="填写Swift文件名"><br><img src="https://github.com/a1049145827/Resources/raw/master/Create_Bridging_Header.jpg" alt="创建桥接文件"></p>
<p>3.如果没有弹出是否创建桥接文件的提示框，则进入配置工程里看看此处是否为空，如果不是空的，就删掉，因为是否创建桥接文件只会弹出一次，若你已经选择了一次not create，则下次不会再提示，想要再次创建桥接文件需在自己创建一个头文件，并在这里填写对应路径。或者这里将设置清空，再从1开始。</p>
<p><img src="https://github.com/a1049145827/Resources/raw/master/OC_Swift_Bridge.jpg" alt="设置桥接文件"></p>
<p>4.至此，文件创建好了，配置也做好啦，开始上代码，在需要引用Swift的OC文件中导入头文件</p>
<p>#import “xxx-Swift.h”。（xxx（一般为工程名）-Swift.h，此文件为Xcode隐式创建)</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 此文件为OC工程中的OC文件</span></span><br><span class="line"><span class="comment">// ViewController.m</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"ViewController.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"xxx-Swift.h"</span>     // xxx（一般为工程名）-Swift.h，此文件为Xcode隐式创建</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line"></span><br><span class="line">    TestClass *ar = [[TestClass alloc] init];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>OC中引用Swift完毕</p>
<h4 id="OC工程中新建Swift并引用OC"><a href="#OC工程中新建Swift并引用OC" class="headerlink" title="OC工程中新建Swift并引用OC"></a>OC工程中新建Swift并引用OC</h4><p>刚刚已经创建了Swift文件和桥接文件，现在我们需要在桥接文件里引入要引用的OC类的头文件。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// OCSwiftDemo-Bridging-Header.h 桥接文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Use this file to import your target's public headers that you would like to expose to Swift.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#include <span class="meta-string">"ViewController.h"</span></span></span><br></pre></td></tr></table></figure>
<p>之后便可以在TestClass文件里进行引用。</p>
<p>ObjC<br>// 此文件为OC工程中创建的Swift文件<br>// Swift文件中调用OC的类<br>import UIKit</p>
<p>class TestClass: NSObject {<br>    let vc: ViewController = ViewController()<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">### 二、Swift工程中的相互引用</span><br><span class="line"></span><br><span class="line">**适用于初始工程为Swift后续引入OC的场景**</span><br><span class="line"></span><br><span class="line">#### Swift工程中新建OC文件并引用Swift</span><br><span class="line"></span><br><span class="line">如果你是看到前面的提示，直接过来看这里的话，很抱歉，您可能还需要看一遍前面的步骤，因为有配图更好理解。</span><br><span class="line"></span><br><span class="line">Swift工程中创建OC类并和Swift相互引用的方式，和前面OC工程创建Swift文件并相互引用的步骤是一致的（所以没有配图）。</span><br><span class="line"></span><br><span class="line">1.通过CocoaClass新建一个OC文件</span><br><span class="line"></span><br><span class="line">2.填好文件名 ，-&gt;create, 弹出是否要创建桥接文件的提示框</span><br><span class="line"></span><br><span class="line">3.如果没有弹出是否创建桥接文件的提示框，则进入配置工程里看看此处是否为空，如果不是空的，就删掉，因为是否创建桥接文件只会弹出一次，若你已经选择了一次not create，则下次不会再提示，想要再次创建桥接文件需在自己创建一个头文件，并在这里填写对应路径。或者这里将设置清空，再从1开始。</span><br><span class="line"></span><br><span class="line">4.至此，文件创建好了，配置也做好啦，在需要引用Swift的OC文件中导入头文件(#import &quot;xxx-Swift.h&quot;   // xxx（一般为工程名）-Swift.h，此文件为Xcode隐式创建)，即可调用相关类文件。代码如下：</span><br><span class="line"></span><br><span class="line">``` ObjC</span><br><span class="line">// 此文件为Swift工程中的OC文件</span><br><span class="line">// TestClass.m</span><br><span class="line"></span><br><span class="line">#import &quot;TestClass.h&quot;</span><br><span class="line">#import &quot;xxx-Swift.h&quot;   // xxx（一般为工程名）-Swift.h，此文件为Xcode隐式创建</span><br><span class="line"></span><br><span class="line">@implementation TestClass</span><br><span class="line"></span><br><span class="line">- (instancetype)init &#123;</span><br><span class="line">    self = [super init];</span><br><span class="line">    if (self) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)updateView &#123;</span><br><span class="line">    ViewController *vc = [[ViewController alloc] init];</span><br><span class="line">    NSLog(@&quot;%@&quot;, vc);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<h4 id="Swift工程中引用OC文件"><a href="#Swift工程中引用OC文件" class="headerlink" title="Swift工程中引用OC文件"></a>Swift工程中引用OC文件</h4><p>5.刚刚已经创建了OC文件和桥接文件，现在我们需要在桥接文件里引入要引用的OC类的头文件。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SwiftOCDemo-Bridging-Header.h 桥接文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Use this file to import your target's public headers that you would like to expose to Swift.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#include <span class="meta-string">"TestClass.h"</span></span></span><br></pre></td></tr></table></figure>
<p>6.之后便可以在Swift文件里进行引用。</p>
<p>ObjC<br>// 此文件为Swift工程中的Swift文件<br>//  ViewController.swift  Swift文件中调用OC类</p>
<p>import UIKit</p>
<p>class ViewController: UIViewController {</p>
<pre><code>override func viewDidLoad() {
    super.viewDidLoad()

    let tc = TestClass()
    tc.updateView()
}
</code></pre><p>}</p>
<p><code>`</code></p>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/09/mac下用sed报错-command-c-expects-followed-by-text/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/09/mac下用sed报错-command-c-expects-followed-by-text/" itemprop="url">Mac下用sed报错 command c expects  followed by text</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-09T18:11:02+08:00">
                2018-03-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS开发/" itemprop="url" rel="index">
                    <span itemprop="name">iOS开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一条很简单的替换文本的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">'s/www.a.cn/www.b.com/g'</span> common.sh</span><br><span class="line"><span class="comment"># 执行时报错command c expects \ followed by text</span></span><br><span class="line"><span class="comment"># 也有可能报错 invalid command code W</span></span><br></pre></td></tr></table></figure>
<p>但是同样的命令在服务器上是可以正确执行的，看了mac下的man sed，里面-i选项中的解释：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Edit files <span class="keyword">in</span>-place, saving backups with the specified extension.</span><br><span class="line"></span><br><span class="line">If a zero-length extension is given, no backup will be saved.  It</span><br><span class="line"></span><br><span class="line">is not recommended to give a zero-length extension when <span class="keyword">in</span>-place</span><br><span class="line"></span><br><span class="line">editing files, as you risk corruption or partial content <span class="keyword">in</span> situ-</span><br><span class="line"></span><br><span class="line">ations <span class="built_in">where</span> disk space is exhausted, etc.</span><br></pre></td></tr></table></figure>
<p>大概的意思就是说用-i的选项时mac会进行强制备份，所以你必须给出一个后缀名进行备份，如果你不想进行备份，直接用空字符即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">''</span> <span class="string">'s/www.a.cn/www.b.com/g'</span> common.sh</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/07/Swift-关键字-defer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/07/Swift-关键字-defer/" itemprop="url">Swift-关键字 defer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-07T14:36:36+08:00">
                2018-03-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS开发/" itemprop="url" rel="index">
                    <span itemprop="name">iOS开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="defer-关键字有什么作用"><a href="#defer-关键字有什么作用" class="headerlink" title="defer 关键字有什么作用"></a>defer 关键字有什么作用</h2><p>Swift2.0 中加入了 defer 新语法声明。defer 译为延缓、推迟之意。那么在 Swift 中它应该如何执行呢？<br>很简单，用一句话概括，就是 defer block 里的代码会在函数（scope） return 之前执行，无论函数是从哪个分支 return 的，还是有 throw，还是自然而然走到最后一行。</p>
<p>这个关键字就跟 Java 里的 try-catch-finally 的finally一样，不管 try catch 走哪个分支，它都会在函数 return 之前执行。而且它比 Java 的 finally 还更强大的一点是，它可以独立于 try catch 存在，所以它也可以成为整理函数流程的一个小帮手。在函数 return 之前无论如何都要做的处理，可以放进这个 block 里，让代码看起来更整洁一些~</p>
<p>下面是 swift 文档上的例子：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fridgeIsOpen = <span class="literal">false</span></span><br><span class="line"><span class="keyword">let</span> fridgeContent = [<span class="string">"milk"</span>, <span class="string">"eggs"</span>, <span class="string">"leftovers"</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fridgeContains</span><span class="params">(<span class="number">_</span> food: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    fridgeIsOpen = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">defer</span> &#123;</span><br><span class="line">        fridgeIsOpen = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> result = fridgeContent.<span class="built_in">contains</span>(food)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line">fridgeContains(<span class="string">"banana"</span>)</span><br><span class="line"><span class="built_in">print</span>(fridgeIsOpen)</span><br></pre></td></tr></table></figure>
<p>这个例子里执行的顺序是，先 fridgeIsOpen = true，然后是函数体正常的流程，最后在 return 之前执行 fridgeIsOpen = false。</p>
<h2 id="几个简单的使用场景"><a href="#几个简单的使用场景" class="headerlink" title="几个简单的使用场景"></a>几个简单的使用场景</h2><h3 id="try-catch-结构"><a href="#try-catch-结构" class="headerlink" title="try catch 结构"></a>try catch 结构</h3><p>最典型的场景，我想也是 defer 这个关键字诞生的主要原因吧：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"finally"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="type">NSError</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"impossible"</span>)</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"handle error"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不管 do block 是否 throw error，有没有 catch 到，还是 throw 出去了，都会保证在整个函数 return 前执行 defer。在这个例子里，就是先 print 出 “handle error” 再 print 出 “finally”。</p>
<p>do block 里也可以写 defer：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"finally"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">throw</span> <span class="type">NSError</span>()</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"impossible"</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"handle error"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>那么它执行的顺序就会是在 catch block 之前，也就是先 print 出 “finally” 再 print 出 “handle error”。</p>
<h3 id="清理工作、回收资源"><a href="#清理工作、回收资源" class="headerlink" title="清理工作、回收资源"></a>清理工作、回收资源</h3><p>跟 swift 文档举的例子类似，defer 有一个很适合的使用场景就是用来做清理工作。文件操作就是一个很好的例子：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 关闭文件</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">let</span> fileDescriptor = <span class="keyword">open</span>(url.path, <span class="type">O_EVTONLY</span>)</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    close(fileDescriptor)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// use fileDescriptor...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样就不怕哪个分支忘了写，或者中间 throw 个 error，导致 fileDescriptor 没法正常关闭。还有一些类似的场景：</p>
<h3 id="dealloc-手动分配的空间"><a href="#dealloc-手动分配的空间" class="headerlink" title="dealloc 手动分配的空间"></a>dealloc 手动分配的空间</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">let</span> valuePointer = <span class="type">UnsafeMutablePointer</span>&lt;<span class="type">T</span>&gt;.allocate(capacity: <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    valuePointer.deallocate(capacity: <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// use pointer...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="加-解锁："><a href="#加-解锁：" class="headerlink" title="加/解锁："></a>加/解锁：</h3><p>下面是 swift 里类似 Objective-C 的 synchronized block 的一种写法，可以使用任何一个 NSObject 作 lock。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</span><br><span class="line">  objc_sync_enter(lock)</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    objc_sync_exit(lock)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// do something...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>像这种成对调用的方法，可以用 defer 把它们放在一起，一目了然。</p>
<h3 id="调用-completion-block"><a href="#调用-completion-block" class="headerlink" title="调用 completion block"></a>调用 completion block</h3><p>这是一个让我感觉 “如果当时知道 defer” 就好了的场景，就是有时候一个函数分支比较多，可能某个小分支 return 之前就忘了调 completion block，结果藏下一个不易发现的 bug。用 defer 就可以不用担心这个问题了：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">(completion: <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.isLoading = <span class="literal">false</span></span><br><span class="line">    completion()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">guard</span> error == <span class="literal">nil</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">  <span class="comment">// handle success</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>有时候 completion 要根据情况传不同的参数，这时 defer 就不好使了。不过如果 completion block 被存下来了，我们还是可以用它来确保执行后能释放：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.completion = <span class="literal">nil</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (succeed) &#123;</span><br><span class="line">    <span class="keyword">self</span>.completion(.success(result))</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.completion(.error(error))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="调-super-方法"><a href="#调-super-方法" class="headerlink" title="调 super 方法"></a>调 super 方法</h3><p>有时候 override 一个方法，主要目的是在 super 方法之前做一些准备工作，比如 UICollectionViewLayout 的 prepare(forCollectionViewUpdates:)，那么我们就可以把调用 super 的部分放在 defer 里：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">override</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.foo()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// some preparation before super.foo()...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="一些细节"><a href="#一些细节" class="headerlink" title="一些细节"></a>一些细节</h2><h3 id="任意-scope-都可以有-defer"><a href="#任意-scope-都可以有-defer" class="headerlink" title="任意 scope 都可以有 defer"></a>任意 scope 都可以有 defer</h3><p>虽然大部分的使用场景是在函数里，不过理论上任何一个 { } 之间都是可以写 defer 的。比如一个普通的循环：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sumOfOdd = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>...<span class="number">10</span> &#123;</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Look! It's \(i)"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span> &#123;</span><br><span class="line">    <span class="keyword">continue</span></span><br><span class="line">  &#125;</span><br><span class="line">  sumOfOdd += i</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>continue 或者 break 都不会妨碍 defer 的执行。甚至一个平白无故的 closure 里也可以写 defer：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"bye!"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"hello!"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>只不过这样就没什么意义了</p>
<h3 id="必须执行到-defer-才会触发"><a href="#必须执行到-defer-才会触发" class="headerlink" title="必须执行到 defer 才会触发"></a>必须执行到 defer 才会触发</h3><p>假设有这样一个问题：一个 scope 里的 defer 能保证一定会执行吗？<br>答案是否。。。比如下面这个例子：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">  <span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="type">NSError</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"impossible"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"finally"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span>? foo()</span><br></pre></td></tr></table></figure>
<p>不会执行 defer，不会 print 任何东西。这个故事告诉我们，至少要执行到 defer 这一行，它才保证后面会触发。同样道理，提前 return 也是不行的：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">guard</span> <span class="literal">false</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"finally"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="多个-defer"><a href="#多个-defer" class="headerlink" title="多个 defer"></a>多个 defer</h3><p>一个 scope 可以有多个 defer，顺序是像栈一样倒着执行的：每遇到一个 defer 就像压进一个栈里，到 scope 结束的时候，后进栈的先执行。如下面的代码，会按 1、2、3、4、5、6 的顺序 print 出来。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"1"</span>)</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"6"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"2"</span>)</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"5"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"3"</span>)</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"4"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是我强烈建议不要这么写。我是建议一个 scope 里不要有多个 defer，感觉除了让读代码的人感觉混乱之外没有什么好处。</p>
<h3 id="defer-的作用域（重要）"><a href="#defer-的作用域（重要）" class="headerlink" title="defer 的作用域（重要）"></a>defer 的作用域（重要）</h3><p><strong>注意作用域，其次是调用顺序——即一个作用域结束，该作用域中的defer语句自下而上调用。</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">lookforSomething</span><span class="params">(<span class="number">_</span> name: String)</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">  <span class="comment">// 这里是作用域1 整个函数作用域</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"1-1"</span>)</span><br><span class="line">  <span class="keyword">if</span> name == <span class="string">""</span> &#123;</span><br><span class="line">    <span class="comment">// 这里是作用域2 if的作用域</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"2-1"</span>)</span><br><span class="line">    <span class="keyword">defer</span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">"2-2"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"2-3"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"1-2"</span>)</span><br><span class="line">  <span class="keyword">defer</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"1-3"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"1-4"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> name == <span class="string">"hello"</span> &#123;</span><br><span class="line">    <span class="comment">// 作用域3</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"3-1"</span>)</span><br><span class="line">    <span class="keyword">defer</span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">"3-2"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"3-3"</span>)</span><br><span class="line">    <span class="keyword">defer</span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">"3-4"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 有兴趣的看看依次输出什么</span></span><br><span class="line"><span class="comment">// try! lookforSomething("")</span></span><br><span class="line"><span class="comment">// 调出 debug Area 快捷键 shift+ command + y</span></span><br><span class="line"><span class="keyword">try</span>! lookforSomething(<span class="string">"hello"</span>)</span><br></pre></td></tr></table></figure>
<p>之前有个地方描述可能不准确，并不是函数结束时开始执行 defer 栈推出操作，而是每当一个作用域结束就进行该作用域 defer 执行。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://link.jianshu.com/?t=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F24045895%2Fwhat-is-the-swift-equivalent-to-objective-cs-synchronized" target="_blank" rel="noopener">What is the Swift equivalent to Objective-C’s “@synchronized”?</a></p>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/07/使用fastlane进行自动化构建/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/07/使用fastlane进行自动化构建/" itemprop="url">使用fastlane进行自动化构建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-07T10:50:12+08:00">
                2018-03-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS开发/" itemprop="url" rel="index">
                    <span itemprop="name">iOS开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>fastlane作为持续集成工具，一次配置，之后使用十分方便，极大的提高工作效率，把开发者从繁琐无聊的工作中解放出来，强烈推荐大家使用</strong></p>
<h4 id="更新ruby"><a href="#更新ruby" class="headerlink" title="更新ruby"></a>更新ruby</h4><p>首先，安装或更新rvm</p>
<p>有可能需要更新ruby源（国外镜像服务器访问起来有些吃力）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ gem sources</span><br><span class="line">*** CURRENT SOURCES ***</span><br><span class="line"></span><br><span class="line">https://gems.ruby-china.org/</span><br></pre></td></tr></table></figure>
<p>这里我们使用rvm工具管理ruby版本，其实Homebrew也可以安装ruby（brew install ruby），如果你还没有安装Homebrew，那么具体的安装方法请自行百度（捂脸）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装RVM工具</span></span><br><span class="line">curl -L get.rvm.io | bash -s stable</span><br><span class="line"></span><br><span class="line"><span class="comment">#列出可安装的ruby版本（有原始的ruby也有其他版本的版本）</span></span><br><span class="line">rvm list known</span><br><span class="line"></span><br><span class="line"><span class="comment">#根据刚才列出的ruby版本，安装一个ruby版本</span></span><br><span class="line">rvm install ruby-xxxxx（xxx为版本号）</span><br></pre></td></tr></table></figure>
<h4 id="安装fastlane"><a href="#安装fastlane" class="headerlink" title="安装fastlane"></a>安装fastlane</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装fastlane，加不加sudo取决于终端是否有权限执行该命令</span></span><br><span class="line">[sudo] gem install -n /usr/<span class="built_in">local</span>/bin fastlane</span><br></pre></td></tr></table></figure>
<p>安装完毕后到工程目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/projectpath</span><br></pre></td></tr></table></figure>
<p>执行fastlane初始化</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane init</span><br></pre></td></tr></table></figure>
<h4 id="配置fastlane（重要）"><a href="#配置fastlane（重要）" class="headerlink" title="配置fastlane（重要）"></a>配置fastlane（重要）</h4><p>其实在Xcode自动管理证书之后，fastlane的配置已经极大的简化，当Xcode中勾选了自动管理证书，那么Fastfile中就可以直接调用gym进行打包，而不需要再调用sigh设置证书信息。</p>
<p>如果你的项目配置比较简单，那么只需要在Appfile中设置好基本信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app_identifier(<span class="string">"com.xxxx.xxxxx"</span>)</span><br><span class="line">apple_id(<span class="string">"xxxxxxxxx@xxx.com"</span>)</span><br><span class="line">team_id(<span class="string">"xxxxxxxx"</span>)</span><br></pre></td></tr></table></figure>
<p>然后在Fastfile中写上几行代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">lane :to_pgy <span class="keyword">do</span></span><br><span class="line">  build_app(</span><br><span class="line">    export_method: <span class="string">"ad-hoc"</span>,</span><br><span class="line">    output_directory: <span class="string">"./ipa"</span>,</span><br><span class="line">  )</span><br><span class="line">  firim(firim_api_token: <span class="string">"xxxxxxxxx"</span>)</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>就能自动打一个ac-hoc签名的包并自动上传到firim，就是这么简单和任性。不过一般的工程配置都不会这么简单，比如需要先执行pod或者carthage的相关命令，有些项目需要关闭bitcode等等，不尽相同。</p>
<h4 id="执行中报错"><a href="#执行中报错" class="headerlink" title="执行中报错"></a>执行中报错</h4><p>处理完配置文件，眼看就要大功告成，潇洒的在终端敲下 fastlane to_firim，按下回车键， 然后去泡杯咖啡，准备回来享受成功的喜悦。</p>
<p>没想到回来时却看到命令行鲜红的字体提示error</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xxx, Bundle only contains bitcode-marker, xxx</span><br><span class="line">Exit status: 70</span><br></pre></td></tr></table></figure>
<p>内心瞬间崩溃，说好的一键打包呢？回过神来一看，这不是bitcode的错误吗，赶紧去工程配置看一下，bitcode已经是NO了啊，回想哪里不对，Xcode更新之后，我们应用不但需要在编译之前将build setting中bitcode选项设置为NO，还要在导出的时候把rebuild from bitcode选项取消勾选。那么这个操作如何反应到fastlane呢？为了解决这个问题，可是费了一番功夫，最后查到解决方案：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1、Enable Bitcode -&gt; No</span><br><span class="line"></span><br><span class="line">2、Project -&gt; Targets -&gt; Build Settings -&gt; Custom Compiler Flags -&gt; Other C Flags -&gt; &quot;-fembed-bitcode&quot;</span><br><span class="line"></span><br><span class="line">如果静态库的工程有 -Werror的选项，需要去掉。应为在编译的时候有一个警告。 clang: warning: argument unused during compilation: &apos;-fembed-bitcode-marker&apos;, 如果不去掉就会报错</span><br><span class="line"></span><br><span class="line">通过gym打包的时候，也要把export_options中compileBitcode置为false</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Could not find action, lane or variable <span class="string">'firim'</span></span><br></pre></td></tr></table></figure>
<p>遇到这个错误不难解决，首先查看是否已经安装了firim的插件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fastlane add_plugin firim</span><br><span class="line"><span class="comment"># 如果你使用的是蒲公英，那么需要安装蒲公英的插件，官方说明：https://www.pgyer.com/doc/view/fastlane</span></span><br><span class="line">fastlane add_plugin pgyer</span><br></pre></td></tr></table></figure>
<p>然后查看项目里Gemfile是否引用了firim：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem <span class="string">"firim"</span></span><br></pre></td></tr></table></figure>
<p>坑点就说道这里，之后如果再遇到，再来补充。</p>
<h4 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h4><p>由于技术服务于业务，本文介绍的使用方式可能不能完全覆盖大家的需求，如果大家在使用过程中遇到问题，可以多留意报错信息，或者查阅文档、向社区求助。希望能够帮到大家 (<em>^__^</em>)</p>
<p>fastlane配置十分丰富，也给大家使用时带来一些幸福的烦恼，所以使用时还是要多看看文档，才能少走弯路，尽快配置成功。</p>
<p>本文只是简单介绍了fastlane的用处、用法，以及一些采坑经历。具体使用可以到下面传送门👇，能找到一些实例代码。</p>
<h4 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h4><p><a href="https://www.jianshu.com/p/ae5b492b5338" target="_blank" rel="noopener">iOS App自动化打包发布（Jenkins + Fastlane）</a><br><a href="https://zhuanlan.zhihu.com/p/23180455" target="_blank" rel="noopener">小团队的自动化发布－Fastlane带来的全自动化部署</a><br><a href="https://docs.fastlane.tools" target="_blank" rel="noopener">Fastlane 官方文档</a></p>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/06/软件开发之设计模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/06/软件开发之设计模式/" itemprop="url">软件开发之设计模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-06T16:01:21+08:00">
                2018-03-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/软件开发/" itemprop="url" rel="index">
                    <span itemprop="name">软件开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>设计模式（Design pattern）代表了最佳的实践，通常被有经验的面向对象的软件开发人员所采用。设计模式是软件开发人员在软件开发过程中面临的一般问题的解决方案。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。理解了设计模式的原理和其中所蕴含的大智慧后可以帮助我们写出结构更合理、风格更优雅、更容易复用的代码。</p>
<h4 id="设计模式的基本原则"><a href="#设计模式的基本原则" class="headerlink" title="设计模式的基本原则"></a>设计模式的基本原则</h4><p>设计模式的基本原则非常重要，只要真正深入地理解了设计原则，很多设计模式其实就是原则的应用而已，或许在不知不觉中就在使用设计模式了：</p>
<ul>
<li>单一职责原则（SRP），就一个类而言，应该仅有一个引起它变化的原因。</li>
<li>开放-封闭原则（OCP），是说软件实体（类、模块、函数等等）应该可以拓展，但是不可修改。</li>
<li>依赖倒转原则（DIP），A. 高层模块不应该依赖低层模块，两个都应该依赖抽象。B. 抽象不应该依赖细节，细节应该依赖抽象。</li>
<li>里氏代换原则（LSP），子类型必须能够替换掉它们的父类型。</li>
<li>迪米特法则（LoD），如果两个类不必彼此直接通信，那么这两个类就不应当发生直接的相互作用。如果其中一个类需要调用另一个类的某一个方法的话，可以通过第三者转发这个调用。</li>
<li>合成/聚合复用原则（CARP），尽量使用合成/聚合，尽量不要使用类继承。</li>
</ul>
<p>注：SRP-Single Responsibility Principle，OCP-Open-Closed Principle，DIP-Dependency Inversion Principle，LSP-Liskov Subsitution Principle，LoD-Law of Demeter，CARP-Composition/Aggregation Principle。</p>
<h4 id="常用的-23-种设计模式"><a href="#常用的-23-种设计模式" class="headerlink" title="常用的 23 种设计模式"></a>常用的 23 种设计模式</h4><p>不管是 .NET 中的 C# 语言，还是 Java、VB.NET、C++ 或 Objective-C 语言，面向对象语言在设计模式的层面上都是相通的，只不过在设计模式的具体实现上语法稍有差异罢了：</p>
<ol>
<li>策略模式（Strategy），它定义了算法家族，分别封装起来，让它们之间可以互相替换，此模式让算法的变化，不会影响到使用算法的客户。</li>
<li>装饰模式（Decorator），动态地给一个对象添加一些额外的职责，就增加功能来说，装饰模式比生成子类更为灵活。</li>
<li>代理模式（Proxy），为其他对象提供一种代理以控制对这个对象的访问。</li>
<li>工厂方法模式（Factory Method），定义一个用于创建对象的接口，让子类决定实例化哪一个类。工厂方法使一个类的实例化延迟到其子类。</li>
<li>原型模式（Prototype），用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象。</li>
<li>模板方法模式（Template Method），定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。</li>
<li>外观模式（Facade），为子系统中的一组接口提供一个一致的界面，此模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。</li>
<li>建造者模式（Builder），将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。</li>
<li>观察者模式（Observer），定义了一种一对多的依赖关系，让多个观察者对象同时监听某一个主题对象。这个主题对象在状态发生变化时，会通知所有观察者对象，使它们能够自动更新自己。</li>
<li>抽象工厂模式（Abstract Factory），提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类。</li>
<li>状态模式（State），当一个对象的内在状态改变时允许改变其行为，这个对象看起来像是改变了其类。</li>
<li>适配器模式（Adapter），将一个类的接口转换成客户希望的另外一个接口。Adapter 模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。</li>
<li>备忘录模式（Memento），在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。这样以后就可将该对象恢复到原先保存的状态。</li>
<li>组合模式（Composite），将对象组合成树形结构以表示‘部分-整体’的层次结构。组合模式使得用户对单个对象和组合对象的使用具有一致性。</li>
<li>迭代器模式（Iterator），提供一种方法顺序访问一个聚合对象中各个元素，而又不暴露该对象的内部表示。</li>
<li>单例模式（Singleton），保证一个类仅有一个实例，并提供一个访问它的全局访问点。</li>
<li>桥接模式（Bridge），将抽象部分与它的实现部分分离，使它们都可以独立地变化。</li>
<li>命令模式（Command），将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化；对请求排队或记录请求日志，以及支持可撤销的操作。</li>
<li>职责链模式（Chain of Responsibility），使多个对象都有机会处理请求，从而避免请求的发送者和接收者之间的耦合关系。将这个对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理它为止。</li>
<li>中介者模式（Mediator），用一个中介对象来封装一系列的对象交互。中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互。</li>
<li>享元模式（Flyweight），运用共享技术有效地支持大量细粒度的对象。</li>
<li>解释器模式（Interpreter），给定一个语言，定义它的文法的一种表示，并定义一个解释器，这个解释器使用该表示来解释语言中的句子。</li>
<li>访问者模式（Visitor），表示一个作用于某对象结构中的各元素的操作。它使你可以在不改变各元素的类的前提下定义作用于这些元素的新操作。</li>
</ol>
<p><a href="https://juejin.im/post/5aaa2943f265da239c7b15c4" target="_blank" rel="noopener">23个经典设计模式的Swift实现</a></p>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/06/Swift-关键字（typealias、associatedtype）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/06/Swift-关键字（typealias、associatedtype）/" itemprop="url">Swift - 关键字（typealias、associatedtype）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-06T09:38:38+08:00">
                2018-03-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS开发/" itemprop="url" rel="index">
                    <span itemprop="name">iOS开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="typealias-类型别名"><a href="#typealias-类型别名" class="headerlink" title="typealias 类型别名"></a>typealias 类型别名</h4><p><strong>typealias 是用来为已经存在的类型重新定义名字的，通过命名，可以使代码变得更加清晰。</strong>使用的语法也很简单，使用 typealias 关键字像使用普通的赋值语句一样，可以将某个已经存在的类型赋值为新的名字。比如在计算二维平面上的距离和位置的时候，我们一般使用 Double 来表示距离，用 CGPoint 来表示位置:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">distance</span><span class="params">(<span class="number">_</span> point: CGPoint, <span class="number">_</span> anotherPoint: CGPoint)</span></span> -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> dx = <span class="type">Double</span>(anotherPoint.x - point.x)</span><br><span class="line">    <span class="keyword">let</span> dy = <span class="type">Double</span>(anotherPoint.y - point.y)</span><br><span class="line">    <span class="keyword">return</span> sqrt(dx * dx + dy * dy)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> origin = <span class="type">CGPoint</span>(x: <span class="number">3</span>, y: <span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> point = <span class="type">CGPoint</span>(x: <span class="number">4</span>, y: <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> d = <span class="built_in">distance</span>(origin, point)</span><br></pre></td></tr></table></figure>
<p>虽然在数学上和最后的程序运行上都没什么问题，但是阅读和维护的时候总是觉得有哪里不对。 因为我们没有将数学抽象和实际问题结合起来，使得在阅读代码时我们还需要在大脑中进行一次额外的转换: CGPoint 代表一个点，而这个点就是我们在定义的坐标系里的位置; Double 是一个数字，它代表两个点之间的距离。</p>
<p>如果我们使用 typealias，就可以将这种转换直接写在代码里，从而减轻阅读和维护的负担:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">distance</span><span class="params">(<span class="number">_</span> point: CGPoint, <span class="number">_</span> anotherPoint: CGPoint)</span></span> -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> dx = <span class="type">Distance</span>(anotherPoint.x - point.x)</span><br><span class="line">    <span class="keyword">let</span> dy = <span class="type">Distance</span>(anotherPoint.y - point.y)</span><br><span class="line">    <span class="keyword">return</span> sqrt(dx * dx + dy * dy)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> origin = <span class="type">Location</span>(x: <span class="number">3</span>, y: <span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> point = <span class="type">Location</span>(x: <span class="number">4</span>, y: <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> d = <span class="built_in">distance</span>(origin, point)</span><br></pre></td></tr></table></figure>
<p>同样的代码，在 typealias 的帮助下，读起来就轻松多了。可能单单这个简单例子不会有特别多的体会，但是当遇到更复杂的实际问题时，我们就可以不再关心并去思考自己代码里那些成堆的Int或者String之类的基本类型到底代表的是什么东西了，这样应该能省下不少脑细胞。<strong>注意：开发过程中，当使用的闭包的时候，会经常使用typealias。</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typealias</span> <span class="type">Success</span> = (<span class="number">_</span> data: <span class="type">String</span>) -&gt; <span class="type">Void</span></span><br><span class="line"><span class="keyword">typealias</span> <span class="type">Failure</span> = (<span class="number">_</span> error: <span class="type">String</span>) -&gt; <span class="type">Void</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">request</span><span class="params">(<span class="number">_</span> url: String, success: Success, failure: Failure)</span></span> &#123;</span><br><span class="line">    <span class="comment">// do request here ....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="typealias与泛型"><a href="#typealias与泛型" class="headerlink" title="typealias与泛型"></a>typealias与泛型</h5><p><strong>typealias 是单一的，也就是说我们必须指定将某个特定的类型通过 typealias 赋值为新名字，而不能将整个泛型类型进行重命名。</strong>下面这样的命名都是无法通过编译的:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&lt;<span class="title">T</span>&gt; </span>&#123;&#125;</span><br><span class="line"><span class="keyword">typealias</span> <span class="type">Woker</span> = <span class="type">Person</span></span><br><span class="line"><span class="keyword">typealias</span> <span class="type">Worker</span> = <span class="type">Person</span>&lt;<span class="type">T</span>&gt;</span><br></pre></td></tr></table></figure>
<p>不过如果我们在别名中也引入泛型，是可以进行对应的</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&lt;<span class="title">T</span>&gt; </span>&#123;&#125;</span><br><span class="line"><span class="keyword">typealias</span> <span class="type">Woker</span> = <span class="type">Person</span></span><br><span class="line"><span class="keyword">typealias</span> <span class="type">Worker</span>&lt;<span class="type">T</span>&gt; = <span class="type">Person</span>&lt;<span class="type">T</span>&gt;</span><br></pre></td></tr></table></figure>
<p>当泛型类型的确定性得到保证后，显然别名也是可以使用的:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&lt;<span class="title">T</span>&gt; </span>&#123;&#125;</span><br><span class="line"><span class="keyword">typealias</span> <span class="type">WorkId</span> = <span class="type">String</span></span><br><span class="line"><span class="keyword">typealias</span> <span class="type">Worker</span> = <span class="type">Person</span>&lt;<span class="type">WorkId</span>&gt;</span><br></pre></td></tr></table></figure>
<p>另一个使用场景是某个类型同时实现多个协议的组合时。我们可以使用&amp;符号连接几个协议，然后给它们一个新的更符合上下文的名字，来增强代码可读性:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Cat</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Dog</span> </span>&#123;&#125;</span><br><span class="line"><span class="keyword">typealias</span> <span class="type">Pat</span> = <span class="type">Cat</span> &amp; <span class="type">Dog</span></span><br></pre></td></tr></table></figure>
<h4 id="associatedtype-关联类型"><a href="#associatedtype-关联类型" class="headerlink" title="associatedtype 关联类型"></a>associatedtype 关联类型</h4><p>定义一个协议时，有的时候声明一个或多个关联类型作为协议定义的一部分将会非常有用。 <strong>关联类型为协议中的某个类型提供了一个占位名（或者说别名），其代表的实际类型在协议被采纳时才会被指定。</strong> 我们可以通过 associatedtype 关键字来指定关联类型，比如使用协议声明更新cell 的方法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模型</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Model</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> age: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 协议，使用关联类型</span></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">TableViewCellProtocol</span> </span>&#123;</span><br><span class="line">    associatedtype <span class="type">T</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">updateCell</span><span class="params">(<span class="number">_</span> data: T)</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遵守TableViewCellProtocol</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTableViewCell</span>: <span class="title">UITableViewCell</span>, <span class="title">TableViewCellProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">T</span> = <span class="type">Model</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">updateCell</span><span class="params">(<span class="number">_</span> data: Model)</span></span> &#123;</span><br><span class="line">        <span class="comment">// do something ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          
        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="Coder bruce" />
          <p class="site-author-name" itemprop="name">Coder bruce</p>
           
              <p class="site-description motion-element" itemprop="description">hello world</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">68</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/a1049145827" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/ff82b16c5264" target="_blank" title="简书">
                  
                    <i class="fa fa-fw fa-heartbeat"></i>
                  
                    
                      简书
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Coder bruce</span>
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_pv">
  本站访客数:<span id="busuanzi_value_site_pv"></span>
</span>
</div>







<div class="theme-info">
  <!-- <div class="powered-by"></div> -->
  <span class="post-count">博客全站共61.6k字</span>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>




  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>