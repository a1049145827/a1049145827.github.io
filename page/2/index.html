<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="hello world">
<meta property="og:type" content="website">
<meta property="og:title" content="Bruce&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Bruce&#39;s Blog">
<meta property="og:description" content="hello world">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bruce&#39;s Blog">
<meta name="twitter:description" content="hello world">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>Bruce's Blog</title>
  














</head>


<script type="text/javascript"
color="0,0,255" opacity='0.7' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>


<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <a href="https://github.com/a1049145827"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Bruce's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Hi~</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/09/macä¸‹ç”¨sedæŠ¥é”™-command-c-expects-followed-by-text/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/09/macä¸‹ç”¨sedæŠ¥é”™-command-c-expects-followed-by-text/" itemprop="url">Macä¸‹ç”¨sedæŠ¥é”™ command c expects  followed by text</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-09T18:11:02+08:00">
                2018-03-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOSå¼€å‘/" itemprop="url" rel="index">
                    <span itemprop="name">iOSå¼€å‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä¸€æ¡å¾ˆç®€å•çš„æ›¿æ¢æ–‡æœ¬çš„å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sed -i <span class="string">'s/www.a.cn/www.b.com/g'</span> common.sh</div><div class="line"><span class="comment"># æ‰§è¡Œæ—¶æŠ¥é”™command c expects \ followed by text</span></div><div class="line"><span class="comment"># ä¹Ÿæœ‰å¯èƒ½æŠ¥é”™ invalid command code W</span></div></pre></td></tr></table></figure>
<p>ä½†æ˜¯åŒæ ·çš„å‘½ä»¤åœ¨æœåŠ¡å™¨ä¸Šæ˜¯å¯ä»¥æ­£ç¡®æ‰§è¡Œçš„ï¼Œçœ‹äº†macä¸‹çš„man sedï¼Œé‡Œé¢-ié€‰é¡¹ä¸­çš„è§£é‡Šï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Edit files <span class="keyword">in</span>-place, saving backups with the specified extension.</div><div class="line"></div><div class="line">If a zero-length extension is given, no backup will be saved.  It</div><div class="line"></div><div class="line">is not recommended to give a zero-length extension when <span class="keyword">in</span>-place</div><div class="line"></div><div class="line">editing files, as you risk corruption or partial content <span class="keyword">in</span> situ-</div><div class="line"></div><div class="line">ations <span class="built_in">where</span> disk space is exhausted, etc.</div></pre></td></tr></table></figure>
<p>å¤§æ¦‚çš„æ„æ€å°±æ˜¯è¯´ç”¨-içš„é€‰é¡¹æ—¶macä¼šè¿›è¡Œå¼ºåˆ¶å¤‡ä»½ï¼Œæ‰€ä»¥ä½ å¿…é¡»ç»™å‡ºä¸€ä¸ªåç¼€åè¿›è¡Œå¤‡ä»½ï¼Œå¦‚æœä½ ä¸æƒ³è¿›è¡Œå¤‡ä»½ï¼Œç›´æ¥ç”¨ç©ºå­—ç¬¦å³å¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -i <span class="string">''</span> <span class="string">'s/www.a.cn/www.b.com/g'</span> common.sh</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/07/Swift-å…³é”®å­—-defer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/07/Swift-å…³é”®å­—-defer/" itemprop="url">Swift-å…³é”®å­— defer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-07T14:36:36+08:00">
                2018-03-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOSå¼€å‘/" itemprop="url" rel="index">
                    <span itemprop="name">iOSå¼€å‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="defer-å…³é”®å­—æœ‰ä»€ä¹ˆä½œç”¨"><a href="#defer-å…³é”®å­—æœ‰ä»€ä¹ˆä½œç”¨" class="headerlink" title="defer å…³é”®å­—æœ‰ä»€ä¹ˆä½œç”¨"></a>defer å…³é”®å­—æœ‰ä»€ä¹ˆä½œç”¨</h2><p>Swift2.0 ä¸­åŠ å…¥äº† defer æ–°è¯­æ³•å£°æ˜ã€‚defer è¯‘ä¸ºå»¶ç¼“ã€æ¨è¿Ÿä¹‹æ„ã€‚é‚£ä¹ˆåœ¨ Swift ä¸­å®ƒåº”è¯¥å¦‚ä½•æ‰§è¡Œå‘¢ï¼Ÿ<br>å¾ˆç®€å•ï¼Œç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼Œå°±æ˜¯ defer block é‡Œçš„ä»£ç ä¼šåœ¨å‡½æ•°ï¼ˆscopeï¼‰ return ä¹‹å‰æ‰§è¡Œï¼Œæ— è®ºå‡½æ•°æ˜¯ä»å“ªä¸ªåˆ†æ”¯ return çš„ï¼Œè¿˜æ˜¯æœ‰ throwï¼Œè¿˜æ˜¯è‡ªç„¶è€Œç„¶èµ°åˆ°æœ€åä¸€è¡Œã€‚</p>
<p>è¿™ä¸ªå…³é”®å­—å°±è·Ÿ Java é‡Œçš„ try-catch-finally çš„finallyä¸€æ ·ï¼Œä¸ç®¡ try catch èµ°å“ªä¸ªåˆ†æ”¯ï¼Œå®ƒéƒ½ä¼šåœ¨å‡½æ•° return ä¹‹å‰æ‰§è¡Œã€‚è€Œä¸”å®ƒæ¯” Java çš„ finally è¿˜æ›´å¼ºå¤§çš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒå¯ä»¥ç‹¬ç«‹äº try catch å­˜åœ¨ï¼Œæ‰€ä»¥å®ƒä¹Ÿå¯ä»¥æˆä¸ºæ•´ç†å‡½æ•°æµç¨‹çš„ä¸€ä¸ªå°å¸®æ‰‹ã€‚åœ¨å‡½æ•° return ä¹‹å‰æ— è®ºå¦‚ä½•éƒ½è¦åšçš„å¤„ç†ï¼Œå¯ä»¥æ”¾è¿›è¿™ä¸ª block é‡Œï¼Œè®©ä»£ç çœ‹èµ·æ¥æ›´æ•´æ´ä¸€äº›~</p>
<p>ä¸‹é¢æ˜¯ swift æ–‡æ¡£ä¸Šçš„ä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> fridgeIsOpen = <span class="literal">false</span></div><div class="line"><span class="keyword">let</span> fridgeContent = [<span class="string">"milk"</span>, <span class="string">"eggs"</span>, <span class="string">"leftovers"</span>]</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">fridgeContains</span><span class="params">(<span class="number">_</span> food: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    fridgeIsOpen = <span class="literal">true</span></div><div class="line">    <span class="keyword">defer</span> &#123;</div><div class="line">        fridgeIsOpen = <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">let</span> result = fridgeContent.<span class="built_in">contains</span>(food)</div><div class="line">    <span class="keyword">return</span> result</div><div class="line">&#125;</div><div class="line">fridgeContains(<span class="string">"banana"</span>)</div><div class="line"><span class="built_in">print</span>(fridgeIsOpen)</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¾‹å­é‡Œæ‰§è¡Œçš„é¡ºåºæ˜¯ï¼Œå…ˆ fridgeIsOpen = trueï¼Œç„¶åæ˜¯å‡½æ•°ä½“æ­£å¸¸çš„æµç¨‹ï¼Œæœ€ååœ¨ return ä¹‹å‰æ‰§è¡Œ fridgeIsOpen = falseã€‚</p>
<h2 id="å‡ ä¸ªç®€å•çš„ä½¿ç”¨åœºæ™¯"><a href="#å‡ ä¸ªç®€å•çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="å‡ ä¸ªç®€å•çš„ä½¿ç”¨åœºæ™¯"></a>å‡ ä¸ªç®€å•çš„ä½¿ç”¨åœºæ™¯</h2><h3 id="try-catch-ç»“æ„"><a href="#try-catch-ç»“æ„" class="headerlink" title="try catch ç»“æ„"></a>try catch ç»“æ„</h3><p>æœ€å…¸å‹çš„åœºæ™¯ï¼Œæˆ‘æƒ³ä¹Ÿæ˜¯ defer è¿™ä¸ªå…³é”®å­—è¯ç”Ÿçš„ä¸»è¦åŸå› å§ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"finally"</span>)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="type">NSError</span>()</div><div class="line">    <span class="built_in">print</span>(<span class="string">"impossible"</span>)</div><div class="line">  &#125; <span class="keyword">catch</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"handle error"</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸ç®¡ do block æ˜¯å¦ throw errorï¼Œæœ‰æ²¡æœ‰ catch åˆ°ï¼Œè¿˜æ˜¯ throw å‡ºå»äº†ï¼Œéƒ½ä¼šä¿è¯åœ¨æ•´ä¸ªå‡½æ•° return å‰æ‰§è¡Œ deferã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œå°±æ˜¯å…ˆ print å‡º â€œhandle errorâ€ å† print å‡º â€œfinallyâ€ã€‚</p>
<p>do block é‡Œä¹Ÿå¯ä»¥å†™ deferï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"finally"</span>)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">throw</span> <span class="type">NSError</span>()</div><div class="line">  <span class="built_in">print</span>(<span class="string">"impossible"</span>)</div><div class="line">&#125; <span class="keyword">catch</span> &#123;</div><div class="line">  <span class="built_in">print</span>(<span class="string">"handle error"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆå®ƒæ‰§è¡Œçš„é¡ºåºå°±ä¼šæ˜¯åœ¨ catch block ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯å…ˆ print å‡º â€œfinallyâ€ å† print å‡º â€œhandle errorâ€ã€‚</p>
<h3 id="æ¸…ç†å·¥ä½œã€å›æ”¶èµ„æº"><a href="#æ¸…ç†å·¥ä½œã€å›æ”¶èµ„æº" class="headerlink" title="æ¸…ç†å·¥ä½œã€å›æ”¶èµ„æº"></a>æ¸…ç†å·¥ä½œã€å›æ”¶èµ„æº</h3><p>è·Ÿ swift æ–‡æ¡£ä¸¾çš„ä¾‹å­ç±»ä¼¼ï¼Œdefer æœ‰ä¸€ä¸ªå¾ˆé€‚åˆçš„ä½¿ç”¨åœºæ™¯å°±æ˜¯ç”¨æ¥åšæ¸…ç†å·¥ä½œã€‚æ–‡ä»¶æ“ä½œå°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å…³é—­æ–‡ä»¶</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</div><div class="line">  <span class="keyword">let</span> fileDescriptor = <span class="keyword">open</span>(url.path, <span class="type">O_EVTONLY</span>)</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    close(fileDescriptor)</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// use fileDescriptor...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±ä¸æ€•å“ªä¸ªåˆ†æ”¯å¿˜äº†å†™ï¼Œæˆ–è€…ä¸­é—´ throw ä¸ª errorï¼Œå¯¼è‡´ fileDescriptor æ²¡æ³•æ­£å¸¸å…³é—­ã€‚è¿˜æœ‰ä¸€äº›ç±»ä¼¼çš„åœºæ™¯ï¼š</p>
<h3 id="dealloc-æ‰‹åŠ¨åˆ†é…çš„ç©ºé—´"><a href="#dealloc-æ‰‹åŠ¨åˆ†é…çš„ç©ºé—´" class="headerlink" title="dealloc æ‰‹åŠ¨åˆ†é…çš„ç©ºé—´"></a>dealloc æ‰‹åŠ¨åˆ†é…çš„ç©ºé—´</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</div><div class="line">  <span class="keyword">let</span> valuePointer = <span class="type">UnsafeMutablePointer</span>&lt;<span class="type">T</span>&gt;.allocate(capacity: <span class="number">1</span>)</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    valuePointer.deallocate(capacity: <span class="number">1</span>)</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// use pointer...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="åŠ -è§£é”ï¼š"><a href="#åŠ -è§£é”ï¼š" class="headerlink" title="åŠ /è§£é”ï¼š"></a>åŠ /è§£é”ï¼š</h3><p>ä¸‹é¢æ˜¯ swift é‡Œç±»ä¼¼ Objective-C çš„ synchronized block çš„ä¸€ç§å†™æ³•ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ä¸ª NSObject ä½œ lockã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</div><div class="line">  objc_sync_enter(lock)</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    objc_sync_exit(lock)</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// do something...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åƒè¿™ç§æˆå¯¹è°ƒç”¨çš„æ–¹æ³•ï¼Œå¯ä»¥ç”¨ defer æŠŠå®ƒä»¬æ”¾åœ¨ä¸€èµ·ï¼Œä¸€ç›®äº†ç„¶ã€‚</p>
<h3 id="è°ƒç”¨-completion-block"><a href="#è°ƒç”¨-completion-block" class="headerlink" title="è°ƒç”¨ completion block"></a>è°ƒç”¨ completion block</h3><p>è¿™æ˜¯ä¸€ä¸ªè®©æˆ‘æ„Ÿè§‰ â€œå¦‚æœå½“æ—¶çŸ¥é“ deferâ€ å°±å¥½äº†çš„åœºæ™¯ï¼Œå°±æ˜¯æœ‰æ—¶å€™ä¸€ä¸ªå‡½æ•°åˆ†æ”¯æ¯”è¾ƒå¤šï¼Œå¯èƒ½æŸä¸ªå°åˆ†æ”¯ return ä¹‹å‰å°±å¿˜äº†è°ƒ completion blockï¼Œç»“æœè—ä¸‹ä¸€ä¸ªä¸æ˜“å‘ç°çš„ bugã€‚ç”¨ defer å°±å¯ä»¥ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªé—®é¢˜äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">(completion: <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    <span class="keyword">self</span>.isLoading = <span class="literal">false</span></div><div class="line">    completion()</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">guard</span> error == <span class="literal">nil</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</div><div class="line">  <span class="comment">// handle success</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ‰æ—¶å€™ completion è¦æ ¹æ®æƒ…å†µä¼ ä¸åŒçš„å‚æ•°ï¼Œè¿™æ—¶ defer å°±ä¸å¥½ä½¿äº†ã€‚ä¸è¿‡å¦‚æœ completion block è¢«å­˜ä¸‹æ¥äº†ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ç”¨å®ƒæ¥ç¡®ä¿æ‰§è¡Œåèƒ½é‡Šæ”¾ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    <span class="keyword">self</span>.completion = <span class="literal">nil</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (succeed) &#123;</div><div class="line">    <span class="keyword">self</span>.completion(.success(result))</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">self</span>.completion(.error(error))</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è°ƒ-super-æ–¹æ³•"><a href="#è°ƒ-super-æ–¹æ³•" class="headerlink" title="è°ƒ super æ–¹æ³•"></a>è°ƒ super æ–¹æ³•</h3><p>æœ‰æ—¶å€™ override ä¸€ä¸ªæ–¹æ³•ï¼Œä¸»è¦ç›®çš„æ˜¯åœ¨ super æ–¹æ³•ä¹‹å‰åšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œæ¯”å¦‚ UICollectionViewLayout çš„ prepare(forCollectionViewUpdates:)ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠŠè°ƒç”¨ super çš„éƒ¨åˆ†æ”¾åœ¨ defer é‡Œï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">override</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    <span class="keyword">super</span>.foo()</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// some preparation before super.foo()...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="ä¸€äº›ç»†èŠ‚"><a href="#ä¸€äº›ç»†èŠ‚" class="headerlink" title="ä¸€äº›ç»†èŠ‚"></a>ä¸€äº›ç»†èŠ‚</h2><h3 id="ä»»æ„-scope-éƒ½å¯ä»¥æœ‰-defer"><a href="#ä»»æ„-scope-éƒ½å¯ä»¥æœ‰-defer" class="headerlink" title="ä»»æ„ scope éƒ½å¯ä»¥æœ‰ defer"></a>ä»»æ„ scope éƒ½å¯ä»¥æœ‰ defer</h3><p>è™½ç„¶å¤§éƒ¨åˆ†çš„ä½¿ç”¨åœºæ™¯æ˜¯åœ¨å‡½æ•°é‡Œï¼Œä¸è¿‡ç†è®ºä¸Šä»»ä½•ä¸€ä¸ª { } ä¹‹é—´éƒ½æ˜¯å¯ä»¥å†™ defer çš„ã€‚æ¯”å¦‚ä¸€ä¸ªæ™®é€šçš„å¾ªç¯ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> sumOfOdd = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>...<span class="number">10</span> &#123;</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Look! It's \(i)"</span>)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span> &#123;</div><div class="line">    <span class="keyword">continue</span></div><div class="line">  &#125;</div><div class="line">  sumOfOdd += i</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>continue æˆ–è€… break éƒ½ä¸ä¼šå¦¨ç¢ defer çš„æ‰§è¡Œã€‚ç”šè‡³ä¸€ä¸ªå¹³ç™½æ— æ•…çš„ closure é‡Œä¹Ÿå¯ä»¥å†™ deferï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"bye!"</span>)</div><div class="line">  &#125;</div><div class="line">  <span class="built_in">print</span>(<span class="string">"hello!"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åªä¸è¿‡è¿™æ ·å°±æ²¡ä»€ä¹ˆæ„ä¹‰äº†</p>
<h3 id="å¿…é¡»æ‰§è¡Œåˆ°-defer-æ‰ä¼šè§¦å‘"><a href="#å¿…é¡»æ‰§è¡Œåˆ°-defer-æ‰ä¼šè§¦å‘" class="headerlink" title="å¿…é¡»æ‰§è¡Œåˆ° defer æ‰ä¼šè§¦å‘"></a>å¿…é¡»æ‰§è¡Œåˆ° defer æ‰ä¼šè§¦å‘</h3><p>å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šä¸€ä¸ª scope é‡Œçš„ defer èƒ½ä¿è¯ä¸€å®šä¼šæ‰§è¡Œå—ï¼Ÿ<br>ç­”æ¡ˆæ˜¯å¦ã€‚ã€‚ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">  <span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="type">NSError</span>()</div><div class="line">    <span class="built_in">print</span>(<span class="string">"impossible"</span>)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"finally"</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">try</span>? foo()</div></pre></td></tr></table></figure>
<p>ä¸ä¼šæ‰§è¡Œ deferï¼Œä¸ä¼š print ä»»ä½•ä¸œè¥¿ã€‚è¿™ä¸ªæ•…äº‹å‘Šè¯‰æˆ‘ä»¬ï¼Œè‡³å°‘è¦æ‰§è¡Œåˆ° defer è¿™ä¸€è¡Œï¼Œå®ƒæ‰ä¿è¯åé¢ä¼šè§¦å‘ã€‚åŒæ ·é“ç†ï¼Œæå‰ return ä¹Ÿæ˜¯ä¸è¡Œçš„ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</div><div class="line">  <span class="keyword">guard</span> <span class="literal">false</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"finally"</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å¤šä¸ª-defer"><a href="#å¤šä¸ª-defer" class="headerlink" title="å¤šä¸ª defer"></a>å¤šä¸ª defer</h3><p>ä¸€ä¸ª scope å¯ä»¥æœ‰å¤šä¸ª deferï¼Œé¡ºåºæ˜¯åƒæ ˆä¸€æ ·å€’ç€æ‰§è¡Œçš„ï¼šæ¯é‡åˆ°ä¸€ä¸ª defer å°±åƒå‹è¿›ä¸€ä¸ªæ ˆé‡Œï¼Œåˆ° scope ç»“æŸçš„æ—¶å€™ï¼Œåè¿›æ ˆçš„å…ˆæ‰§è¡Œã€‚å¦‚ä¸‹é¢çš„ä»£ç ï¼Œä¼šæŒ‰ 1ã€2ã€3ã€4ã€5ã€6 çš„é¡ºåº print å‡ºæ¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</div><div class="line">  <span class="built_in">print</span>(<span class="string">"1"</span>)</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"6"</span>)</div><div class="line">  &#125;</div><div class="line">  <span class="built_in">print</span>(<span class="string">"2"</span>)</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"5"</span>)</div><div class="line">  &#125;</div><div class="line">  <span class="built_in">print</span>(<span class="string">"3"</span>)</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"4"</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯æˆ‘å¼ºçƒˆå»ºè®®ä¸è¦è¿™ä¹ˆå†™ã€‚æˆ‘æ˜¯å»ºè®®ä¸€ä¸ª scope é‡Œä¸è¦æœ‰å¤šä¸ª deferï¼Œæ„Ÿè§‰é™¤äº†è®©è¯»ä»£ç çš„äººæ„Ÿè§‰æ··ä¹±ä¹‹å¤–æ²¡æœ‰ä»€ä¹ˆå¥½å¤„ã€‚</p>
<h3 id="defer-çš„ä½œç”¨åŸŸï¼ˆé‡è¦ï¼‰"><a href="#defer-çš„ä½œç”¨åŸŸï¼ˆé‡è¦ï¼‰" class="headerlink" title="defer çš„ä½œç”¨åŸŸï¼ˆé‡è¦ï¼‰"></a>defer çš„ä½œç”¨åŸŸï¼ˆé‡è¦ï¼‰</h3><p><strong>æ³¨æ„ä½œç”¨åŸŸï¼Œå…¶æ¬¡æ˜¯è°ƒç”¨é¡ºåºâ€”â€”å³ä¸€ä¸ªä½œç”¨åŸŸç»“æŸï¼Œè¯¥ä½œç”¨åŸŸä¸­çš„deferè¯­å¥è‡ªä¸‹è€Œä¸Šè°ƒç”¨ã€‚</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">lookforSomething</span><span class="params">(<span class="number">_</span> name: String)</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">  <span class="comment">// è¿™é‡Œæ˜¯ä½œç”¨åŸŸ1 æ•´ä¸ªå‡½æ•°ä½œç”¨åŸŸ</span></div><div class="line"></div><div class="line">  <span class="built_in">print</span>(<span class="string">"1-1"</span>)</div><div class="line">  <span class="keyword">if</span> name == <span class="string">""</span> &#123;</div><div class="line">    <span class="comment">// è¿™é‡Œæ˜¯ä½œç”¨åŸŸ2 ifçš„ä½œç”¨åŸŸ</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"2-1"</span>)</div><div class="line">    <span class="keyword">defer</span> &#123;</div><div class="line">      <span class="built_in">print</span>(<span class="string">"2-2"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"2-3"</span>)</div><div class="line">  &#125;</div><div class="line">  <span class="built_in">print</span>(<span class="string">"1-2"</span>)</div><div class="line">  <span class="keyword">defer</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"1-3"</span>)</div><div class="line">  &#125;</div><div class="line">  <span class="built_in">print</span>(<span class="string">"1-4"</span>)</div><div class="line"></div><div class="line">  <span class="keyword">if</span> name == <span class="string">"hello"</span> &#123;</div><div class="line">    <span class="comment">// ä½œç”¨åŸŸ3</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"3-1"</span>)</div><div class="line">    <span class="keyword">defer</span> &#123;</div><div class="line">      <span class="built_in">print</span>(<span class="string">"3-2"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"3-3"</span>)</div><div class="line">    <span class="keyword">defer</span> &#123;</div><div class="line">      <span class="built_in">print</span>(<span class="string">"3-4"</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// æœ‰å…´è¶£çš„çœ‹çœ‹ä¾æ¬¡è¾“å‡ºä»€ä¹ˆ</span></div><div class="line"><span class="comment">// try! lookforSomething("")</span></div><div class="line"><span class="comment">// è°ƒå‡º debug Area å¿«æ·é”® shift+ command + y</span></div><div class="line"><span class="keyword">try</span>! lookforSomething(<span class="string">"hello"</span>)</div></pre></td></tr></table></figure>
<p>ä¹‹å‰æœ‰ä¸ªåœ°æ–¹æè¿°å¯èƒ½ä¸å‡†ç¡®ï¼Œå¹¶ä¸æ˜¯å‡½æ•°ç»“æŸæ—¶å¼€å§‹æ‰§è¡Œ defer æ ˆæ¨å‡ºæ“ä½œï¼Œè€Œæ˜¯æ¯å½“ä¸€ä¸ªä½œç”¨åŸŸç»“æŸå°±è¿›è¡Œè¯¥ä½œç”¨åŸŸ defer æ‰§è¡Œã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://link.jianshu.com/?t=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F24045895%2Fwhat-is-the-swift-equivalent-to-objective-cs-synchronized" target="_blank" rel="external">What is the Swift equivalent to Objective-Câ€™s â€œ@synchronizedâ€?</a></p>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/07/ä½¿ç”¨fastlaneè¿›è¡Œè‡ªåŠ¨åŒ–æ„å»º/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/07/ä½¿ç”¨fastlaneè¿›è¡Œè‡ªåŠ¨åŒ–æ„å»º/" itemprop="url">ä½¿ç”¨fastlaneè¿›è¡Œè‡ªåŠ¨åŒ–æ„å»º</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-07T10:50:12+08:00">
                2018-03-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOSå¼€å‘/" itemprop="url" rel="index">
                    <span itemprop="name">iOSå¼€å‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>fastlaneä½œä¸ºæŒç»­é›†æˆå·¥å…·ï¼Œä¸€æ¬¡é…ç½®ï¼Œä¹‹åä½¿ç”¨ååˆ†æ–¹ä¾¿ï¼Œæå¤§çš„æé«˜å·¥ä½œæ•ˆç‡ï¼ŒæŠŠå¼€å‘è€…ä»ç¹çæ— èŠçš„å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ï¼Œå¼ºçƒˆæ¨èå¤§å®¶ä½¿ç”¨</strong></p>
<h4 id="æ›´æ–°ruby"><a href="#æ›´æ–°ruby" class="headerlink" title="æ›´æ–°ruby"></a>æ›´æ–°ruby</h4><p>é¦–å…ˆï¼Œå®‰è£…æˆ–æ›´æ–°rvm</p>
<p>æœ‰å¯èƒ½éœ€è¦æ›´æ–°rubyæºï¼ˆå›½å¤–é•œåƒæœåŠ¡å™¨è®¿é—®èµ·æ¥æœ‰äº›åƒåŠ›ï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ gem sources</div><div class="line">*** CURRENT SOURCES ***</div><div class="line"></div><div class="line">https://gems.ruby-china.org/</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨rvmå·¥å…·ç®¡ç†rubyç‰ˆæœ¬ï¼Œå…¶å®Homebrewä¹Ÿå¯ä»¥å®‰è£…rubyï¼ˆbrew install rubyï¼‰ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…Homebrewï¼Œé‚£ä¹ˆå…·ä½“çš„å®‰è£…æ–¹æ³•è¯·è‡ªè¡Œç™¾åº¦ï¼ˆæ‚è„¸ï¼‰ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#å®‰è£…RVMå·¥å…·</span></div><div class="line">curl -L get.rvm.io | bash -s stable</div><div class="line"></div><div class="line"><span class="comment">#åˆ—å‡ºå¯å®‰è£…çš„rubyç‰ˆæœ¬ï¼ˆæœ‰åŸå§‹çš„rubyä¹Ÿæœ‰å…¶ä»–ç‰ˆæœ¬çš„ç‰ˆæœ¬ï¼‰</span></div><div class="line">rvm list known</div><div class="line"></div><div class="line"><span class="comment">#æ ¹æ®åˆšæ‰åˆ—å‡ºçš„rubyç‰ˆæœ¬ï¼Œå®‰è£…ä¸€ä¸ªrubyç‰ˆæœ¬</span></div><div class="line">rvm install ruby-xxxxxï¼ˆxxxä¸ºç‰ˆæœ¬å·ï¼‰</div></pre></td></tr></table></figure>
<h4 id="å®‰è£…fastlane"><a href="#å®‰è£…fastlane" class="headerlink" title="å®‰è£…fastlane"></a>å®‰è£…fastlane</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># å®‰è£…fastlaneï¼ŒåŠ ä¸åŠ sudoå–å†³äºç»ˆç«¯æ˜¯å¦æœ‰æƒé™æ‰§è¡Œè¯¥å‘½ä»¤</span></div><div class="line">[sudo] gem install -n /usr/<span class="built_in">local</span>/bin fastlane</div></pre></td></tr></table></figure>
<p>å®‰è£…å®Œæ¯•ååˆ°å·¥ç¨‹ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> ~/projectpath</div></pre></td></tr></table></figure>
<p>æ‰§è¡Œfastlaneåˆå§‹åŒ–</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fastlane init</div></pre></td></tr></table></figure>
<h4 id="é…ç½®fastlaneï¼ˆé‡è¦ï¼‰"><a href="#é…ç½®fastlaneï¼ˆé‡è¦ï¼‰" class="headerlink" title="é…ç½®fastlaneï¼ˆé‡è¦ï¼‰"></a>é…ç½®fastlaneï¼ˆé‡è¦ï¼‰</h4><p>å…¶å®åœ¨Xcodeè‡ªåŠ¨ç®¡ç†è¯ä¹¦ä¹‹åï¼Œfastlaneçš„é…ç½®å·²ç»æå¤§çš„ç®€åŒ–ï¼Œå½“Xcodeä¸­å‹¾é€‰äº†è‡ªåŠ¨ç®¡ç†è¯ä¹¦ï¼Œé‚£ä¹ˆFastfileä¸­å°±å¯ä»¥ç›´æ¥è°ƒç”¨gymè¿›è¡Œæ‰“åŒ…ï¼Œè€Œä¸éœ€è¦å†è°ƒç”¨sighè®¾ç½®è¯ä¹¦ä¿¡æ¯ã€‚</p>
<p>å¦‚æœä½ çš„é¡¹ç›®é…ç½®æ¯”è¾ƒç®€å•ï¼Œé‚£ä¹ˆåªéœ€è¦åœ¨Appfileä¸­è®¾ç½®å¥½åŸºæœ¬ä¿¡æ¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">app_identifier(<span class="string">"com.xxxx.xxxxx"</span>)</div><div class="line">apple_id(<span class="string">"xxxxxxxxx@xxx.com"</span>)</div><div class="line">team_id(<span class="string">"xxxxxxxx"</span>)</div></pre></td></tr></table></figure>
<p>ç„¶ååœ¨Fastfileä¸­å†™ä¸Šå‡ è¡Œä»£ç ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">lane :to_pgy <span class="keyword">do</span></div><div class="line">  build_app(</div><div class="line">    export_method: <span class="string">"ad-hoc"</span>,</div><div class="line">    output_directory: <span class="string">"./ipa"</span>,</div><div class="line">  )</div><div class="line">  firim(firim_api_token: <span class="string">"xxxxxxxxx"</span>)</div><div class="line">end</div></pre></td></tr></table></figure>
<p>å°±èƒ½è‡ªåŠ¨æ‰“ä¸€ä¸ªac-hocç­¾åçš„åŒ…å¹¶è‡ªåŠ¨ä¸Šä¼ åˆ°firimï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•å’Œä»»æ€§ã€‚ä¸è¿‡ä¸€èˆ¬çš„å·¥ç¨‹é…ç½®éƒ½ä¸ä¼šè¿™ä¹ˆç®€å•ï¼Œæ¯”å¦‚éœ€è¦å…ˆæ‰§è¡Œpodæˆ–è€…carthageçš„ç›¸å…³å‘½ä»¤ï¼Œæœ‰äº›é¡¹ç›®éœ€è¦å…³é—­bitcodeç­‰ç­‰ï¼Œä¸å°½ç›¸åŒã€‚</p>
<h4 id="æ‰§è¡Œä¸­æŠ¥é”™"><a href="#æ‰§è¡Œä¸­æŠ¥é”™" class="headerlink" title="æ‰§è¡Œä¸­æŠ¥é”™"></a>æ‰§è¡Œä¸­æŠ¥é”™</h4><p>å¤„ç†å®Œé…ç½®æ–‡ä»¶ï¼Œçœ¼çœ‹å°±è¦å¤§åŠŸå‘Šæˆï¼Œæ½‡æ´’çš„åœ¨ç»ˆç«¯æ•²ä¸‹ fastlane to_firimï¼ŒæŒ‰ä¸‹å›è½¦é”®ï¼Œ ç„¶åå»æ³¡æ¯å’–å•¡ï¼Œå‡†å¤‡å›æ¥äº«å—æˆåŠŸçš„å–œæ‚¦ã€‚</p>
<p>æ²¡æƒ³åˆ°å›æ¥æ—¶å´çœ‹åˆ°å‘½ä»¤è¡Œé²œçº¢çš„å­—ä½“æç¤ºerror</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">xxx, Bundle only contains bitcode-marker, xxx</div><div class="line">Exit status: 70</div></pre></td></tr></table></figure>
<p>å†…å¿ƒç¬é—´å´©æºƒï¼Œè¯´å¥½çš„ä¸€é”®æ‰“åŒ…å‘¢ï¼Ÿå›è¿‡ç¥æ¥ä¸€çœ‹ï¼Œè¿™ä¸æ˜¯bitcodeçš„é”™è¯¯å—ï¼Œèµ¶ç´§å»å·¥ç¨‹é…ç½®çœ‹ä¸€ä¸‹ï¼Œbitcodeå·²ç»æ˜¯NOäº†å•Šï¼Œå›æƒ³å“ªé‡Œä¸å¯¹ï¼ŒXcodeæ›´æ–°ä¹‹åï¼Œæˆ‘ä»¬åº”ç”¨ä¸ä½†éœ€è¦åœ¨ç¼–è¯‘ä¹‹å‰å°†build settingä¸­bitcodeé€‰é¡¹è®¾ç½®ä¸ºNOï¼Œè¿˜è¦åœ¨å¯¼å‡ºçš„æ—¶å€™æŠŠrebuild from bitcodeé€‰é¡¹å–æ¶ˆå‹¾é€‰ã€‚é‚£ä¹ˆè¿™ä¸ªæ“ä½œå¦‚ä½•ååº”åˆ°fastlaneå‘¢ï¼Ÿä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯æ˜¯è´¹äº†ä¸€ç•ªåŠŸå¤«ï¼Œæœ€åæŸ¥åˆ°è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">1ã€Enable Bitcode -&gt; No</div><div class="line"></div><div class="line">2ã€Project -&gt; Targets -&gt; Build Settings -&gt; Custom Compiler Flags -&gt; Other C Flags -&gt; &quot;-fembed-bitcode&quot;</div><div class="line"></div><div class="line">å¦‚æœé™æ€åº“çš„å·¥ç¨‹æœ‰ -Werrorçš„é€‰é¡¹ï¼Œéœ€è¦å»æ‰ã€‚åº”ä¸ºåœ¨ç¼–è¯‘çš„æ—¶å€™æœ‰ä¸€ä¸ªè­¦å‘Šã€‚ clang: warning: argument unused during compilation: &apos;-fembed-bitcode-marker&apos;, å¦‚æœä¸å»æ‰å°±ä¼šæŠ¥é”™</div><div class="line"></div><div class="line">é€šè¿‡gymæ‰“åŒ…çš„æ—¶å€™ï¼Œä¹Ÿè¦æŠŠexport_optionsä¸­compileBitcodeç½®ä¸ºfalse</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Could not find action, lane or variable <span class="string">'firim'</span></div></pre></td></tr></table></figure>
<p>é‡åˆ°è¿™ä¸ªé”™è¯¯ä¸éš¾è§£å†³ï¼Œé¦–å…ˆæŸ¥çœ‹æ˜¯å¦å·²ç»å®‰è£…äº†firimçš„æ’ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">fastlane add_plugin firim</div><div class="line"><span class="comment"># å¦‚æœä½ ä½¿ç”¨çš„æ˜¯è’²å…¬è‹±ï¼Œé‚£ä¹ˆéœ€è¦å®‰è£…è’²å…¬è‹±çš„æ’ä»¶ï¼Œå®˜æ–¹è¯´æ˜ï¼šhttps://www.pgyer.com/doc/view/fastlane</span></div><div class="line">fastlane add_plugin pgyer</div></pre></td></tr></table></figure>
<p>ç„¶åæŸ¥çœ‹é¡¹ç›®é‡ŒGemfileæ˜¯å¦å¼•ç”¨äº†firimï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem <span class="string">"firim"</span></div></pre></td></tr></table></figure>
<p>å‘ç‚¹å°±è¯´é“è¿™é‡Œï¼Œä¹‹åå¦‚æœå†é‡åˆ°ï¼Œå†æ¥è¡¥å……ã€‚</p>
<h4 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h4><p>ç”±äºæŠ€æœ¯æœåŠ¡äºä¸šåŠ¡ï¼Œæœ¬æ–‡ä»‹ç»çš„ä½¿ç”¨æ–¹å¼å¯èƒ½ä¸èƒ½å®Œå…¨è¦†ç›–å¤§å®¶çš„éœ€æ±‚ï¼Œå¦‚æœå¤§å®¶åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å¤šç•™æ„æŠ¥é”™ä¿¡æ¯ï¼Œæˆ–è€…æŸ¥é˜…æ–‡æ¡£ã€å‘ç¤¾åŒºæ±‚åŠ©ã€‚å¸Œæœ›èƒ½å¤Ÿå¸®åˆ°å¤§å®¶ (<em>^__^</em>)</p>
<p>fastlaneé…ç½®ååˆ†ä¸°å¯Œï¼Œä¹Ÿç»™å¤§å®¶ä½¿ç”¨æ—¶å¸¦æ¥ä¸€äº›å¹¸ç¦çš„çƒ¦æ¼ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶è¿˜æ˜¯è¦å¤šçœ‹çœ‹æ–‡æ¡£ï¼Œæ‰èƒ½å°‘èµ°å¼¯è·¯ï¼Œå°½å¿«é…ç½®æˆåŠŸã€‚</p>
<p>æœ¬æ–‡åªæ˜¯ç®€å•ä»‹ç»äº†fastlaneçš„ç”¨å¤„ã€ç”¨æ³•ï¼Œä»¥åŠä¸€äº›é‡‡å‘ç»å†ã€‚å…·ä½“ä½¿ç”¨å¯ä»¥åˆ°ä¸‹é¢ä¼ é€é—¨ğŸ‘‡ï¼Œèƒ½æ‰¾åˆ°ä¸€äº›å®ä¾‹ä»£ç ã€‚</p>
<h4 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h4><p><a href="https://www.jianshu.com/p/ae5b492b5338" target="_blank" rel="external">iOS Appè‡ªåŠ¨åŒ–æ‰“åŒ…å‘å¸ƒï¼ˆJenkins + Fastlaneï¼‰</a><br><a href="https://zhuanlan.zhihu.com/p/23180455" target="_blank" rel="external">å°å›¢é˜Ÿçš„è‡ªåŠ¨åŒ–å‘å¸ƒï¼Fastlaneå¸¦æ¥çš„å…¨è‡ªåŠ¨åŒ–éƒ¨ç½²</a><br><a href="https://docs.fastlane.tools" target="_blank" rel="external">Fastlane å®˜æ–¹æ–‡æ¡£</a></p>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/06/è½¯ä»¶å¼€å‘ä¹‹è®¾è®¡æ¨¡å¼/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/06/è½¯ä»¶å¼€å‘ä¹‹è®¾è®¡æ¨¡å¼/" itemprop="url">è½¯ä»¶å¼€å‘ä¹‹è®¾è®¡æ¨¡å¼</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-06T16:01:21+08:00">
                2018-03-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/è½¯ä»¶å¼€å‘/" itemprop="url" rel="index">
                    <span itemprop="name">è½¯ä»¶å¼€å‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰ä»£è¡¨äº†æœ€ä½³çš„å®è·µï¼Œé€šå¸¸è¢«æœ‰ç»éªŒçš„é¢å‘å¯¹è±¡çš„è½¯ä»¶å¼€å‘äººå‘˜æ‰€é‡‡ç”¨ã€‚è®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚è¿™äº›è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„ã€‚ç†è§£äº†è®¾è®¡æ¨¡å¼çš„åŸç†å’Œå…¶ä¸­æ‰€è•´å«çš„å¤§æ™ºæ…§åå¯ä»¥å¸®åŠ©æˆ‘ä»¬å†™å‡ºç»“æ„æ›´åˆç†ã€é£æ ¼æ›´ä¼˜é›…ã€æ›´å®¹æ˜“å¤ç”¨çš„ä»£ç ã€‚</p>
<h4 id="è®¾è®¡æ¨¡å¼çš„åŸºæœ¬åŸåˆ™"><a href="#è®¾è®¡æ¨¡å¼çš„åŸºæœ¬åŸåˆ™" class="headerlink" title="è®¾è®¡æ¨¡å¼çš„åŸºæœ¬åŸåˆ™"></a>è®¾è®¡æ¨¡å¼çš„åŸºæœ¬åŸåˆ™</h4><p>è®¾è®¡æ¨¡å¼çš„åŸºæœ¬åŸåˆ™éå¸¸é‡è¦ï¼Œåªè¦çœŸæ­£æ·±å…¥åœ°ç†è§£äº†è®¾è®¡åŸåˆ™ï¼Œå¾ˆå¤šè®¾è®¡æ¨¡å¼å…¶å®å°±æ˜¯åŸåˆ™çš„åº”ç”¨è€Œå·²ï¼Œæˆ–è®¸åœ¨ä¸çŸ¥ä¸è§‰ä¸­å°±åœ¨ä½¿ç”¨è®¾è®¡æ¨¡å¼äº†ï¼š</p>
<ul>
<li>å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ï¼Œå°±ä¸€ä¸ªç±»è€Œè¨€ï¼Œåº”è¯¥ä»…æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› ã€‚</li>
<li>å¼€æ”¾-å°é—­åŸåˆ™ï¼ˆOCPï¼‰ï¼Œæ˜¯è¯´è½¯ä»¶å®ä½“ï¼ˆç±»ã€æ¨¡å—ã€å‡½æ•°ç­‰ç­‰ï¼‰åº”è¯¥å¯ä»¥æ‹“å±•ï¼Œä½†æ˜¯ä¸å¯ä¿®æ”¹ã€‚</li>
<li>ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDIPï¼‰ï¼ŒA. é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼Œä¸¤ä¸ªéƒ½åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚B. æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚</li>
<li>é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLSPï¼‰ï¼Œå­ç±»å‹å¿…é¡»èƒ½å¤Ÿæ›¿æ¢æ‰å®ƒä»¬çš„çˆ¶ç±»å‹ã€‚</li>
<li>è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLoDï¼‰ï¼Œå¦‚æœä¸¤ä¸ªç±»ä¸å¿…å½¼æ­¤ç›´æ¥é€šä¿¡ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªç±»å°±ä¸åº”å½“å‘ç”Ÿç›´æ¥çš„ç›¸äº’ä½œç”¨ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªç±»éœ€è¦è°ƒç”¨å¦ä¸€ä¸ªç±»çš„æŸä¸€ä¸ªæ–¹æ³•çš„è¯ï¼Œå¯ä»¥é€šè¿‡ç¬¬ä¸‰è€…è½¬å‘è¿™ä¸ªè°ƒç”¨ã€‚</li>
<li>åˆæˆ/èšåˆå¤ç”¨åŸåˆ™ï¼ˆCARPï¼‰ï¼Œå°½é‡ä½¿ç”¨åˆæˆ/èšåˆï¼Œå°½é‡ä¸è¦ä½¿ç”¨ç±»ç»§æ‰¿ã€‚</li>
</ul>
<p>æ³¨ï¼šSRP-Single Responsibility Principleï¼ŒOCP-Open-Closed Principleï¼ŒDIP-Dependency Inversion Principleï¼ŒLSP-Liskov Subsitution Principleï¼ŒLoD-Law of Demeterï¼ŒCARP-Composition/Aggregation Principleã€‚</p>
<h4 id="å¸¸ç”¨çš„-23-ç§è®¾è®¡æ¨¡å¼"><a href="#å¸¸ç”¨çš„-23-ç§è®¾è®¡æ¨¡å¼" class="headerlink" title="å¸¸ç”¨çš„ 23 ç§è®¾è®¡æ¨¡å¼"></a>å¸¸ç”¨çš„ 23 ç§è®¾è®¡æ¨¡å¼</h4><p>ä¸ç®¡æ˜¯ .NET ä¸­çš„ C# è¯­è¨€ï¼Œè¿˜æ˜¯ Javaã€VB.NETã€C++ æˆ– Objective-C è¯­è¨€ï¼Œé¢å‘å¯¹è±¡è¯­è¨€åœ¨è®¾è®¡æ¨¡å¼çš„å±‚é¢ä¸Šéƒ½æ˜¯ç›¸é€šçš„ï¼Œåªä¸è¿‡åœ¨è®¾è®¡æ¨¡å¼çš„å…·ä½“å®ç°ä¸Šè¯­æ³•ç¨æœ‰å·®å¼‚ç½¢äº†ï¼š</p>
<ol>
<li>ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰ï¼Œå®ƒå®šä¹‰äº†ç®—æ³•å®¶æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©å®ƒä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ï¼Œä¸ä¼šå½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚</li>
<li>è£…é¥°æ¨¡å¼ï¼ˆDecoratorï¼‰ï¼ŒåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œå°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°æ¨¡å¼æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚</li>
<li>ä»£ç†æ¨¡å¼ï¼ˆProxyï¼‰ï¼Œä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</li>
<li>å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Methodï¼‰ï¼Œå®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚å·¥å‚æ–¹æ³•ä½¿ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚</li>
<li>åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰ï¼Œç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</li>
<li>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Methodï¼‰ï¼Œå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚</li>
<li>å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰ï¼Œä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œæ­¤æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚</li>
<li>å»ºé€ è€…æ¨¡å¼ï¼ˆBuilderï¼‰ï¼Œå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰ï¼Œå®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è¿™ä¸ªä¸»é¢˜å¯¹è±¡åœ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚</li>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factoryï¼‰ï¼Œæä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚</li>
<li>çŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„å†…åœ¨çŠ¶æ€æ”¹å˜æ—¶å…è®¸æ”¹å˜å…¶è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹èµ·æ¥åƒæ˜¯æ”¹å˜äº†å…¶ç±»ã€‚</li>
<li>é€‚é…å™¨æ¨¡å¼ï¼ˆAdapterï¼‰ï¼Œå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ã€‚Adapter æ¨¡å¼ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</li>
<li>å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMementoï¼‰ï¼Œåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·ä»¥åå°±å¯å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚</li>
<li>ç»„åˆæ¨¡å¼ï¼ˆCompositeï¼‰ï¼Œå°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€˜éƒ¨åˆ†-æ•´ä½“â€™çš„å±‚æ¬¡ç»“æ„ã€‚ç»„åˆæ¨¡å¼ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</li>
<li>è¿­ä»£å™¨æ¨¡å¼ï¼ˆIteratorï¼‰ï¼Œæä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚</li>
<li>å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰ï¼Œä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚</li>
<li>æ¡¥æ¥æ¨¡å¼ï¼ˆBridgeï¼‰ï¼Œå°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚</li>
<li>å‘½ä»¤æ¨¡å¼ï¼ˆCommandï¼‰ï¼Œå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿ä½ å¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼›å¯¹è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯æ’¤é”€çš„æ“ä½œã€‚</li>
<li>èŒè´£é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰ï¼Œä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™ä¸ªå¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚</li>
<li>ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediatorï¼‰ï¼Œç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚ä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚</li>
<li>äº«å…ƒæ¨¡å¼ï¼ˆFlyweightï¼‰ï¼Œè¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚</li>
<li>è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreterï¼‰ï¼Œç»™å®šä¸€ä¸ªè¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¿™ä¸ªè§£é‡Šå™¨ä½¿ç”¨è¯¥è¡¨ç¤ºæ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚</li>
<li>è®¿é—®è€…æ¨¡å¼ï¼ˆVisitorï¼‰ï¼Œè¡¨ç¤ºä¸€ä¸ªä½œç”¨äºæŸå¯¹è±¡ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œã€‚å®ƒä½¿ä½ å¯ä»¥åœ¨ä¸æ”¹å˜å„å…ƒç´ çš„ç±»çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œã€‚</li>
</ol>
<p><a href="https://juejin.im/post/5aaa2943f265da239c7b15c4" target="_blank" rel="external">23ä¸ªç»å…¸è®¾è®¡æ¨¡å¼çš„Swiftå®ç°</a></p>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/06/Swift-å…³é”®å­—ï¼ˆtypealiasã€associatedtypeï¼‰/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/06/Swift-å…³é”®å­—ï¼ˆtypealiasã€associatedtypeï¼‰/" itemprop="url">Swift - å…³é”®å­—ï¼ˆtypealiasã€associatedtypeï¼‰</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-06T09:38:38+08:00">
                2018-03-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOSå¼€å‘/" itemprop="url" rel="index">
                    <span itemprop="name">iOSå¼€å‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="typealias-ç±»å‹åˆ«å"><a href="#typealias-ç±»å‹åˆ«å" class="headerlink" title="typealias ç±»å‹åˆ«å"></a>typealias ç±»å‹åˆ«å</h4><p><strong>typealias æ˜¯ç”¨æ¥ä¸ºå·²ç»å­˜åœ¨çš„ç±»å‹é‡æ–°å®šä¹‰åå­—çš„ï¼Œé€šè¿‡å‘½åï¼Œå¯ä»¥ä½¿ä»£ç å˜å¾—æ›´åŠ æ¸…æ™°ã€‚</strong>ä½¿ç”¨çš„è¯­æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨ typealias å…³é”®å­—åƒä½¿ç”¨æ™®é€šçš„èµ‹å€¼è¯­å¥ä¸€æ ·ï¼Œå¯ä»¥å°†æŸä¸ªå·²ç»å­˜åœ¨çš„ç±»å‹èµ‹å€¼ä¸ºæ–°çš„åå­—ã€‚æ¯”å¦‚åœ¨è®¡ç®—äºŒç»´å¹³é¢ä¸Šçš„è·ç¦»å’Œä½ç½®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ Double æ¥è¡¨ç¤ºè·ç¦»ï¼Œç”¨ CGPoint æ¥è¡¨ç¤ºä½ç½®:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">distance</span><span class="params">(<span class="number">_</span> point: CGPoint, <span class="number">_</span> anotherPoint: CGPoint)</span></span> -&gt; <span class="type">Double</span> &#123;</div><div class="line">    <span class="keyword">let</span> dx = <span class="type">Double</span>(anotherPoint.x - point.x)</div><div class="line">    <span class="keyword">let</span> dy = <span class="type">Double</span>(anotherPoint.y - point.y)</div><div class="line">    <span class="keyword">return</span> sqrt(dx * dx + dy * dy)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> origin = <span class="type">CGPoint</span>(x: <span class="number">3</span>, y: <span class="number">0</span>)</div><div class="line"><span class="keyword">let</span> point = <span class="type">CGPoint</span>(x: <span class="number">4</span>, y: <span class="number">0</span>)</div><div class="line"></div><div class="line"><span class="keyword">let</span> d = <span class="built_in">distance</span>(origin, point)</div></pre></td></tr></table></figure>
<p>è™½ç„¶åœ¨æ•°å­¦ä¸Šå’Œæœ€åçš„ç¨‹åºè¿è¡Œä¸Šéƒ½æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯é˜…è¯»å’Œç»´æŠ¤çš„æ—¶å€™æ€»æ˜¯è§‰å¾—æœ‰å“ªé‡Œä¸å¯¹ã€‚ å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å°†æ•°å­¦æŠ½è±¡å’Œå®é™…é—®é¢˜ç»“åˆèµ·æ¥ï¼Œä½¿å¾—åœ¨é˜…è¯»ä»£ç æ—¶æˆ‘ä»¬è¿˜éœ€è¦åœ¨å¤§è„‘ä¸­è¿›è¡Œä¸€æ¬¡é¢å¤–çš„è½¬æ¢: CGPoint ä»£è¡¨ä¸€ä¸ªç‚¹ï¼Œè€Œè¿™ä¸ªç‚¹å°±æ˜¯æˆ‘ä»¬åœ¨å®šä¹‰çš„åæ ‡ç³»é‡Œçš„ä½ç½®; Double æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå®ƒä»£è¡¨ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ typealiasï¼Œå°±å¯ä»¥å°†è¿™ç§è½¬æ¢ç›´æ¥å†™åœ¨ä»£ç é‡Œï¼Œä»è€Œå‡è½»é˜…è¯»å’Œç»´æŠ¤çš„è´Ÿæ‹…:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">distance</span><span class="params">(<span class="number">_</span> point: CGPoint, <span class="number">_</span> anotherPoint: CGPoint)</span></span> -&gt; <span class="type">Double</span> &#123;</div><div class="line">    <span class="keyword">let</span> dx = <span class="type">Distance</span>(anotherPoint.x - point.x)</div><div class="line">    <span class="keyword">let</span> dy = <span class="type">Distance</span>(anotherPoint.y - point.y)</div><div class="line">    <span class="keyword">return</span> sqrt(dx * dx + dy * dy)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> origin = <span class="type">Location</span>(x: <span class="number">3</span>, y: <span class="number">0</span>)</div><div class="line"><span class="keyword">let</span> point = <span class="type">Location</span>(x: <span class="number">4</span>, y: <span class="number">0</span>)</div><div class="line"></div><div class="line"><span class="keyword">let</span> d = <span class="built_in">distance</span>(origin, point)</div></pre></td></tr></table></figure>
<p>åŒæ ·çš„ä»£ç ï¼Œåœ¨ typealias çš„å¸®åŠ©ä¸‹ï¼Œè¯»èµ·æ¥å°±è½»æ¾å¤šäº†ã€‚å¯èƒ½å•å•è¿™ä¸ªç®€å•ä¾‹å­ä¸ä¼šæœ‰ç‰¹åˆ«å¤šçš„ä½“ä¼šï¼Œä½†æ˜¯å½“é‡åˆ°æ›´å¤æ‚çš„å®é™…é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸å†å…³å¿ƒå¹¶å»æ€è€ƒè‡ªå·±ä»£ç é‡Œé‚£äº›æˆå †çš„Intæˆ–è€…Stringä¹‹ç±»çš„åŸºæœ¬ç±»å‹åˆ°åº•ä»£è¡¨çš„æ˜¯ä»€ä¹ˆä¸œè¥¿äº†ï¼Œè¿™æ ·åº”è¯¥èƒ½çœä¸‹ä¸å°‘è„‘ç»†èƒã€‚<strong>æ³¨æ„ï¼šå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå½“ä½¿ç”¨çš„é—­åŒ…çš„æ—¶å€™ï¼Œä¼šç»å¸¸ä½¿ç”¨typealiasã€‚</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typealias</span> <span class="type">Success</span> = (<span class="number">_</span> data: <span class="type">String</span>) -&gt; <span class="type">Void</span></div><div class="line"><span class="keyword">typealias</span> <span class="type">Failure</span> = (<span class="number">_</span> error: <span class="type">String</span>) -&gt; <span class="type">Void</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">request</span><span class="params">(<span class="number">_</span> url: String, success: Success, failure: Failure)</span></span> &#123;</div><div class="line">    <span class="comment">// do request here ....</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="typealiasä¸æ³›å‹"><a href="#typealiasä¸æ³›å‹" class="headerlink" title="typealiasä¸æ³›å‹"></a>typealiasä¸æ³›å‹</h5><p><strong>typealias æ˜¯å•ä¸€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¿…é¡»æŒ‡å®šå°†æŸä¸ªç‰¹å®šçš„ç±»å‹é€šè¿‡ typealias èµ‹å€¼ä¸ºæ–°åå­—ï¼Œè€Œä¸èƒ½å°†æ•´ä¸ªæ³›å‹ç±»å‹è¿›è¡Œé‡å‘½åã€‚</strong>ä¸‹é¢è¿™æ ·çš„å‘½åéƒ½æ˜¯æ— æ³•é€šè¿‡ç¼–è¯‘çš„:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&lt;<span class="title">T</span>&gt; </span>&#123;&#125;</div><div class="line"><span class="keyword">typealias</span> <span class="type">Woker</span> = <span class="type">Person</span></div><div class="line"><span class="keyword">typealias</span> <span class="type">Worker</span> = <span class="type">Person</span>&lt;<span class="type">T</span>&gt;</div></pre></td></tr></table></figure>
<p>ä¸è¿‡å¦‚æœæˆ‘ä»¬åœ¨åˆ«åä¸­ä¹Ÿå¼•å…¥æ³›å‹ï¼Œæ˜¯å¯ä»¥è¿›è¡Œå¯¹åº”çš„</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&lt;<span class="title">T</span>&gt; </span>&#123;&#125;</div><div class="line"><span class="keyword">typealias</span> <span class="type">Woker</span> = <span class="type">Person</span></div><div class="line"><span class="keyword">typealias</span> <span class="type">Worker</span>&lt;<span class="type">T</span>&gt; = <span class="type">Person</span>&lt;<span class="type">T</span>&gt;</div></pre></td></tr></table></figure>
<p>å½“æ³›å‹ç±»å‹çš„ç¡®å®šæ€§å¾—åˆ°ä¿è¯åï¼Œæ˜¾ç„¶åˆ«åä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&lt;<span class="title">T</span>&gt; </span>&#123;&#125;</div><div class="line"><span class="keyword">typealias</span> <span class="type">WorkId</span> = <span class="type">String</span></div><div class="line"><span class="keyword">typealias</span> <span class="type">Worker</span> = <span class="type">Person</span>&lt;<span class="type">WorkId</span>&gt;</div></pre></td></tr></table></figure>
<p>å¦ä¸€ä¸ªä½¿ç”¨åœºæ™¯æ˜¯æŸä¸ªç±»å‹åŒæ—¶å®ç°å¤šä¸ªåè®®çš„ç»„åˆæ—¶ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨&amp;ç¬¦å·è¿æ¥å‡ ä¸ªåè®®ï¼Œç„¶åç»™å®ƒä»¬ä¸€ä¸ªæ–°çš„æ›´ç¬¦åˆä¸Šä¸‹æ–‡çš„åå­—ï¼Œæ¥å¢å¼ºä»£ç å¯è¯»æ€§:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Cat</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Dog</span> </span>&#123;&#125;</div><div class="line"><span class="keyword">typealias</span> <span class="type">Pat</span> = <span class="type">Cat</span> &amp; <span class="type">Dog</span></div></pre></td></tr></table></figure>
<h4 id="associatedtype-å…³è”ç±»å‹"><a href="#associatedtype-å…³è”ç±»å‹" class="headerlink" title="associatedtype å…³è”ç±»å‹"></a>associatedtype å…³è”ç±»å‹</h4><p>å®šä¹‰ä¸€ä¸ªåè®®æ—¶ï¼Œæœ‰çš„æ—¶å€™å£°æ˜ä¸€ä¸ªæˆ–å¤šä¸ªå…³è”ç±»å‹ä½œä¸ºåè®®å®šä¹‰çš„ä¸€éƒ¨åˆ†å°†ä¼šéå¸¸æœ‰ç”¨ã€‚ <strong>å…³è”ç±»å‹ä¸ºåè®®ä¸­çš„æŸä¸ªç±»å‹æä¾›äº†ä¸€ä¸ªå ä½åï¼ˆæˆ–è€…è¯´åˆ«åï¼‰ï¼Œå…¶ä»£è¡¨çš„å®é™…ç±»å‹åœ¨åè®®è¢«é‡‡çº³æ—¶æ‰ä¼šè¢«æŒ‡å®šã€‚</strong> æˆ‘ä»¬å¯ä»¥é€šè¿‡ associatedtype å…³é”®å­—æ¥æŒ‡å®šå…³è”ç±»å‹ï¼Œæ¯”å¦‚ä½¿ç”¨åè®®å£°æ˜æ›´æ–°cell çš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨¡å‹</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Model</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> age: <span class="type">Int</span></div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// åè®®ï¼Œä½¿ç”¨å…³è”ç±»å‹</span></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">TableViewCellProtocol</span> </span>&#123;</div><div class="line">    associatedtype <span class="type">T</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">updateCell</span><span class="params">(<span class="number">_</span> data: T)</span></span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// éµå®ˆTableViewCellProtocol</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTableViewCell</span>: <span class="title">UITableViewCell</span>, <span class="title">TableViewCellProtocol</span> </span>&#123;</div><div class="line">    <span class="keyword">typealias</span> <span class="type">T</span> = <span class="type">Model</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">updateCell</span><span class="params">(<span class="number">_</span> data: Model)</span></span> &#123;</div><div class="line">        <span class="comment">// do something ...</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/02/Swift-ä»é›¶å®ç°ä¸€ä¸ªStructæˆ–Classè½¬Dictionaryçš„éœ€æ±‚/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/02/Swift-ä»é›¶å®ç°ä¸€ä¸ªStructæˆ–Classè½¬Dictionaryçš„éœ€æ±‚/" itemprop="url">Swift ä»é›¶å®ç°ä¸€ä¸ªStructæˆ–Classè½¬Dictionaryçš„éœ€æ±‚</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-02T14:26:51+08:00">
                2018-03-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOSå¼€å‘/" itemprop="url" rel="index">
                    <span itemprop="name">iOSå¼€å‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä»Šå¤©åœ¨é€›çŸ¥ä¹çš„æ—¶å€™æ— æ„é—´çœ‹åˆ°è¿™æ ·ä¸€ä¸ªæé—® <a href="https://www.zhihu.com/question/56606968" target="_blank" rel="external">swiftä¸­structæ€ä¹ˆè½¬æˆå­—å…¸ï¼Ÿ</a>ï¼Œå¿ƒæƒ³åº”è¯¥ä¸éš¾å®ç°ï¼Œæ­£å¥½éœ€è¦å†™ç‚¹Swiftç»ƒç»ƒæ‰‹ï¼Œäºæ˜¯ä¹å¼€å§‹æèµ·ã€‚</p>
<p>é¦–å…ˆæƒ³åˆ°çš„æ˜¯å°†Structï¼ˆéµå®ˆCodableåè®®ï¼‰ç”¨JSONEncoderçš„encodeè½¬æˆDataï¼Œç„¶åå†ç”¨JSONSerializationååºåˆ—åŒ–æˆDictionaryå¯¹è±¡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span>: <span class="title">Codable</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></div><div class="line">    <span class="keyword">var</span> classRoom: <span class="type">String</span></div><div class="line"></div><div class="line">    <span class="keyword">init</span>(<span class="number">_</span> name: <span class="type">String</span>, age: <span class="type">Int</span>, classRoom: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="keyword">self</span>.age = age</div><div class="line">        <span class="keyword">self</span>.classRoom = classRoom</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> student = <span class="type">Student</span>(<span class="string">"xiaoming"</span>, age: <span class="number">10</span>, classRoom: <span class="string">"äº”ä¸€ç­"</span>)</div><div class="line"></div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"init student"</span>)</div><div class="line">    <span class="keyword">let</span> encoder = <span class="type">JSONEncoder</span>()</div><div class="line">    <span class="keyword">let</span> data = <span class="keyword">try</span> encoder.encode(student)</div><div class="line">    <span class="built_in">print</span>(<span class="string">"struct convert to data"</span>)</div><div class="line"></div><div class="line">    <span class="keyword">let</span> dict = <span class="keyword">try</span> <span class="type">JSONSerialization</span>.jsonObject(with: data, options: .allowFragments)</div><div class="line">    <span class="built_in">print</span>(type(of: dict))</div><div class="line">    <span class="built_in">print</span>(dict)</div><div class="line"></div><div class="line">&#125; <span class="keyword">catch</span> &#123;</div><div class="line">    <span class="built_in">print</span>(error)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨å›ç­”å®Œè¿™ä¸ªé—®é¢˜ä¹‹åï¼Œæˆ‘åˆæƒ³äº†ä¸€ä¸‹ï¼Œè¿™è¦æ˜¯æ¯æ¬¡è½¬æ¢ä¸€ä¸‹ï¼Œéƒ½è¿™ä¹ˆå†™ä¸€éï¼Œé‚£ä¸å°±ç–¯äº†å—ï¼Ÿ</p>
<p>ä¸€ä¸åšï¼ŒäºŒä¸ä¼‘ã€‚ç»§ç»­å†™ä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">convertStructToDict</span>&lt;T: Generator where T.Element:</span></div><div class="line"><span class="function">    Codable&gt;<span class="params">(structObj: T)</span></span> -&gt; <span class="type">Dictionary</span>&lt;<span class="type">String</span>, <span class="type">Any</span>&gt;? &#123;</div><div class="line"></div><div class="line">    <span class="keyword">let</span> dict: <span class="type">Dictionary</span>&lt;<span class="type">String</span>, <span class="type">Any</span>&gt;? = <span class="literal">nil</span></div><div class="line"></div><div class="line">    <span class="keyword">do</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"init student"</span>)</div><div class="line">        <span class="keyword">let</span> encoder = <span class="type">JSONEncoder</span>()</div><div class="line"></div><div class="line">        <span class="keyword">if</span> <span class="keyword">let</span> obj = structObj <span class="keyword">as</span>? <span class="type">Decodable</span> &#123;</div><div class="line"></div><div class="line">            <span class="keyword">let</span> data = <span class="keyword">try</span> encoder.encode(obj)</div><div class="line">            <span class="built_in">print</span>(<span class="string">"struct convert to data"</span>)</div><div class="line"></div><div class="line">            dict = <span class="keyword">try</span> <span class="type">JSONSerialization</span>.jsonObject(with: data, options: .allowFragments)</div><div class="line">            <span class="built_in">print</span>(type(of: dict))</div><div class="line">            <span class="built_in">print</span>(dict ?? <span class="string">""</span>)</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125; <span class="keyword">catch</span> &#123;</div><div class="line">        <span class="built_in">print</span>(error)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ¬¡çš„æ€è·¯æ˜¯ï¼Œå°è£…ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥å®ç° ä¼ å…¥ä¸€ä¸ªéµå®ˆCodableåè®®çš„Structæˆ–Classå®ä¾‹ï¼Œç»è¿‡å‡½æ•°å†…éƒ¨å¤„ç†ï¼Œè¿”å›ä¸€ä¸ªè½¬æ¢å¥½çš„Dictionaryå®ä¾‹å‡ºæ¥ã€‚</p>
<p>ç»“æœç¼–è¯‘å™¨æŠ¥é”™:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">error: MyPlayground.playground:260:39: error: &apos;where&apos; clause next to generic parameters is obsoleted</div><div class="line">func convertStructToDict&lt;T: Generator where T.Element:</div><div class="line">                                     ~^~~~~~~~~~~~~~~~</div></pre></td></tr></table></figure></p>
<p>æ­£ä¸€ç­¹è«å±•ä¹‹æ—¶ï¼Œå¿ƒæƒ³è¿™ä¸èƒ½åœ¨ä¸€æ£µæ ‘ä¸ŠåŠæ­»ï¼Œè¯•è¯•åˆ«çš„æ–¹æ³•ï¼Œè¯´ä¸å®šå¯ä»¥é€šè¿‡åè®®æ‰©å±•çš„æ–¹æ³•æ¥å®ç°ã€‚ä½†åˆä¸çŸ¥é“åè®®æ˜¯å¦æ”¯æŒç»§æ‰¿ï¼Œç»è¿‡æŸ¥æ‰¾å¾—åˆ°äº†è‚¯å®šçš„ç­”æ¡ˆï¼š</p>
<p><img src="https://github.com/a1049145827/Resources/raw/master/Protocol-Of-Swift.png" alt="Swiftä¸­åè®®å…è®¸ç»§æ‰¿"></p>
<p>å›¾ç‰‡å‡ºå¤„é“¾æ¥ï¼š<a href="https://www.jianshu.com/p/ee92fcbb3d21" target="_blank" rel="external">Swiftä¸­çš„ProtocolçŸ¥é“è¿™äº›å°±å¤Ÿäº†</a>ã€‚</p>
<p>çœ‹åˆ°è¿™é‡Œï¼Œå¿ƒä¸­ç«‹é©¬æœ‰äº†æ–¹æ¡ˆï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// ç›´æ¥å°†Structæˆ–Classè½¬æˆDictionary</span></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Convertable</span>: <span class="title">Codable</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Convertable</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/// ç›´æ¥å°†Structæˆ–Classè½¬æˆDictionary</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">convertToDict</span><span class="params">()</span></span> -&gt; <span class="type">Dictionary</span>&lt;<span class="type">String</span>, <span class="type">Any</span>&gt;? &#123;</div><div class="line"></div><div class="line">        <span class="keyword">var</span> dict: <span class="type">Dictionary</span>&lt;<span class="type">String</span>, <span class="type">Any</span>&gt;? = <span class="literal">nil</span></div><div class="line"></div><div class="line">        <span class="keyword">do</span> &#123;</div><div class="line">            <span class="built_in">print</span>(<span class="string">"init student"</span>)</div><div class="line">            <span class="keyword">let</span> encoder = <span class="type">JSONEncoder</span>()</div><div class="line"></div><div class="line">            <span class="keyword">let</span> data = <span class="keyword">try</span> encoder.encode(<span class="keyword">self</span>)</div><div class="line">            <span class="built_in">print</span>(<span class="string">"struct convert to data"</span>)</div><div class="line"></div><div class="line">            dict = <span class="keyword">try</span> <span class="type">JSONSerialization</span>.jsonObject(with: data, options: .allowFragments) <span class="keyword">as</span>? <span class="type">Dictionary</span>&lt;<span class="type">String</span>, <span class="type">Any</span>&gt;</div><div class="line"></div><div class="line">        &#125; <span class="keyword">catch</span> &#123;</div><div class="line">            <span class="built_in">print</span>(error)</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> dict</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span>: <span class="title">Convertable</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></div><div class="line">    <span class="keyword">var</span> classRoom: <span class="type">String</span></div><div class="line"></div><div class="line">    <span class="keyword">init</span>(<span class="number">_</span> name: <span class="type">String</span>, age: <span class="type">Int</span>, classRoom: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="keyword">self</span>.age = age</div><div class="line">        <span class="keyword">self</span>.classRoom = classRoom</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> student = <span class="type">Student</span>(<span class="string">"xiaoming"</span>, age: <span class="number">10</span>, classRoom: <span class="string">"äº”ä¸€ç­"</span>)</div><div class="line"></div><div class="line"><span class="built_in">print</span>(student.convertToDict() ?? <span class="string">"nil"</span>)</div></pre></td></tr></table></figure>
<p>ç°åœ¨åªéœ€è¦æ–°å»ºä¸€ä¸ªStructæˆ–è€…Classï¼Œç„¶åéµå®ˆConvertableåè®®ï¼Œè¿™ä¸ªç±»æˆ–è€…ç»“æ„ä½“å°±è·å¾—äº†ä¸€è¡Œä»£ç è½¬æ¢æˆDictionaryçš„èƒ½åŠ›ï¼Œååˆ†çš„æ–¹ä¾¿ï¼Œè€Œä¸”ä½¿ç”¨èµ·æ¥ä¹Ÿèƒ½ç¡®ä¿ç±»å‹å®‰å…¨ã€‚</p>
<p>é™„ä¸Šæˆ‘æ•´ç†å¥½çš„ä»£ç ï¼š <a href="https://github.com/a1049145827/ConvertableDemo.git" target="_blank" rel="external">githubé“¾æ¥</a></p>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/02/å°è¯•ä½¿ç”¨WCDBSwift/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/02/å°è¯•ä½¿ç”¨WCDBSwift/" itemprop="url">å°è¯•ä½¿ç”¨WCDBSwift</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-02T09:39:27+08:00">
                2018-03-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOSå¼€å‘/" itemprop="url" rel="index">
                    <span itemprop="name">iOSå¼€å‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æœ€è¿‘å¯¹Swiftå…´è¶£æµ“åšï¼Œæ—¢ç„¶å¹´åˆWCDBå›¢é˜Ÿå‘å¸ƒäº†Swiftçš„ç‰ˆæœ¬ï¼ˆè€Œä¸”æ˜¯çº¯Swiftå®ç°ï¼‰ï¼Œè‡ªç„¶è¦ä¸Šæ‰‹ä½“éªŒä¸€ä¸‹ï¼Œæ¯•ç«Ÿå®è·µå‡ºçœŸçŸ¥å˜›ã€‚</p>
<p>åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥è¿›å…¥ä¸»é¢˜ï¼Œå…¶å®WCDBçš„æ–‡æ¡£å·²ç»å¾ˆè¯¦ç»†äº†ï¼Œè¿™é‡Œæ˜¯ <a href="https://github.com/Tencent/wcdb/wiki/Swift-å®‰è£…ä¸å…¼å®¹æ€§" target="_blank" rel="external">å®‰è£…æ–¹æ³•</a>ã€‚</p>
<p>ä¸‹é¢ä»‹ç»WCDBçš„ç”¨æ³•ï¼š</p>
<h3 id="æ¨¡å‹ç»‘å®š"><a href="#æ¨¡å‹ç»‘å®š" class="headerlink" title="æ¨¡å‹ç»‘å®š"></a>æ¨¡å‹ç»‘å®š</h3><p>WCDBSwiftçš„æ¨¡å‹ç»‘å®šåˆ†ä¸ºäº”éƒ¨åˆ†: å­—æ®µæ˜ å°„ï¼Œå­—æ®µçº¦æŸï¼Œç´¢å¼•ï¼Œè¡¨çº¦æŸï¼Œè™šæ‹Ÿè¡¨æ˜ å°„.</p>
<p>æ¨¡å‹ç»‘å®šï¼ˆObject-relational Mappingï¼Œç®€ç§° ORMï¼‰ï¼Œé€šè¿‡å¯¹ Swift ç±»æˆ–ç»“æ„è¿›è¡Œç»‘å®šï¼Œå½¢æˆç±»æˆ–ç»“æ„ - è¡¨æ¨¡å‹ã€ç±»æˆ–ç»“æ„å¯¹è±¡ - è¡¨çš„æ˜ å°„å…³ç³»ï¼Œä»è€Œè¾¾åˆ°é€šè¿‡å¯¹è±¡ç›´æ¥æ“ä½œæ•°æ®åº“çš„ç›®çš„ã€‚</p>
<h4 id="1-å­—æ®µæ˜ å°„"><a href="#1-å­—æ®µæ˜ å°„" class="headerlink" title="1.å­—æ®µæ˜ å°„"></a>1.å­—æ®µæ˜ å°„</h4><p>æœ¬èŠ‚ä¸»è¦è®²æ€ä¹ˆå»å®šä¹‰ä¸€ä¸ªTableCodableç±»å‹çš„æ¨¡æ¿å¯¹è±¡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sample</span>: <span class="title">TableCodable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> identifier: <span class="type">Int</span>? = <span class="literal">nil</span></div><div class="line">    <span class="keyword">var</span> description: <span class="type">String</span>? = <span class="literal">nil</span></div><div class="line">    <span class="keyword">var</span> offset: <span class="type">Int</span> = <span class="number">0</span></div><div class="line">    <span class="keyword">var</span> debugDescription: <span class="type">String</span>? = <span class="literal">nil</span></div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">CodingKeys</span>: <span class="title">String</span>, <span class="title">CodingTableKey</span> </span>&#123;</div><div class="line">        <span class="keyword">typealias</span> <span class="type">Root</span> = <span class="type">Sample</span></div><div class="line">        <span class="keyword">static</span> <span class="keyword">let</span> objectRelationalMapping = <span class="type">TableBinding</span>(<span class="type">CodingKeys</span>.<span class="keyword">self</span>)</div><div class="line">        <span class="keyword">case</span> identifier = <span class="string">"id"</span></div><div class="line">        <span class="keyword">case</span> description</div><div class="line">        <span class="keyword">case</span> offset = <span class="string">"db_offset"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>å­—æ®µæ˜ å°„è¦æ±‚åœ¨ç±»å†…å®šä¹‰CodingKeysçš„æšä¸¾ç±»ï¼Œå¹¶éµå¾ªStringå’ŒCodingTableKey;</li>
<li>æšä¸¾å†…éœ€è¦åˆ—ä¸¾æ¯ä¸€ä¸ªéœ€è¦å®šä¹‰çš„å­—æ®µ;</li>
<li>å¯¹äºå˜é‡åå’Œè¡¨åä¸ä¸€æ ·çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨åˆ«åè¿›è¡Œæ˜ å°„ï¼Œå¦‚case ideatifity = â€˜idâ€™;</li>
<li>å¯¹äºä¸éœ€è¦å†™å…¥æ•°æ®åº“çš„å­—æ®µåˆ™ä¸éœ€è¦å†™å…¥æ˜ å°„é‡Œé¢ã€‚</li>
<li>å¯¹äºå˜é‡åå’ŒSQLiteä¿ç•™å…³é”®å­—å†²çªçš„å­—æ®µï¼Œå¯ä»¥ä½¿ç”¨åˆ«åè¿›è¡Œæ˜ å°„ã€‚</li>
</ul>
<h4 id="2-å­—æ®µçº¦æŸ"><a href="#2-å­—æ®µçº¦æŸ" class="headerlink" title="2.å­—æ®µçº¦æŸ"></a>2.å­—æ®µçº¦æŸ</h4><p>å­—æ®µçº¦æŸæ˜¯TableEncodableçš„ä¸€ä¸ªå¯é€‰å‡½æ•°ï¼Œå¯æ ¹æ®éœ€æ±‚é€‰æ‹©å®ç°æˆ–ä¸å®ç°ã€‚å®ƒç”¨äºå®šä¹‰é’ˆå¯¹å•ç‹¬å­—æ®µçš„çº¦æŸï¼Œå¦‚ä¸»é”®çº¦æŸï¼Œéç©ºçº¦æŸï¼Œå”¯ä¸€çº¦æŸï¼Œé»˜è®¤å€¼ç­‰.</p>
<p>å­—æ®µçº¦æŸç¤ºä¾‹ä»£ç å¦‚ä¸‹:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sample</span>: <span class="title">TableCodable</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> identifier: <span class="type">Int</span>? = <span class="literal">nil</span></div><div class="line">    <span class="keyword">var</span> description: <span class="type">String</span>? = <span class="literal">nil</span></div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">CodingKeys</span>: <span class="title">String</span>, <span class="title">CodingTableKey</span> </span>&#123;</div><div class="line">        <span class="keyword">typealias</span> <span class="type">Root</span> = <span class="type">Sample</span></div><div class="line">        <span class="keyword">static</span> <span class="keyword">let</span> objectRelationalMapping = <span class="type">TableBinding</span>(<span class="type">CodingKeys</span>.<span class="keyword">self</span>)</div><div class="line">        <span class="keyword">case</span> identifier</div><div class="line">        <span class="keyword">case</span> description</div><div class="line"></div><div class="line">        <span class="keyword">static</span> <span class="keyword">var</span> columnConstraintBindings: [<span class="type">CodingKeys</span>: <span class="type">ColumnConstraintBinding</span>]? &#123;</div><div class="line">            <span class="keyword">return</span> [</div><div class="line">                identifier: <span class="type">ColumnConstraintBinding</span>(isPrimary: <span class="literal">true</span>),</div><div class="line">                description: <span class="type">ColumnConstraintBinding</span>(isNotNull: <span class="literal">true</span>, defaultTo: <span class="string">"defaultDescription"</span>),</div><div class="line">            ]</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> isAutoIncrement: <span class="type">Bool</span> = <span class="literal">false</span> <span class="comment">// ç”¨äºå®šä¹‰æ˜¯å¦ä½¿ç”¨è‡ªå¢çš„æ–¹å¼æ’å…¥</span></div><div class="line">    <span class="keyword">var</span> lastInsertedRowID: <span class="type">Int64</span> = <span class="number">0</span> <span class="comment">// ç”¨äºè·å–è‡ªå¢æ’å…¥åçš„ä¸»é”®å€¼</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å­—æ®µçº¦æŸé€šè¿‡ä½¿ç”¨CodingKeysåˆ°å­—æ®µçº¦æŸçš„å­—å…¸å®ç°ï¼Œå®šä¹‰æ¯ä¸ªCodingKeyså¯¹åº”çš„çº¦æŸã€‚ColumnConstraintBindingåˆå§‹åŒ–å‡½æ•°å£°æ˜å¦‚ä¸‹:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="type">ColumnConstraintBinding</span>(</div><div class="line">    isPrimary: <span class="type">Bool</span> = <span class="literal">false</span>, <span class="comment">// è¯¥å­—æ®µæ˜¯å¦ä¸ºä¸»é”®ã€‚å­—æ®µçº¦æŸä¸­åªèƒ½åŒæ—¶å­˜åœ¨ä¸€ä¸ªä¸»é”®</span></div><div class="line">    orderBy term: <span class="type">OrderTerm</span>? = <span class="literal">nil</span>, <span class="comment">// å½“è¯¥å­—æ®µæ˜¯ä¸»é”®æ—¶ï¼Œå­˜å‚¨é¡ºåºæ˜¯å‡åºè¿˜æ˜¯é™åº</span></div><div class="line">    isAutoIncrement: <span class="type">Bool</span> = <span class="literal">false</span>, <span class="comment">// å½“è¯¥å­—æ®µæ˜¯ä¸»é”®æ—¶ï¼Œå…¶æ˜¯å¦æ”¯æŒè‡ªå¢ã€‚åªæœ‰æ•´å‹æ•°æ®å¯ä»¥å®šä¹‰ä¸ºè‡ªå¢ã€‚</span></div><div class="line">    onConflict conflict: <span class="type">Conflict</span>? = <span class="literal">nil</span>, <span class="comment">// å½“è¯¥å­—æ®µæ˜¯ä¸»é”®æ—¶ï¼Œè‹¥äº§ç”Ÿå†²çªï¼Œåº”å¦‚ä½•å¤„ç†</span></div><div class="line">    isNotNull: <span class="type">Bool</span> = <span class="literal">false</span>, <span class="comment">// è¯¥å­—æ®µæ˜¯å¦å¯ä»¥ä¸ºç©º</span></div><div class="line">    isUnique: <span class="type">Bool</span> = <span class="literal">false</span>, <span class="comment">// è¯¥å­—æ®µæ˜¯å¦å¯ä»¥å…·æœ‰å”¯ä¸€æ€§</span></div><div class="line">    defaultTo defaultValue: <span class="type">ColumnDef</span>.<span class="type">DefaultType</span>? = <span class="literal">nil</span> <span class="comment">// è¯¥å­—æ®µåœ¨æ•°æ®åº“å†…ä½¿ç”¨ä»€ä¹ˆé»˜è®¤å€¼</span></div><div class="line">)</div></pre></td></tr></table></figure>
<p>å®šä¹‰äº† isPrimary: çš„å­—æ®µï¼Œæ”¯æŒä»¥è‡ªå¢çš„æ–¹å¼è¿›è¡Œæ’å…¥æ•°æ®ã€‚ä½†ä»å¯ä»¥é€šè¿‡éè‡ªå¢çš„æ–¹å¼æ’å…¥æ•°æ®ã€‚</p>
<p>å½“éœ€è¦è¿›è¡Œè‡ªå¢æ’å…¥æ—¶ï¼Œå¯¹è±¡éœ€è®¾ç½® isAutoIncrement å‚æ•°ä¸º trueï¼Œåˆ™æ•°æ®åº“ä¼šä½¿ç”¨ å·²æœ‰æ•°æ®ä¸­æœ€å¤§çš„å€¼+1 ä½œä¸ºä¸»é”®çš„å€¼ã€‚</p>
<h4 id="3-ç´¢å¼•"><a href="#3-ç´¢å¼•" class="headerlink" title="3.ç´¢å¼•"></a>3.ç´¢å¼•</h4><p>ç´¢å¼•æ˜¯ TableEncodable çš„ä¸€ä¸ªå¯é€‰å‡½æ•°ï¼Œå¯æ ¹æ®éœ€æ±‚é€‰æ‹©å®ç°æˆ–ä¸å®ç°ã€‚å®ƒç”¨äºå®šäºé’ˆå¯¹å•ä¸ªæˆ–å¤šä¸ªå­—æ®µçš„ç´¢å¼•ï¼Œç´¢å¼•åçš„æ•°æ®åœ¨èƒ½æœ‰æ›´é«˜çš„æŸ¥è¯¢æ•ˆç‡ã€‚</p>
<p>ç´¢å¼•é€šè¿‡ç´¢å¼•åçš„åç¼€ä¸ç´¢å¼•ç»‘å®šçš„æ˜ å°„å®ç°ã€‚</p>
<ul>
<li>å¯¹äºéœ€è¦ç‰¹åˆ«æŒ‡æ˜ç´¢å¼•å­˜å‚¨é¡ºåºçš„å­—æ®µï¼Œå¯ä»¥é€šè¿‡ asIndex(orderBy:) å‡½æ•°æŒ‡å®šï¼Œå¦‚ description.asIndex(orderBy: .descending)ã€‚</li>
<li>å¯¹äºå…·æœ‰å”¯ä¸€æ€§çš„ç´¢å¼•ï¼Œå¯ä»¥é€šè¿‡ isUnique: å‚æ•°æŒ‡å®šï¼Œå¦‚ IndexBinding(isUnique: true, indexesBy: identifier)ã€‚</li>
<li>å¯¹äºç”±å¤šä¸ªå­—æ®µç»„æˆçš„è”åˆç´¢å¼•ï¼Œå¯ä»¥é€šè¿‡ indexesBy: è¿›è¡ŒæŒ‡å®šï¼Œå¦‚ (indexesBy: multiIndexPart1, multiIndexPart2.asIndex(orderBy: .ascending))</li>
</ul>
<p><strong>å®Œæ•´çš„ç´¢å¼•åä¸ºè¡¨å+ç´¢å¼•åç¼€ï¼Œå¦‚ï¼šè¡¨ â€œsampleTableâ€ çš„ç´¢å¼•åˆ†åˆ«ä¸º â€œsampleTable_uniqueIndexâ€ã€â€sampleTable_descendingIndexâ€ å’Œ â€œsampleTable_multiIndexâ€ã€‚</strong></p>
<h4 id="4-è¡¨çº¦æŸ"><a href="#4-è¡¨çº¦æŸ" class="headerlink" title="4.è¡¨çº¦æŸ"></a>4.è¡¨çº¦æŸ</h4><p>è¡¨çº¦æŸæ˜¯ TableEncodable çš„ä¸€ä¸ªå¯é€‰å‡½æ•°ï¼Œå¯æ ¹æ®éœ€æ±‚é€‰æ‹©å®ç°æˆ–ä¸å®ç°ã€‚å®ƒç”¨äºå®šäºé’ˆå¯¹å¤šä¸ªå­—æ®µæˆ–è¡¨æœ¬èº«çš„çº¦æŸã€‚</p>
<p>è¡¨çº¦æŸé€šè¿‡çº¦æŸååˆ°è¡¨çº¦æŸçš„æ˜ å°„å®ç°ã€‚</p>
<ul>
<li>MultiPrimaryBinding: è”åˆä¸»é”®çº¦æŸ;</li>
<li>MultiUniqueBinding: è”åˆå”¯ä¸€çº¦æŸ;</li>
<li>MultiUniqueBinding: çº¦æŸæ£€æŸ¥;</li>
<li>ForeignKeyBinding: å¤–é”®çº¦æŸ;</li>
</ul>
<h4 id="5-æ•°æ®åº“å‡çº§"><a href="#5-æ•°æ®åº“å‡çº§" class="headerlink" title="5.æ•°æ®åº“å‡çº§"></a>5.æ•°æ®åº“å‡çº§</h4><p>å¯¹äºæ˜ å°„å­—æ®µ</p>
<ul>
<li>è¡¨ä¸­å­˜åœ¨ä½†æ¨¡å‹ç»‘å®šä¸­æœªå®šä¹‰çš„å­—æ®µï¼Œä¼šè¢«å¿½ç•¥ï¼Œè¿™ä¸ªå¯ä»¥ç”¨æ¥åˆ é™¤å­—æ®µã€‚</li>
<li>è¡¨ä¸å­˜åœ¨ä½†åœ¨æ¨¡å‹ç»‘å®šä¸­æœ‰å®šä¹‰çš„å­—æ®µï¼Œä¼šè¢«æ–°å¢åˆ°è¡¨ä¸­ã€‚ è¿™å¯ç”¨äºæ–°å¢å­—æ®µã€‚</li>
<li>å¯¹äºéœ€è¦é‡å‘½åçš„å­—æ®µï¼Œå¯ä»¥é€šè¿‡åˆ«åçš„æ–¹å¼é‡æ–°æ˜ å°„ã€‚</li>
</ul>
<p><strong>å¿½ç•¥å­—æ®µå¹¶ä¸ä¼šåˆ é™¤å­—æ®µã€‚å¯¹äºè¯¥å­—æ®µçš„æ—§å†…å®¹ï¼Œä¼šæŒç»­å­˜åœ¨åœ¨è¡¨ä¸­ï¼Œå› æ­¤æ–‡ä»¶ä¸ä¼šå› æ­¤å˜å°ã€‚å®é™…ä¸Šï¼Œæ•°æ®åº“ä½œä¸ºæŒç»­å¢é•¿çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåªæœ‰å°†å…¶æ•°æ®å¯¼å‡ºç”Ÿæˆå¦ä¸€ä¸ªæ–°çš„æ•°æ®åº“ï¼Œæ‰æœ‰å¯èƒ½å›æ”¶è¿™ä¸ªå­—æ®µå ç”¨çš„ç©ºé—´ã€‚å¯¹äºæ–°æ’å…¥çš„æ•°æ®ï¼Œè¯¥å­—æ®µå†…å®¹ä¸ºç©ºï¼Œä¸ä¼šå¯¹æ€§èƒ½äº§ç”Ÿå¯è§çš„å½±å“ã€‚</strong></p>
<h3 id="å¢åˆ æŸ¥æ”¹"><a href="#å¢åˆ æŸ¥æ”¹" class="headerlink" title="å¢åˆ æŸ¥æ”¹"></a>å¢åˆ æŸ¥æ”¹</h3><h4 id="1-æ’å…¥æ“ä½œ"><a href="#1-æ’å…¥æ“ä½œ" class="headerlink" title="1.æ’å…¥æ“ä½œ"></a>1.æ’å…¥æ“ä½œ</h4><p>æ’å…¥æ“ä½œæœ‰ â€œinsertâ€ å’Œ â€œinsertOrReplaceâ€ ä¸¤ä¸ªæ¥å£ã€‚æ•…åæ€ä¹‰ï¼Œå‰è€…åªæ˜¯å•çº¯çš„æ’å…¥æ•°æ®ï¼Œå½“æ•°æ®å‡ºç°å†²çªæ—¶ä¼šå¤±è´¥ï¼Œè€Œåè€…åœ¨ä¸»é”®ä¸€è‡´æ—¶ï¼Œæ–°æ•°æ®ä¼šè¦†ç›–æ—§æ•°æ®ã€‚</p>
<p>insertå‡½æ•°çš„åŸå‹:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// insert å’Œ insertOrReplace å‡½æ•°åªæœ‰å‡½æ•°åä¸åŒï¼Œå…¶ä»–å‚æ•°éƒ½ä¸€æ ·ã€‚</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">insert</span>&lt;Object: TableEncodable&gt;<span class="params">(</span></span></div><div class="line"><span class="function"><span class="params">    objects: [Object], // éœ€è¦æ’å…¥çš„å¯¹è±¡ã€‚WCDB Swift åŒæ—¶å®ç°äº†å¯å˜å‚æ•°çš„ç‰ˆæœ¬ï¼Œå› æ­¤å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ã€‚</span></span></div><div class="line"><span class="function"><span class="params">    on propertyConvertibleList: [PropertyConvertible]? = <span class="literal">nil</span>, // éœ€è¦æ’å…¥çš„å­—æ®µ</span></span></div><div class="line"><span class="function"><span class="params">    intoTable table: String // è¡¨å</span></span></div><div class="line"><span class="function"><span class="params">)</span></span> <span class="keyword">throws</span></div></pre></td></tr></table></figure>
<p>æ’å…¥æ˜¯æœ€å¸¸ç”¨ä¸”æ¯”è¾ƒå®¹æ˜“æ“ä½œå¡é¡¿çš„æ“ä½œï¼Œå› æ­¤ WCDB Swift å¯¹å…¶è¿›è¡Œäº†ç‰¹æ®Šå¤„ç†ã€‚ å½“æ’å…¥çš„å¯¹è±¡æ•°å¤§äº 1 æ—¶ï¼ŒWCDB Swift ä¼šè‡ªåŠ¨å¼€å¯äº‹åŠ¡ï¼Œè¿›è¡Œæ‰¹é‡åŒ–åœ°æ’å…¥ï¼Œä»¥è·å¾—æ›´æ–°çš„æ€§èƒ½ã€‚</p>
<h4 id="2-åˆ é™¤æ“ä½œ"><a href="#2-åˆ é™¤æ“ä½œ" class="headerlink" title="2.åˆ é™¤æ“ä½œ"></a>2.åˆ é™¤æ“ä½œ</h4><p>åˆ é™¤å‡½æ•°åŸå‹:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">delete</span><span class="params">(fromTable table: String, // è¡¨å</span></span></div><div class="line"><span class="function"><span class="params">            <span class="keyword">where</span> condition: Condition? = <span class="literal">nil</span>, // ç¬¦åˆåˆ é™¤çš„æ¡ä»¶</span></span></div><div class="line"><span class="function"><span class="params">            orderBy orderList: [OrderBy]? = <span class="literal">nil</span>, // æ’åºçš„æ–¹å¼</span></span></div><div class="line"><span class="function"><span class="params">            limit: Limit? = <span class="literal">nil</span>, // åˆ é™¤çš„ä¸ªæ•°</span></span></div><div class="line"><span class="function"><span class="params">            offset: Offset? = <span class="literal">nil</span> // ä»ç¬¬å‡ ä¸ªå¼€å§‹åˆ é™¤</span></span></div><div class="line"><span class="function"><span class="params">)</span></span> <span class="keyword">throws</span></div></pre></td></tr></table></figure>
<p>åˆ é™¤ç¤ºä¾‹ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åˆ é™¤ sampleTable ä¸­æ‰€æœ‰ identifier å¤§äº 1 çš„è¡Œçš„æ•°æ®</span></div><div class="line"><span class="keyword">try</span> database.delete(fromTable: <span class="string">"sampleTable"</span>,</div><div class="line">                    <span class="keyword">where</span>: <span class="type">Sample</span>.<span class="type">Properties</span>.identifier &gt; <span class="number">1</span>)</div><div class="line"></div><div class="line"><span class="comment">// åˆ é™¤ sampleTable ä¸­ identifier é™åºæ’åˆ—åçš„å‰ 2 è¡Œæ•°æ®</span></div><div class="line"><span class="keyword">try</span> database.delete(fromTable: <span class="string">"sampleTable"</span>,</div><div class="line">                    orderBy: <span class="type">Sample</span>.<span class="type">Properties</span>.identifier.asOrder(by: .descending),</div><div class="line">                    limit: <span class="number">2</span>)</div><div class="line"></div><div class="line"><span class="comment">// åˆ é™¤ sampleTable ä¸­ description éç©ºçš„æ•°æ®ï¼ŒæŒ‰ identifier é™åºæ’åˆ—åçš„å‰ 3 è¡Œçš„å 2 è¡Œæ•°æ®</span></div><div class="line"><span class="keyword">try</span> database.delete(fromTable: <span class="string">"sampleTable"</span>,</div><div class="line">                    <span class="keyword">where</span>: <span class="type">Sample</span>.<span class="type">Properties</span>.description.isNotNull(),</div><div class="line">                    orderBy: <span class="type">Sample</span>.<span class="type">Properties</span>.identifier.asOrder(by: .descending),</div><div class="line">                    limit: <span class="number">2</span>,</div><div class="line">                    offset: <span class="number">3</span>)</div><div class="line"></div><div class="line"><span class="comment">// åˆ é™¤ sampleTable ä¸­çš„æ‰€æœ‰æ•°æ®</span></div><div class="line"><span class="keyword">try</span> database.delete(fromTable: <span class="string">"sampleTable"</span>)</div></pre></td></tr></table></figure>
<p><strong>åˆ é™¤æ¥å£ä¸ä¼šåˆ é™¤è¡¨æœ¬èº«ï¼Œå¼€å‘è€…éœ€è¦è°ƒç”¨ drop(table:) æ¥å£åˆ é™¤è¡¨ã€‚</strong></p>
<h4 id="3-æ›´æ–°"><a href="#3-æ›´æ–°" class="headerlink" title="3.æ›´æ–°"></a>3.æ›´æ–°</h4><p>æ›´æ–°çš„æ“ä½œæ¥å£æœ‰ä¸¤ä¸ªï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">update</span>&lt;Object: TableEncodable&gt;<span class="params">(</span></span></div><div class="line"><span class="function"><span class="params">    table: String,</span></span></div><div class="line"><span class="function"><span class="params">    on propertyConvertibleList: [PropertyConvertible],</span></span></div><div class="line"><span class="function"><span class="params">    with object: Object,</span></span></div><div class="line"><span class="function"><span class="params">    <span class="keyword">where</span> condition: Condition? = <span class="literal">nil</span>,</span></span></div><div class="line"><span class="function"><span class="params">    orderBy orderList: [OrderBy]? = <span class="literal">nil</span>,</span></span></div><div class="line"><span class="function"><span class="params">    limit: Limit? = <span class="literal">nil</span>,</span></span></div><div class="line"><span class="function"><span class="params">    offset: Offset? = <span class="literal">nil</span>)</span></span> <span class="keyword">throws</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">update</span><span class="params">(</span></span></div><div class="line"><span class="function"><span class="params">    table: String,</span></span></div><div class="line"><span class="function"><span class="params">    on propertyConvertibleList: [PropertyConvertible],</span></span></div><div class="line"><span class="function"><span class="params">    with row: [ColumnEncodableBase],</span></span></div><div class="line"><span class="function"><span class="params">    <span class="keyword">where</span> condition: Condition? = <span class="literal">nil</span>,</span></span></div><div class="line"><span class="function"><span class="params">    orderBy orderList: [OrderBy]? = <span class="literal">nil</span>,</span></span></div><div class="line"><span class="function"><span class="params">    limit: Limit? = <span class="literal">nil</span>,</span></span></div><div class="line"><span class="function"><span class="params">    offset: Offset? = <span class="literal">nil</span>)</span></span> <span class="keyword">throws</span></div></pre></td></tr></table></figure>
<h4 id="4-æŸ¥æ‰¾æ¥å£"><a href="#4-æŸ¥æ‰¾æ¥å£" class="headerlink" title="4.æŸ¥æ‰¾æ¥å£"></a>4.æŸ¥æ‰¾æ¥å£</h4><ul>
<li>getObjects</li>
<li>getObject</li>
<li>getRows</li>
<li>getRow</li>
<li>getColumn</li>
<li>getDistinctColumn</li>
<li>getValue</li>
<li>getDistinctValue</li>
</ul>
<p>è™½ç„¶æŸ¥æ‰¾çš„æ¥å£æ¯”è¾ƒå¤šï¼Œä½†æ˜¯å¤§éƒ¨åˆ†éƒ½æ˜¯ä¸ºäº†ç®€åŒ–æ“ä½œè€Œæä¾›çš„ä¾¿æ·æ¥å£ã€‚å®ç°ä¸Šå…¶å®ä¸updateç±»ä¼¼ï¼Œåªæœ‰ä¸¤ç§æ–¹å¼:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">getObjects</span>&lt;Object: TableDecodable&gt;<span class="params">(</span></span></div><div class="line"><span class="function"><span class="params">    on propertyConvertibleList: [PropertyConvertible],</span></span></div><div class="line"><span class="function"><span class="params">    fromTable table: String,</span></span></div><div class="line"><span class="function"><span class="params">    <span class="keyword">where</span> condition: Condition? = <span class="literal">nil</span>,</span></span></div><div class="line"><span class="function"><span class="params">    orderBy orderList: [OrderBy]? = <span class="literal">nil</span>,</span></span></div><div class="line"><span class="function"><span class="params">    limit: Limit? = <span class="literal">nil</span>,</span></span></div><div class="line"><span class="function"><span class="params">    offset: Offset? = <span class="literal">nil</span>)</span></span> <span class="keyword">throws</span> -&gt; [<span class="type">Object</span>]</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">getObject</span>&lt;Object: TableDecodable&gt;<span class="params">(</span></span></div><div class="line"><span class="function"><span class="params">    on propertyConvertibleList: [PropertyConvertible],</span></span></div><div class="line"><span class="function"><span class="params">    fromTable table: String,</span></span></div><div class="line"><span class="function"><span class="params">    <span class="keyword">where</span> condition: Condition? = <span class="literal">nil</span>,</span></span></div><div class="line"><span class="function"><span class="params">    orderBy orderList: [OrderBy]? = <span class="literal">nil</span>,</span></span></div><div class="line"><span class="function"><span class="params">    offset: Offset? = <span class="literal">nil</span>)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">Object</span>?</div></pre></td></tr></table></figure>
<h3 id="æ•°æ®åº“ï¼Œè¡¨ï¼Œäº‹åŠ¡"><a href="#æ•°æ®åº“ï¼Œè¡¨ï¼Œäº‹åŠ¡" class="headerlink" title="æ•°æ®åº“ï¼Œè¡¨ï¼Œäº‹åŠ¡"></a>æ•°æ®åº“ï¼Œè¡¨ï¼Œäº‹åŠ¡</h3><p>WCDB Swiftçš„ä¸‰ä¸ªåŸºç¡€ç±»: æ•°æ®åº“(Database)ï¼Œè¡¨(Table)ï¼Œäº‹åŠ¡(Transaction)ã€‚ä»–ä»¬åŒäº‹æ‹¥æœ‰ä»¥ä¸‹ç‰¹æ€§:</p>
<ul>
<li>æ”¯æŒå¢åˆ æ”¹æŸ¥çš„ä¾¿æ·æ¥å£;</li>
<li>æ”¯æŒé“¾å¼æ¥å£;</li>
<li>æ•°æ®å’ŒçŠ¶æ€å…±äº«;</li>
<li>çº¿ç¨‹å®‰å…¨;</li>
<li>æ•°æ®å’ŒçŠ¶æ€å…±äº«ï¼Œæ„å‘³ç€å¯¹äºåŒä¸€ä¸ªè·¯å¾„çš„æ•°æ®åº“ä¸­ä¸åŒåŸºç¡€ç±»ï¼Œä»–ä»¬çš„æ ‡ç­¾ï¼Œæ•°æ®åº“æ˜¯å¦æ‰“å¼€ï¼Œæ˜¯å¦åœ¨è¿›è¡Œè¯»å†™æ“ä½œç­‰æ‰€æœ‰çš„çŠ¶æ€å’Œæ•°æ®éƒ½å§‹ç»ˆä¿æŒä¸€è‡´ã€‚</li>
</ul>
<p>åŸºç¡€ç±»å…±äº«æ•°æ®å’ŒçŠ¶æ€çš„æœ¬è´¨æ˜¯ï¼Œä»–ä»¬å…±äº«åŒä¸€ä¸ªCoreï¼Œè€Œæ‰€æœ‰çš„æ“ä½œéƒ½åœ¨è¿™ä¸ªCoreä¸Šå‘ç”Ÿã€‚</p>
<p>çº¿ç¨‹å®‰å…¨ï¼Œæ„å‘³ç€å¼€å‘è€…å¯ä»¥åœ¨ä»»æ„çº¿ç¨‹å¯¹ä»»æ„åŸºç¡€ç±»è°ƒç”¨ä»»æ„æ¥å£ï¼Œè€Œä¸éœ€è¦è€ƒè™‘æ•°æ®åº“æœ¬èº«çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚åŒæ—¶ï¼ŒWCDBä¼šæ ¹æ®è°ƒç”¨æƒ…å†µï¼Œå¹¶å‘æ‰§è¡Œæ“ä½œï¼Œä»¥è¾¾åˆ°æ›´é«˜çš„æ€§èƒ½ã€‚</p>
<p>WCDBæ”¯æŒå¤šçº¿ç¨‹è¯»æ“ä½œ æˆ– å•çº¿ç¨‹å†™å¤šçº¿ç¨‹è¯» å¹¶å‘æ‰§è¡Œ.</p>
<h4 id="1-æ•°æ®åº“"><a href="#1-æ•°æ®åº“" class="headerlink" title="1.æ•°æ®åº“"></a>1.æ•°æ®åº“</h4><p>Databaseæ˜¯WCDBæœ€åŸºç¡€çš„ç±»ï¼Œå‡ ä¹æ‰€æœ‰çš„æ“ä½œéƒ½ç”±è¯¥ç±»å‘èµ·.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ä¸€èˆ¬å¯ä»¥é€šè¿‡ä¸€ä¸ªæ–‡ä»¶è·¯å¾„æˆ–è€…ä¸€ä¸ªæ–‡ä»¶urlåˆå§‹åŒ–</span></div><div class="line"><span class="keyword">let</span> filePath = <span class="string">"~/Intermediate/Directories/Will/Be/Created/sample.db"</span></div><div class="line"><span class="keyword">let</span> databaseWithPath = <span class="type">Database</span>(withPath: filePath)</div><div class="line"></div><div class="line"><span class="keyword">let</span> fileURL = <span class="type">URL</span>(fileURLWithPath: filePath)</div><div class="line"><span class="keyword">let</span> databaseWithFileURL = <span class="type">Database</span>(withFileURL: fileURL)</div><div class="line">å»¶è¿Ÿåˆå§‹åŒ–æ˜¯<span class="type">WCDB</span>çš„åŸåˆ™ä¹‹ä¸€ï¼Œç»å¤§éƒ¨åˆ†æ•°æ®åªä¼šåœ¨éœ€è¦ç”¨åˆ°æ—¶å€™æ‰åˆ›å»ºå¹¶åˆå§‹åŒ–ã€‚æ•°æ®åº“çš„æ‰“å¼€å°±æ˜¯ä¸€ä¸ªä¾‹å­:</div><div class="line"></div><div class="line"><span class="keyword">let</span> database = <span class="type">Database</span>(withPath: filePath)</div><div class="line"><span class="built_in">print</span>(database.isOpened) <span class="comment">// è¾“å‡º false</span></div><div class="line"><span class="keyword">try</span> database.create(table: <span class="string">"sampleTable"</span>, of: <span class="type">Sample</span>.<span class="keyword">self</span>) <span class="comment">// æ•°æ®åº“æ­¤æ—¶ä¼šè¢«è‡ªåŠ¨æ‰“å¼€</span></div><div class="line"><span class="built_in">print</span>(database.isOpened) <span class="comment">// è¾“å‡º true</span></div></pre></td></tr></table></figure>
<p>æ•°æ®åº“ä¼šåœ¨ç¬¬ä¸€æ¬¡è¿›è¡Œæ“ä½œæ—¶ï¼Œè‡ªåŠ¨æ‰“å¼€å¹¶åˆå§‹åŒ–ã€‚å¼€å‘è€…ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨ã€‚ å…³é—­æ•°æ®åº“ä¸€èˆ¬ä¹Ÿä¸éœ€è¦å¼€å‘è€…æ‰‹åŠ¨è°ƒç”¨ã€‚å½“æ²¡æœ‰æŒ‡å‘databaseæ‰€æœ‰å…±äº«çš„coreæ—¶ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨å…³é—­ï¼Œå¹¶å›æ”¶å†…å­˜.</p>
<h4 id="2-è¡¨"><a href="#2-è¡¨" class="headerlink" title="2.è¡¨"></a>2.è¡¨</h4><p>TableæŒ‡æ•°æ®åº“ä¸­çš„ä¸€ä¸ªè¡¨ã€‚å¯ä»¥é€šè¿‡getTableæ¥å£è·å–.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> table = <span class="keyword">try</span> database.getTable(named: <span class="string">"sampleTable"</span>, of: <span class="type">Sample</span>.<span class="keyword">self</span>) <span class="comment">//  è¡¨ä¸å­˜åœ¨æ—¶ä¼šå‡ºé”™</span></div><div class="line"></div><div class="line"><span class="comment">// è¿”å›å€¼éœ€æŒ‡å®šä¸º [Sample] ç±»å‹ä»¥åŒ¹é…èŒƒå‹</span></div><div class="line"><span class="keyword">let</span> objectsFromDatabase: [<span class="type">Sample</span>] = <span class="keyword">try</span> database.getObjects(fromTable: <span class="string">"sampleTable"</span>)</div><div class="line"></div><div class="line"><span class="comment">// table å·²ç»æŒ‡å®šäº†è¡¨åå’Œæ¨¡å‹ç»‘å®šçš„ç±»ï¼Œå› æ­¤å¯ä»¥ç›´æ¥è·å–</span></div><div class="line"><span class="keyword">let</span> objectsFromTable = <span class="keyword">try</span> table.getObjects()</div></pre></td></tr></table></figure>
<p>è¡¨ç›¸å½“äºæŒ‡å®šäº†è¡¨åå’Œæ¨¡å‹ç»‘å®šç±»çš„ Databaseï¼Œå…¶å®è´¨åªæ˜¯åè€…çš„ç®€åŒ–ç‰ˆã€‚</p>
<h4 id="3-äº‹åŠ¡"><a href="#3-äº‹åŠ¡" class="headerlink" title="3.äº‹åŠ¡"></a>3.äº‹åŠ¡</h4><p>äº‹åŠ¡ä¸€èˆ¬ç”¨äºæå‡æ€§èƒ½å’Œä¿è¯æ•°æ®åŸå­æ€§ã€‚Databaseå’ŒTableéƒ½èƒ½ç›´æ¥å‘èµ·äº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Transactionæ›´å¥½çš„æ§åˆ¶äº‹åŠ¡.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> database.run(transaction: &#123;</div><div class="line">    <span class="keyword">try</span> database.insert(objects: object, intoTable: <span class="string">"sampleTable"</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">let</span> table = <span class="keyword">try</span> database.getTable(named: <span class="string">"sampleTable"</span>, of: <span class="type">Sample</span>.<span class="keyword">self</span>)</div><div class="line">table.run(transaction: &#123;</div><div class="line">    <span class="keyword">try</span> database.insert(objects: object)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// ä¸ Databaseã€Table ç±»ä¼¼ï¼Œå¼€å‘è€…å¯ä»¥ä¿å­˜ Transaction å˜é‡</span></div><div class="line"><span class="keyword">let</span> transaction = <span class="keyword">try</span> database.getTransaction()</div><div class="line">transacton.run(transaction: &#123;</div><div class="line">    <span class="built_in">print</span>(transaction.isInTransction) <span class="comment">// è¾“å‡º true</span></div><div class="line">    <span class="keyword">try</span> transaction.insert(objects: object)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>äº‹åŠ¡æå‡æ€§èƒ½çš„å®è´¨æ˜¯æ‰¹é‡å¤„ç†ã€‚</p>
<p>äº‹åŠ¡å¯ä»¥ç”¨æ¥ä¿è¯æŸäº›å¤šçº¿ç¨‹æ“ä½œçš„åŸå­æ€§ï¼Œä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p>
<h4 id="4-è¯­è¨€é›†æˆæŸ¥è¯¢"><a href="#4-è¯­è¨€é›†æˆæŸ¥è¯¢" class="headerlink" title="4.è¯­è¨€é›†æˆæŸ¥è¯¢"></a>4.è¯­è¨€é›†æˆæŸ¥è¯¢</h4><p>è¯­è¨€é›†æˆæŸ¥è¯¢ï¼ˆWCDB Integrated Language Queryï¼Œç®€ç§° WINQï¼‰ï¼Œæ˜¯ WCDB çš„ä¸€é¡¹åŸºç¡€ç‰¹æ€§ã€‚å®ƒä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿé€šè¿‡ Swift çš„è¯­æ³•ç‰¹æ€§å»å®Œæˆ SQL è¯­å¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> objects: [<span class="type">Sample</span>] = <span class="keyword">try</span> database.getObjects(fromTable: <span class="string">"sampleTable"</span>, <span class="keyword">where</span>: <span class="type">Sample</span>.<span class="type">Properties</span>.idetifier &gt; <span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>è¯­è¨€é›†æˆæŸ¥è¯¢åŸºäºSQLiteçš„SQLè¯­æ³•çš„å®ç°ã€‚åªè¦æ˜¯SQLæ”¯æŒçš„è¯­å¥ï¼Œéƒ½èƒ½ä½¿ç”¨è¯­è¨€é›†æˆæŸ¥è¯¢å®Œæˆã€‚ä¹Ÿå› æ­¤ï¼Œè¯­è¨€é›†æˆæŸ¥è¯¢å…·æœ‰å’ŒSQLè¯­æ³•ä¸€æ ·çš„å¤æ‚æ€§ã€‚é€šè¿‡WCDBå¯ä»¥å°†å·²æœ‰çš„SQLè½¬æ¢ä¸ºè¯­è¨€é›†æˆæŸ¥è¯¢çš„å†™æ³•ã€‚</p>
<p>è¿™é‡Œæ˜¯å®˜æ–¹æ–‡æ¡£ <a href="https://github.com/Tencent/wcdb/wiki/Swift-%E8%AF%AD%E8%A8%80%E9%9B%86%E6%88%90%E6%9F%A5%E8%AF%A2" target="_blank" rel="external">ä¼ é€é—¨</a></p>
<h4 id="5-åŠ å¯†ä¸é…ç½®"><a href="#5-åŠ å¯†ä¸é…ç½®" class="headerlink" title="5.åŠ å¯†ä¸é…ç½®"></a>5.åŠ å¯†ä¸é…ç½®</h4><p>SQLite æ”¯æŒçš„é…ç½®åˆ—è¡¨å¯å‚è€ƒå…¶å®˜æ–¹æ–‡æ¡£ã€‚</p>
<p>é…ç½®ä¸»è¦ç”¨ä»¥æ§åˆ¶æ•°æ®åº“çš„æ“ä½œè¡Œä¸ºã€‚WCDBSwiftå¯¹SQLiteæ•°æ®åº“è¿›è¡Œäº†åŸºæœ¬çš„é…ç½®ä»¥æ»¡è¶³WCDBçš„éœ€æ±‚ã€‚åŒäº‹å¼€å‘è€…ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦ï¼Œè‡ªå®šä¹‰é…ç½®é¡¹ã€‚</p>
<p>åŠ å¯†åŠŸèƒ½å¯é€šè¿‡ setCipher(key:pageSize:) æ¥å£å¼€å¯ã€‚</p>
<p>å…¶ä¸­ï¼ŒpageSize æ˜¯åŠ å¯†çš„é¡µå¤§å°å‚æ•°ï¼ŒSQLCipher åœ¨ iOS ä¸Šé»˜è®¤ä½¿ç”¨ 4096ï¼ŒmacOS ä¸Šé»˜è®¤ä½¿ç”¨ 1024ã€‚è€Œ WCDB Swift åˆ™åœ¨æ‰€æœ‰å¹³å°ä¸Šéƒ½é€‚ç”¨ 4096ï¼Œä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚å¼€å‘è€…ä¸€èˆ¬ä¸éœ€è¦åšç‰¹åˆ«çš„ä¿®æ”¹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> database = <span class="type">Database</span>(withPath: filePath)</div><div class="line"><span class="keyword">let</span> password = <span class="string">"password"</span>.data(using: .ascii)</div><div class="line"></div><div class="line"><span class="comment">// è®¾ç½®åŠ å¯†æ¥å£åº”åœ¨å…¶ä»–æ‰€æœ‰è°ƒç”¨ä¹‹å‰è¿›è¡Œï¼Œå¦åˆ™ä¼šå› æ— æ³•è§£å¯†è€Œå‡ºé”™</span></div><div class="line">database.setCipher(key: password)</div><div class="line"></div><div class="line"><span class="keyword">try</span> database.insert(objects: object, intoTable: <span class="string">"sampleTable"</span>)</div></pre></td></tr></table></figure>
<p><strong>æ³¨æ„:å¼€å¯åŠ å¯†ä¼šæœ‰éƒ¨åˆ†æ€§èƒ½æŸè€—ã€‚</strong> å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè®¾ç½®å¯†ç æ˜¯ä¸€ä»¶å¾ˆæ…é‡çš„äº‹æƒ…ã€‚å¯¹äºå·²ç»åˆ›å»ºä¸”å­˜åœ¨æ•°æ®çš„æ•°æ®åº“ï¼Œæ— è®ºæ˜¯åŸæœ¬æœªåŠ å¯†æƒ³è¦æ”¹ä¸ºåŠ å¯†ï¼Œè¿˜æ˜¯å·²ç»åŠ å¯†æƒ³è¦ä¿®æ”¹å¯†ç ï¼Œéƒ½æ˜¯æˆæœ¬éå¸¸é«˜çš„æ“ä½œï¼Œå› æ­¤ä¸è¦è½»æ˜“ä½¿ç”¨ã€‚</p>
<h3 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h3><p>WCDBæœ¬èº«å°±æ˜¯å¾®ä¿¡å†…éƒ¨ä½¿ç”¨çš„æ•°æ®åº“å°è£…åº“ï¼Œè€Œä¸”å¼€æºä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼ŒåŠŸèƒ½ååˆ†å…¨é¢ï¼Œæ–‡æ¡£ä¹Ÿåˆ°ä½ï¼Œä¸Šæ‰‹è¿˜æ˜¯ååˆ†ç®€å•çš„ã€‚</p>
<p>åªæ˜¯æˆ‘åœ¨å†™Demoçš„æ—¶å€™æ‰äº†ä¸€ä¸ªå‘ï¼Œåå¤è°ƒè¯•ï¼Œå¹¶ä¸”å’Œç½‘ä¸Šçš„Demoä»£ç è¿›è¡Œæ¯”å¯¹ä¹‹åæ‰ç®—å‘ç°é—®é¢˜ã€‚åŸæ¥æ˜¯æˆ‘åœ¨å®šä¹‰å±æ€§çš„åŒæ—¶ç»™å®ƒèµ‹äº†å€¼ï¼Œå¯¼è‡´WCDBæ— æ³•æ˜ å°„å‡ºå­—æ®µåï¼Œä»è€Œå¼•å‘crashï¼Œæ—¥å¸¸å¼€å‘ä¸­å¯ä»¥é¿å…è¿™æ ·çš„é—®é¢˜ï¼Œæ‰€ä»¥å½±å“ä¸å¤§ã€‚</p>
<p>é™„ä¸Šæˆ‘å†™çš„ <a href="https://github.com/a1049145827/WCDBDemo.git" target="_blank" rel="external">Demoæºç </a></p>
<p>ä½¿ç”¨ORMçš„ä¾¿æ·æ€§è‡ªç„¶ä¸ç”¨è¯´ï¼Œç”¨è¿‡WCDBä¹‹åå¯èƒ½å†ä¹Ÿå›ä¸å»FMDBï¼Œæ‰‹å†™SQLè¯­å¥çš„æ—¶å€™äº†ï¼Œè¿™æ‰æ˜¯çœŸæ­£çš„ç¼–ç¨‹å•Šï¼ˆæ‰‹åŠ¨æ»‘ç¨½ï¼‰ã€‚</p>
<p>æ›´å¤šæ·±å…¥çš„ä½¿ç”¨æ–¹æ³•ï¼Œåœ¨åšä¸šåŠ¡çš„æ—¶å€™å¯èƒ½ä¼šç”¨åˆ°ï¼Œè¿™é‡Œæ˜¯WCDBçš„ <a href="https://tencent.github.io/wcdb/references/apple_swift/" target="_blank" rel="external">å®˜æ–¹æ¥å£æ–‡æ¡£</a></p>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/27/Swiftä»£ç é£æ ¼æŒ‡å—/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/27/Swiftä»£ç é£æ ¼æŒ‡å—/" itemprop="url">Swiftä»£ç é£æ ¼æŒ‡å—ï¼ˆè¯‘ï¼‰</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-27T14:27:46+08:00">
                2018-02-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOSå¼€å‘/" itemprop="url" rel="index">
                    <span itemprop="name">iOSå¼€å‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://github.com/linkedin/swift-style-guide#1-code-formatting" target="_blank" rel="external">åŸæ–‡é“¾æ¥ï¼š LinkedInâ€™s Official Swift Style Guide</a></p>
<p>è¯·åŠ¡å¿…é˜…è¯»Appleçš„APIè®¾è®¡æŒ‡å—ã€‚<br>ä»¥ä¸‹æåˆ°äº†è¿™äº›å‡†åˆ™çš„å…·ä½“å†…å®¹+å…¶ä»–è¯„è®ºã€‚<br>æœ¬æŒ‡å—äº2018å¹´2æœˆ14æ—¥æœ€åæ›´æ–°ä¸ºSwift 4.0ã€‚</p>
<ol>
<li><p>ä»£ç æ ¼å¼</p>
<ul>
<li>1.1 ä½¿ç”¨å››ä¸ªç©ºæ ¼è¿›è¡Œç¼©è¿›ã€‚</li>
<li>1.2 æ¯è¡Œæœ€å¤š160ä¸ªå­—ç¬¦ï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸€è¡Œè¿‡é•¿ã€‚ (Xcode-&gt;Preferences-&gt;Text Editing-&gt;Page guide at column: è®¾ç½®æˆ160å³å¯)</li>
<li>1.3 ç¡®ä¿æ¯ä¸ªæ–‡ä»¶ç»“å°¾éƒ½æœ‰ç©ºç™½è¡Œã€‚</li>
<li>1.4 ç¡®ä¿æ¯è¡Œéƒ½ä¸ä»¥ç©ºç™½å­—ç¬¦ä½œä¸ºç»“å°¾ ï¼ˆXcode-&gt;Preferences-&gt;Text Editing-&gt;Automatically trim trailing whitespace + Including whitespace-only lines).</li>
<li>1.5 å·¦å¤§æ‹¬å·ä¸ç”¨å¦èµ·ä¸€è¡Œã€‚ éµå®ˆ <a href="https://en.m.wikipedia.org/wiki/Indentation_style#1TBS" target="_blank" rel="external">1TBS é£æ ¼</a>.</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">someMethod</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">if</span> x == y &#123;</div><div class="line">            <span class="comment">/* ... */</span></div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> x == z &#123;</div><div class="line">            <span class="comment">/* ... */</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">/* ... */</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>1.6 å½“åœ¨å†™ä¸€ä¸ªå˜é‡ç±»å‹ï¼Œä¸€ä¸ªå­—å…¸é‡Œçš„ä¸»é”®ï¼Œä¸€ä¸ªå‡½æ•°çš„å‚æ•°ï¼Œéµä»ä¸€ä¸ªåè®®ï¼Œæˆ–ä¸€ä¸ªçˆ¶ç±»ï¼Œä¸ç”¨åœ¨åˆ†å·å‰æ·»åŠ ç©ºæ ¼ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æŒ‡å®šç±»å‹</span></div><div class="line"><span class="keyword">let</span> pirateViewController: <span class="type">PirateViewController</span></div><div class="line"><span class="comment">// å­—å…¸è¯­æ³•(æ³¨æ„è¿™é‡Œæ˜¯å‘å·¦å¯¹é½è€Œä¸æ˜¯åˆ†å·å¯¹é½)</span></div><div class="line"><span class="keyword">let</span> ninjaDictionary: [<span class="type">String</span>: <span class="type">AnyObject</span>] = [</div><div class="line">    <span class="string">"fightLikeDairyFarmer"</span>: <span class="literal">false</span>,</div><div class="line">    <span class="string">"disgusting"</span>: <span class="literal">true</span></div><div class="line">]</div><div class="line"><span class="comment">// å£°æ˜å‡½æ•°</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunction</span>&lt;t, u: someprotocol where t.relatedtype == u&gt;<span class="params">(firstArgument: U, secondArgument: T)</span></span> &#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// è°ƒç”¨å‡½æ•°</span></div><div class="line">someFunction(someArgument: <span class="string">"Kitten"</span>)</div><div class="line"><span class="comment">// çˆ¶ç±»</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PirateViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// åè®®</span></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">PirateViewController</span>: <span class="title">UITableViewDataSource</span> </span>&#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>1.7 åŸºæœ¬æ¥è¯´ï¼Œè¦åœ¨é€—å·åé¢åŠ ç©ºæ ¼ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> myArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div></pre></td></tr></table></figure>
<ul>
<li>1.8 äºŒå…ƒè¿ç®—ç¬¦(+, ==, æˆ– -&gt;)çš„å‰åéƒ½éœ€è¦æ·»åŠ ç©ºæ ¼ï¼Œå·¦å°æ‹¬å·åé¢å’Œå³å°æ‹¬å·å‰é¢ä¸éœ€è¦ç©ºæ ¼ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> myValue = <span class="number">20</span> + (<span class="number">30</span> / <span class="number">2</span>) * <span class="number">3</span></div><div class="line"><span class="keyword">if</span> <span class="number">1</span> + <span class="number">1</span> == <span class="number">3</span> &#123;</div><div class="line">    <span class="built_in">fatalError</span>(<span class="string">"The universe is broken."</span>)</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">pancake</span><span class="params">(with syrup: Syrup)</span></span> -&gt; <span class="type">Pancake</span> &#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>1.9 éµå®ˆXcodeå†…ç½®çš„ç¼©è¿›æ ¼å¼ï¼ˆå¦‚æœå·²ç»éµå®ˆï¼ŒæŒ‰ä¸‹CTRL-i ç»„åˆé”®æ–‡ä»¶æ ¼å¼æ²¡æœ‰å˜åŒ–ï¼‰ã€‚å½“å£°æ˜çš„ä¸€ä¸ªå‡½æ•°éœ€è¦è·¨å¤šè¡Œæ—¶ï¼Œæ¨èä½¿ç”¨Xcodeé»˜è®¤çš„æ ¼å¼ï¼Œä»¥ Xcode7.3 ä¸ºä¾‹ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Xcodeé’ˆå¯¹è·¨å¤šè¡Œå‡½æ•°å£°æ˜ç¼©è¿›</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunctionWithManyParameters</span><span class="params">(parameterOne: String,</span></span></div><div class="line"><span class="function"><span class="params">                                  parameterTwo: String,</span></span></div><div class="line"><span class="function"><span class="params">                                  parameterThree: String)</span></span> &#123;</div><div class="line">    <span class="comment">// Xcodeä¼šè‡ªåŠ¨ç¼©è¿›</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"\(parameterOne) \(parameterTwo) \(parameterThree)"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Xcodeé’ˆå¯¹å¤šè¡Œ if è¯­å¥çš„ç¼©è¿›</span></div><div class="line"><span class="keyword">if</span> myFirstVariable &gt; (mySecondVariable + myThirdVariable)</div><div class="line">    &amp;&amp; myFourthVariable == .<span class="type">SomeEnumValue</span> &#123;</div><div class="line">    <span class="comment">// Xcodeä¼šè‡ªåŠ¨ç¼©è¿›</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"Hello, World!"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>1.10 å½“è°ƒç”¨çš„å‡½æ•°æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼Œæ¯ä¸€ä¸ªå‚æ•°å¦èµ·ä¸€è¡Œï¼Œå¹¶æ¯”å‡½æ•°åå¤šä¸€ä¸ªç¼©è¿›ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">someFunctionWithManyArguments(</div><div class="line">    firstArgument: <span class="string">"Hello, I am a string"</span>,</div><div class="line">    secondArgument: resultFromSomeFunction(),</div><div class="line">    thirdArgument: someOtherLocalProperty)</div></pre></td></tr></table></figure>
<ul>
<li>1.11 å½“é‡åˆ°éœ€è¦å¤„ç†çš„æ•°ç»„æˆ–å­—å…¸å†…å®¹è¾ƒå¤šéœ€è¦å¤šè¡Œæ˜¾ç¤ºæ—¶ï¼Œéœ€æŠŠ [ å’Œ ] ç±»ä¼¼äºæ–¹æ³•ä½“é‡Œçš„æ‹¬å·ï¼Œ æ–¹æ³•ä½“é‡Œçš„é—­åŒ…ä¹Ÿè¦åšç±»ä¼¼å¤„ç†ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">someFunctionWithABunchOfArguments(</div><div class="line">    someStringArgument: <span class="string">"hello I am a string"</span>,</div><div class="line">    someArrayArgument: [</div><div class="line">        <span class="string">"dadada daaaa daaaa dadada daaaa daaaa dadada daaaa daaaa"</span>,</div><div class="line">        <span class="string">"string one is crazy - what is it thinking?"</span></div><div class="line">    ],</div><div class="line">    someDictionaryArgument: [</div><div class="line">        <span class="string">"dictionary key 1"</span>: <span class="string">"some value 1, but also some more text here"</span>,</div><div class="line">        <span class="string">"dictionary key 2"</span>: <span class="string">"some value 2"</span></div><div class="line">    ],</div><div class="line">    someClosure: &#123; parameter1 <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(parameter1)</div><div class="line">    &#125;)</div></pre></td></tr></table></figure>
<ul>
<li>1.12 åº”å°½é‡é¿å…å‡ºç°å¤šè¡Œæ–­è¨€ï¼Œå¯ä½¿ç”¨æœ¬åœ°å˜é‡æˆ–å…¶ä»–ç­–ç•¥ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨è</span></div><div class="line"><span class="keyword">let</span> firstCondition = x == firstReallyReallyLongPredicateFunction()</div><div class="line"><span class="keyword">let</span> secondCondition = y == secondReallyReallyLongPredicateFunction()</div><div class="line"><span class="keyword">let</span> thirdCondition = z == thirdReallyReallyLongPredicateFunction()</div><div class="line"><span class="keyword">if</span> firstCondition &amp;&amp; secondCondition &amp;&amp; thirdCondition &#123;</div><div class="line">    <span class="comment">// do something</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="keyword">if</span> x == firstReallyReallyLongPredicateFunction()</div><div class="line">    &amp;&amp; y == secondReallyReallyLongPredicateFunction()</div><div class="line">    &amp;&amp; z == thirdReallyReallyLongPredicateFunction() &#123;</div><div class="line">    <span class="comment">// do something</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>å‘½å</p>
<ul>
<li><p>2.1 åœ¨Swiftä¸­ä¸ç”¨å¦‚Objective-Cå¼ ä¸€æ ·æ·»åŠ å‰ç¼€ (å¦‚ä½¿ç”¨ GuybrushThreepwoode è€Œä¸æ˜¯ LIGuybrushThreepwood)ã€‚</p>
</li>
<li><p>2.2 ä½¿ç”¨å¸•æ–¯å¡æ‹¼å†™æ³•ï¼ˆåˆåå¤§éª†é©¼æ‹¼å†™æ³•ï¼Œé¦–å­—æ¯å¤§å†™ï¼‰ä¸ºç±»å‹å‘½å (å¦‚ struct, enum, class, typedef, associatedtype ç­‰)ã€‚</p>
</li>
<li><p>2.3 ä½¿ç”¨å°éª†é©¼æ‹¼å†™æ³• (é¦–å­—æ¯å°å†™) ä¸ºå‡½æ•°ï¼Œæ–¹æ³•ï¼Œå˜é‡ï¼Œå¸¸é‡ï¼Œå‚æ•°ç­‰å‘½åã€‚</p>
</li>
<li><p>2.4 é¦–å­—æ¯ç¼©ç•¥è¯åœ¨å‘½åä¸­ä¸€èˆ¬æ¥è¯´éƒ½æ˜¯å…¨éƒ¨å¤§å†™ï¼Œä¾‹å¤–çš„æƒ…å½¢æ˜¯å¦‚æœé¦–å­—æ¯ç¼©ç•¥è¯æ˜¯ä¸€ä¸ªå‘½åçš„å¼€å§‹éƒ¨åˆ†ï¼Œè€Œè¿™ä¸ªå‘½åéœ€è¦å°å†™å­—æ¯ä½œä¸ºå¼€å¤´ï¼Œè¿™ç§æƒ…å½¢ä¸‹é¦–å­—æ¯ç¼©ç•¥è¯å…¨éƒ¨å°å†™ã€‚</p>
</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// "HTML" æ˜¯å˜é‡åçš„å¼€å¤´, éœ€è¦å…¨éƒ¨å°å†™ "html"</span></div><div class="line"><span class="keyword">let</span> htmlBodyContent: <span class="type">String</span> = <span class="string">"&lt;p&gt;Hello, World!&lt;/p&gt;"</span></div><div class="line"><span class="comment">// æ¨èä½¿ç”¨ ID è€Œä¸æ˜¯ Id</span></div><div class="line"><span class="keyword">let</span> profileID: <span class="type">Int</span> = <span class="number">1</span></div><div class="line"><span class="comment">// æ¨èä½¿ç”¨ URLFinder è€Œä¸æ˜¯ UrlFinder</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">URLFinder</span> </span>&#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>2.5 æ‰€æœ‰ä¸å®ä¾‹æ— å…³çš„å¸¸é‡åº”è¯¥æ˜¯é™æ€çš„ã€‚æ‰€æœ‰è¿™äº›é™æ€å¸¸é‡åº”æ”¾ç½®åœ¨å®ƒä»¬çš„ç±»ï¼Œç»“æ„æˆ–æšä¸¾çš„æ ‡è®°éƒ¨åˆ†ä¸­ã€‚ å¯¹äºæœ‰è®¸å¤šå¸¸é‡çš„ç±»ï¼Œåº”è¯¥å¯¹å…·æœ‰ç›¸ä¼¼æˆ–ç›¸åŒå‰ç¼€ï¼Œåç¼€ å’Œ/æˆ– ç”¨ä¾‹çš„å¸¸é‡è¿›è¡Œåˆ†ç»„ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨è</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClassName</span> </span>&#123;</div><div class="line">    <span class="comment">// MARK: - å¸¸é‡</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">let</span> buttonPadding: <span class="type">CGFloat</span> = <span class="number">20.0</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">let</span> indianaPi = <span class="number">3</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">let</span> shared = <span class="type">MyClassName</span>()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClassName</span> </span>&#123;</div><div class="line">    <span class="comment">// ä¸è¦å¸¦ `k` å‰ç¼€</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">let</span> kButtonPadding: <span class="type">CGFloat</span> = <span class="number">20.0</span></div><div class="line"></div><div class="line">    <span class="comment">// ä¸è¦ä½¿ç”¨ Constants åšä¸ºå‘½åç©ºé—´</span></div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Constant</span> </span>&#123;</div><div class="line">        <span class="keyword">static</span> <span class="keyword">let</span> indianaPi = <span class="number">3</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>2.6 å¯¹äºæ³›å‹å’Œå…³è”ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨å•ä¸ªå¤§å†™å­—æ¯ï¼Œä¹Ÿå¯æ˜¯éµä»å¤§éª†é©¼å‘½åæ–¹å¼å¹¶èƒ½æè¿°æ³›å‹çš„å•è¯ã€‚å¦‚æœè¿™ä¸ªå•è¯å’Œè¦å®ç°çš„åè®®æˆ–ç»§æ‰¿çš„çˆ¶ç±»æœ‰å†²çªï¼Œå¯ä»¥ä¸ºç›¸å…³ç±»å‹æˆ–æ³›å‹åå­—æ·»åŠ  Type ä½œä¸ºåç¼€ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span>&lt;<span class="title">Model</span>&gt; </span>&#123; <span class="comment">/* ... */</span> &#125;</div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Modelable</span> </span>&#123;</div><div class="line">    associatedtype <span class="type">Model</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Sequence</span> </span>&#123;</div><div class="line">    associatedtype <span class="type">IteratorType</span>: <span class="type">Iterator</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>2.7 å‘½ååº”è¯¥å…·æœ‰æè¿°æ€§å¹¶ä¸”æ˜¯æ˜ç¡®çš„ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨è</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RoundAnimatingButton</span>: <span class="title">UIButton</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomButton</span>: <span class="title">UIButton</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</div></pre></td></tr></table></figure>
<ul>
<li>2.8 ä¸è¦ç¼©å†™ï¼Œç®€å†™å‘½åï¼Œæˆ–ç”¨å•ä¸ªå­—æ¯å‘½åã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨è</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RoundAnimatingButton</span>: <span class="title">UIButton</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> animationDuration: <span class="type">NSTimeInterval</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">startAnimating</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> firstSubview = subviews.first</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RoundAnimating</span>: <span class="title">UIButton</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> aniDur: <span class="type">NSTimeInterval</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">srtAnmating</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> v = subviews.first</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>2.9 å¦‚æœåŸæœ‰å‘½åä¸èƒ½æ˜æ˜¾è¡¨æ˜ç±»å‹ï¼Œåˆ™å±æ€§å‘½åå†…è¦åŒ…æ‹¬ç±»å‹ä¿¡æ¯ã€‚</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨è</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConnectionTableViewCell</span>: <span class="title">UITableViewCell</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> personImageView: <span class="type">UIImageView</span></div><div class="line">    <span class="keyword">let</span> animationDuration: <span class="type">NSTimeInterval</span></div><div class="line">    <span class="comment">// ä½œä¸ºå±æ€§åçš„firstNameï¼Œå¾ˆæ˜æ˜¾æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ‰€ä»¥ä¸ç”¨åœ¨å‘½åé‡Œä¸ç”¨åŒ…å«String</span></div><div class="line">    <span class="keyword">let</span> firstName: <span class="type">String</span></div><div class="line">    <span class="comment">// è™½ç„¶ä¸æ¨è, è¿™é‡Œç”¨ Controller ä»£æ›¿ ViewController ä¹Ÿå¯ä»¥ã€‚</span></div><div class="line">    <span class="keyword">let</span> popupController: <span class="type">UIViewController</span></div><div class="line">    <span class="keyword">let</span> popupViewController: <span class="type">UIViewController</span></div><div class="line">    <span class="comment">// å¦‚æœéœ€è¦ä½¿ç”¨UIViewControllerçš„å­ç±»ï¼Œå¦‚TableViewController, CollectionViewController, SplitViewController, ç­‰ï¼Œéœ€è¦åœ¨å‘½åé‡Œæ ‡åç±»å‹ã€‚</span></div><div class="line">    <span class="keyword">let</span> popupTableViewController: <span class="type">UITableViewController</span></div><div class="line">    <span class="comment">// å½“ä½¿ç”¨outletsæ—¶, ç¡®ä¿å‘½åä¸­æ ‡æ³¨ç±»å‹ã€‚</span></div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> submitButton: <span class="type">UIButton</span>!</div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> emailTextField: <span class="type">UITextField</span>!</div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> nameLabel: <span class="type">UILabel</span>!</div><div class="line">&#125;</div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConnectionTableViewCell</span>: <span class="title">UITableViewCell</span> </span>&#123;</div><div class="line">    <span class="comment">// è¿™ä¸ªä¸æ˜¯ UIImage, ä¸åº”è¯¥ä»¥Image ä¸ºç»“å°¾å‘½åã€‚</span></div><div class="line">    <span class="comment">// å»ºè®®ä½¿ç”¨ personImageView</span></div><div class="line">    <span class="keyword">let</span> personImage: <span class="type">UIImageView</span></div><div class="line">    <span class="comment">// è¿™ä¸ªä¸æ˜¯Stringï¼Œåº”è¯¥å‘½åä¸º textLabel</span></div><div class="line">    <span class="keyword">let</span> text: <span class="type">UILabel</span></div><div class="line">    <span class="comment">// animation ä¸èƒ½æ¸…æ™°è¡¨è¾¾å‡ºæ—¶é—´é—´éš”</span></div><div class="line">    <span class="comment">// å»ºè®®ä½¿ç”¨ animationDuration æˆ– animationTimeInterval</span></div><div class="line">    <span class="keyword">let</span> animation: <span class="type">NSTimeInterval</span></div><div class="line">    <span class="comment">// transition ä¸èƒ½æ¸…æ™°è¡¨è¾¾å‡ºæ˜¯String</span></div><div class="line">    <span class="comment">// å»ºè®®ä½¿ç”¨ transitionText æˆ– transitionString</span></div><div class="line">    <span class="keyword">let</span> transition: <span class="type">String</span></div><div class="line">    <span class="comment">// è¿™ä¸ªæ˜¯ViewControllerï¼Œä¸æ˜¯View</span></div><div class="line">    <span class="keyword">let</span> popupView: <span class="type">UIViewController</span></div><div class="line">    <span class="comment">// ç”±äºä¸å»ºè®®ä½¿ç”¨ç¼©å†™ï¼Œè¿™é‡Œå»ºè®®ä½¿ç”¨ ViewControlleræ›¿æ¢ VC</span></div><div class="line">    <span class="keyword">let</span> popupVC: <span class="type">UIViewController</span></div><div class="line">    <span class="comment">// æŠ€æœ¯ä¸Šè®²è¿™ä¸ªå˜é‡æ˜¯ UIViewController, ä½†åº”è¯¥è¡¨è¾¾å‡ºè¿™ä¸ªå˜é‡æ˜¯TableViewController</span></div><div class="line">    <span class="keyword">let</span> popupViewController: <span class="type">UITableViewController</span></div><div class="line">    <span class="comment">// ä¸ºäº†ä¿æŒä¸€è‡´æ€§ï¼Œå»ºè®®æŠŠç±»å‹æ”¾åˆ°å˜é‡çš„ç»“å°¾ï¼Œè€Œä¸æ˜¯å¼€å§‹ï¼Œå¦‚submitButton</span></div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> btnSubmit: <span class="type">UIButton</span>!</div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> buttonSubmit: <span class="type">UIButton</span>!</div><div class="line">    <span class="comment">// åœ¨ä½¿ç”¨outlets æ—¶ï¼Œå˜é‡åå†…åº”åŒ…å«ç±»å‹åã€‚</span></div><div class="line">    <span class="comment">// è¿™é‡Œå»ºè®®ä½¿ç”¨ firstNameLabel</span></div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> firstName: <span class="type">UILabel</span>!</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>2.10 å½“ç»™å‡½æ•°å‚æ•°å‘½åæ—¶ï¼Œè¦ç¡®ä¿å‡½æ•°æ˜“è¯»ä¸”èƒ½ç†è§£æ¯ä¸ªå‚æ•°çš„ç›®çš„ã€‚</p>
</li>
<li><p>2.11 æ ¹æ®è‹¹æœæ¥å£è®¾è®¡æŒ‡å¯¼æ–‡æ¡£, å¦‚æœåè®®æè¿°çš„æ˜¯åè®®åšçš„äº‹åº”è¯¥å‘½åä¸ºåè¯(å¦‚Collection) ï¼Œå¦‚æœæè¿°çš„æ˜¯è¡Œä¸ºï¼Œéœ€æ·»åŠ åç¼€ able æˆ– ing (å¦‚Equatable å’Œ ProgressReporting)ã€‚ å¦‚æœä¸Šè¿°ä¸¤è€…éƒ½ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œå¯ä»¥æ·»åŠ Protocolä½œä¸ºåç¼€ï¼Œä¾‹å­è§ä¸‹é¢ã€‚</p>
</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è¿™ä¸ªåè®®æè¿°çš„æ˜¯åè®®èƒ½åšçš„äº‹ï¼Œåº”è¯¥å‘½åä¸ºåè¯</span></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">TableViewSectionProvider</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">rowHeight</span><span class="params">(at row: Int)</span></span> -&gt; <span class="type">CGFloat</span></div><div class="line">    <span class="keyword">var</span> numberOfRows: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// è¿™ä¸ªåè®®è¡¨è¾¾çš„æ˜¯è¡Œä¸º, åº”è¯¥å‘½åä¸º appropriately</span></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Loggable</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">logCurrentState</span><span class="params">()</span></span></div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª `InputTextView` ç±»ï¼Œä½†æˆ‘ä»¬ä¹Ÿæƒ³è¦ä¸€ä¸ªåè®®ã€‚</span></div><div class="line"><span class="comment">// è¦æ¦‚æ‹¬æŸäº›åŠŸèƒ½ï¼Œå®ƒå¯èƒ½æ˜¯åˆé€‚çš„</span></div><div class="line"><span class="comment">// å¯ä»¥æ·»åŠ  `Protocol` ä½œä¸ºåç¼€</span></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">InputTextViewProtocol</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sendTrackingEvent</span><span class="params">()</span></span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">inputText</span><span class="params">()</span></span> -&gt; <span class="type">String</span></div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>ä»£ç é£æ ¼</p>
<ul>
<li><p>3.1 å¸¸è§„èŒƒå¼<br>3.1.1 å°½å¯èƒ½çš„å¤šä½¿ç”¨letï¼Œå°‘ä½¿ç”¨varã€‚</p>
<p>3.1.2 å½“éœ€è¦éå†ä¸€ä¸ªé›†åˆå¹¶å˜å½¢æˆå¦ä¸€ä¸ªé›†åˆæ—¶ï¼Œæ¨èä½¿ç”¨å‡½æ•° map, filter å’Œ reduceã€‚ä½¿ç”¨è¿™äº›æ–¹æ³•æ—¶ä¸€å®šè¦é¿å…ä½¿ç”¨æœ‰å¼‚å¸¸æŠ›å‡ºçš„é—­åŒ…ã€‚ï¼ˆæ³¨ï¼šç¿»è¯‘ä¸ä¸€å®šå‡†ç¡®ï¼‰</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨è</span></div><div class="line"><span class="keyword">let</span> stringOfInts = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].flatMap &#123; <span class="type">String</span>($<span class="number">0</span>) &#125;</div><div class="line"><span class="comment">// ["1", "2", "3"]</span></div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="keyword">var</span> stringOfInts: [<span class="type">String</span>] = []</div><div class="line"><span class="keyword">for</span> integer <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] &#123;</div><div class="line">    stringOfInts.append(<span class="type">String</span>(integer))</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// æ¨è</span></div><div class="line"><span class="keyword">let</span> evenNumbers = [<span class="number">4</span>, <span class="number">8</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">23</span>, <span class="number">42</span>].<span class="built_in">filter</span> &#123; $<span class="number">0</span> % <span class="number">2</span> == <span class="number">0</span> &#125;</div><div class="line"><span class="comment">// [4, 8, 16, 42]</span></div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="keyword">var</span> evenNumbers: [<span class="type">Int</span>] = []</div><div class="line"><span class="keyword">for</span> integer <span class="keyword">in</span> [<span class="number">4</span>, <span class="number">8</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">23</span>, <span class="number">42</span>] &#123;</div><div class="line">    <span class="keyword">if</span> integer % <span class="number">2</span> == <span class="number">0</span> &#123;</div><div class="line">        evenNumbers.append(integer)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.1.3 å¦‚æœå˜é‡ç±»å‹å¯ä»¥ä¾é æ¨æ–­å¾—å‡ºï¼Œä¸å»ºè®®å£°æ˜å˜é‡æ—¶æŒ‡æ˜ç±»å‹ã€‚</p>
<p>3.1.4 å¦‚æœä¸€ä¸ªå‡½æ•°æœ‰å¤šä¸ªè¿”å›å€¼ï¼Œæ¨èä½¿ç”¨ å…ƒç»„ è€Œä¸æ˜¯ inout å‚æ•°ï¼Œ å¦‚æœä½ è§åˆ°ä¸€ä¸ªå…ƒç»„å¤šæ¬¡ï¼Œå»ºè®®ä½¿ç”¨typealias ï¼Œè€Œå¦‚æœè¿”å›çš„å…ƒç»„æœ‰ä¸‰ä¸ªæˆ–å¤šäºä¸‰ä¸ªä»¥ä¸Šçš„å…ƒç´ ï¼Œå»ºè®®ä½¿ç”¨ç»“æ„ä½“æˆ–ç±»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">pirateName</span><span class="params">()</span></span> -&gt; (firstName: <span class="type">String</span>, lastName: <span class="type">String</span>) &#123;</div><div class="line">    <span class="keyword">return</span> (<span class="string">"Guybrush"</span>, <span class="string">"Threepwood"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> name = pirateName()</div><div class="line"><span class="keyword">let</span> firstName = name.firstName</div><div class="line"><span class="keyword">let</span> lastName = name.lastName</div></pre></td></tr></table></figure>
<p>3.1.5 å½“ä½¿ç”¨å§”æ‰˜å’Œåè®®æ—¶ï¼Œè¯·æ³¨æ„é¿å…å‡ºç°å¾ªç¯å¼•ç”¨ï¼ŒåŸºæœ¬ä¸Šæ˜¯åœ¨å®šä¹‰å±æ€§çš„æ—¶å€™ä½¿ç”¨ weak ä¿®é¥°ã€‚</p>
<p>3.1.6 åœ¨é—­åŒ…é‡Œä½¿ç”¨ self çš„æ—¶å€™è¦æ³¨æ„å‡ºç°å¾ªç¯å¼•ç”¨ï¼Œä½¿ç”¨æ•è·åˆ—è¡¨å¯ä»¥é¿å…è¿™ä¸€ç‚¹:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">myFunctionWithEscapingClosure() &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (error) -&gt; <span class="type">Void</span> <span class="keyword">in</span></div><div class="line">    <span class="comment">// æ–¹æ¡ˆ 1</span></div><div class="line"></div><div class="line">    <span class="keyword">self</span>?.doSomething()</div><div class="line"></div><div class="line">    <span class="comment">// æ–¹æ¡ˆ 2</span></div><div class="line"></div><div class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> strongSelf = <span class="keyword">self</span> <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    strongSelf.doSomething()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.1.7 Switch æ¨¡å—ä¸­ä¸ç”¨æ˜¾å¼ä½¿ç”¨breakã€‚</p>
<p>3.1.8 æ–­è¨€æµç¨‹æ§åˆ¶çš„æ—¶å€™ä¸è¦ä½¿ç”¨å°æ‹¬å·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨è</span></div><div class="line"><span class="keyword">if</span> x == y &#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="keyword">if</span> (x == y) &#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.1.9 åœ¨å†™æšä¸¾ç±»å‹çš„æ—¶å€™ï¼Œå°½é‡ç®€å†™ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨è</span></div><div class="line">imageView.setImageWithURL(url, type: .person)</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line">imageView.setImageWithURL(url, type: <span class="type">AsyncImageView</span>.<span class="type">Type</span>.person)</div></pre></td></tr></table></figure>
<p>3.1.10 åœ¨ä½¿ç”¨ç±»æ–¹æ³•çš„æ—¶å€™ä¸ç”¨ç®€å†™ï¼Œå› ä¸ºç±»æ–¹æ³•ä¸å¦‚ æšä¸¾ ç±»å‹ä¸€æ ·ï¼Œå¯ä»¥æ ¹æ®è½»æ˜“åœ°æ¨å¯¼å‡ºä¸Šä¸‹æ–‡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨è</span></div><div class="line">imageView.backgroundColor = <span class="type">UIColor</span>.white</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line">imageView.backgroundColor = .white</div></pre></td></tr></table></figure>
<p>3.1.11 éå¿…é¡»æƒ…å†µä¸‹ä¸å»ºè®®ä½¿ç”¨selfä¿®é¥°ï¼ˆè°ƒç”¨å±æ€§æˆ–æ–¹æ³•ï¼‰ã€‚</p>
<p>3.1.12 åœ¨æ–°å†™ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œéœ€è¦è¡¡é‡è¿™ä¸ªæ–¹æ³•æ˜¯å¦å°†æ¥ä¼šè¢«é‡å†™ï¼Œå¦‚æœä¸æ˜¯ï¼Œè¯·ç”¨ final å…³é”®è¯ä¿®é¥°ï¼Œè¿™æ ·é˜»æ­¢æ–¹æ³•è¢«é‡å†™ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œfinal æ–¹æ³•å¯ä»¥ä¼˜åŒ–ç¼–è¯‘é€Ÿåº¦ï¼Œåœ¨åˆé€‚çš„æ—¶å€™å¯ä»¥å¤§èƒ†ä½¿ç”¨å®ƒã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸€ä¸ªå…¬å¼€å‘å¸ƒçš„ä»£ç åº“ä¸­ä½¿ç”¨ final å’Œæœ¬åœ°é¡¹ç›®ä¸­ä½¿ç”¨ final çš„å½±å“å·®åˆ«å¾ˆå¤§çš„ã€‚</p>
<p>3.1.13 åœ¨ä½¿ç”¨ä¸€äº›è¯­å¥å¦‚ elseï¼Œcatchç­‰ç´§éšä»£ç å—çš„å…³é”®è¯çš„æ—¶å€™ï¼Œç¡®ä¿ä»£ç å—å’Œå…³é”®è¯åœ¨åŒä¸€è¡Œã€‚ä¸‹é¢æ˜¯ if/else å’Œ do/catch çš„ä¾‹å­ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> someBoolean &#123;</div><div class="line">    <span class="comment">// do something</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// do something else</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">let</span> fileContents = <span class="keyword">try</span> readFile(<span class="string">"filename.txt"</span>)</div><div class="line">&#125; <span class="keyword">catch</span> &#123;</div><div class="line">    <span class="built_in">print</span>(error)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.1.14 å½“å£°æ˜ä¸€ä¸ªä¸ç±»ç›¸å…³çš„å‡½æ•°æˆ–å±æ€§ï¼Œè€Œä¸æ˜¯è¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹çš„æ—¶å€™ï¼Œæ¨èä½¿ç”¨staticå…³é”®å­—è¿›è¡Œé™å®šã€‚åªæœ‰å½“æ‚¨ç‰¹åˆ«éœ€è¦åœ¨å­ç±»ä¸­é‡å†™è¯¥å‡½æ•°æˆ–å±æ€§çš„åŠŸèƒ½æ—¶ï¼Œæ‰ä½¿ç”¨ç±»ï¼Œä¸è¿‡è¦è€ƒè™‘ä½¿ç”¨åè®®æ¥å®ç°æ­¤åŠŸèƒ½ã€‚</p>
<p>3.1.15 å¦‚æœä½ æœ‰ä¸€ä¸ªå‡½æ•°ä¸å¸¦ä»»ä½•å‚æ•°ï¼Œæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶ä¸”è¿”å›äº†å¯¹è±¡æˆ–å€¼ï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨ä¸€ä¸ªè®¡ç®—å±æ€§ã€‚</p>
</li>
<li><p>3.2 è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦<br>3.2.1 å¦‚æœéœ€è¦ï¼ˆè®¿é—®ä¿®é¥°ç¬¦ï¼‰ï¼ŒæŠŠè®¿é—®ä¿®é¥°ç¬¦æ”¾åˆ°ç¬¬ä¸€ä¸ªä½ç½®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨è</span></div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">let</span> myPrivateNumber: <span class="type">Int</span></div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">private</span> <span class="keyword">let</span> myPrivateNumber: <span class="type">Int</span></div></pre></td></tr></table></figure>
<p>3.2.2 è®¿é—®ä¿®é¥°ç¬¦ä¸åº”å•ç‹¬å¦èµ·ä¸€è¡Œï¼Œåº”å’Œè®¿é—®ä¿®é¥°ç¬¦æè¿°çš„å¯¹è±¡ä¿æŒåœ¨åŒä¸€è¡Œã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨è</span></div><div class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">Pirate</span> </span>&#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="keyword">open</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pirate</span> </span>&#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.2.3 internal æ˜¯é»˜è®¤çš„è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦ï¼Œå¯ä»¥çœç•¥ä¸å†™ã€‚</p>
<p>3.2.4 å½“ä¸€ä¸ªå˜é‡éœ€è¦è¢«å•å…ƒæµ‹è¯• è®¿é—®æ—¶ï¼Œéœ€è¦å£°æ˜ä¸º internal ç±»å‹æ¥ä½¿ç”¨@testable import {ModuleName}ã€‚ å¦‚æœä¸€ä¸ªå˜é‡å®é™…ä¸Šæ˜¯private ç±»å‹ï¼Œè€Œå› ä¸ºå•å…ƒæµ‹è¯•éœ€è¦è¢«å£°æ˜ä¸º internal ç±»å‹ï¼Œç¡®å®šæ·»åŠ åˆé€‚çš„æ³¨é‡Šæ–‡æ¡£æ¥è§£é‡Šä¸ºä»€ä¹ˆè¿™ä¹ˆåšã€‚è¿™é‡Œæ·»åŠ æ³¨é‡Šæ¨èä½¿ç”¨ - warning: æ ‡è®°è¯­æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> è¿™ä¸ªå˜é‡æ˜¯ pirateName</span></div><div class="line"><span class="comment"> - warning: å®šä¹‰ä¸º internal è€Œä¸æ˜¯ private ä¸ºäº† `@testable`ã€‚</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">let</span> pirateName = <span class="string">"LeChuck"</span></div></pre></td></tr></table></figure>
<p>3.2.5 æ¨èç”¨ private ä¿®é¥°å±æ€§ï¼Œè€Œä¸æ˜¯ fileprivateã€‚</p>
<p>3.2.6 å½“åœ¨ public å’Œ open ä¹‹é—´è¿›è¡Œé€‰æ‹©æ—¶ï¼Œå¦‚æœæ‚¨æƒ³è¦åœ¨ç»™å®šçš„æ¨¡å—å’Œ public ä¹‹å¤–çš„å…¶ä»–åœ°æ–¹å¯ä»¥è¿›è¡Œå­ç±»åŒ–ï¼Œé‚£ä¹ˆå°±é€‰æ‹© openã€‚è¯·æ³¨æ„ï¼Œä»»ä½•å¤§äº internal è®¿é—®æƒé™çš„å†…å®¹éƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨ @testable å¯¼å…¥è¿›è¡Œæµ‹è¯•ï¼Œæ‰€ä»¥è¿™ä¸æ˜¯ä½¿ç”¨ open çš„ç†ç”±ã€‚æ€»çš„æ¥è¯´ï¼Œå½“æ¶‰åŠåˆ°åº“æ—¶ï¼Œæ¨èä½¿ç”¨ openï¼Œä½†åœ¨ä»£ç åº“ä¸­çš„æ¨¡å—(æ¯”å¦‚åº”ç”¨ç¨‹åºä¸­ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°åŒæ—¶æ›´æ”¹å¤šä¸ªæ¨¡å—çš„å†…å®¹)æ—¶ï¼Œç¨å¾®ä¿å®ˆä¸€äº›ã€‚</p>
</li>
<li><p>3.3 è‡ªå®šä¹‰æ“ä½œç¬¦<br>ä¸æ¨èä½¿ç”¨è‡ªå®šä¹‰æ“ä½œç¬¦ï¼Œå¦‚æœéœ€è¦åˆ›å»ºå‡½æ•°æ¥æ›¿ä»£ã€‚<br>åœ¨é‡å†™æ“ä½œç¬¦ä¹‹å‰ï¼Œè¯·æ…é‡è€ƒè™‘æ˜¯å¦æœ‰å……åˆ†çš„ç†ç”±ä¸€å®šè¦åœ¨å…¨å±€èŒƒå›´å†…åˆ›å»ºæ–°çš„æ“ä½œç¬¦ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å…¶ä»–ç­–ç•¥ã€‚<br>ä½ å¯ä»¥é‡è½½ç°æœ‰çš„æ“ä½œç¬¦æ¥æ”¯æŒæ–°çš„ç±»å‹(ç‰¹åˆ«æ˜¯ ==)ï¼Œä½†æ˜¯æ–°å®šä¹‰çš„å¿…é¡»ä¿ç•™æ“ä½œç¬¦çš„åŸæ¥å«ä¹‰ï¼Œæ¯”å¦‚ == å¿…é¡»ç”¨æ¥æµ‹è¯•æ˜¯å¦ç›¸ç­‰å¹¶è¿”å›å¸ƒå°”å€¼ã€‚</p>
</li>
<li><p>3.4 Switchè¯­å¥ å’Œ æšä¸¾<br>3.4.1 åœ¨ä½¿ç”¨ Switch è¯­å¥æ—¶ï¼Œå¦‚æœé€‰é¡¹æ˜¯æœ‰é™é›†åˆæ—¶ï¼Œä¸è¦ä½¿ç”¨defaultï¼Œç›¸ååœ°ï¼ŒæŠŠä¸€äº›ä¸ç”¨çš„é€‰é¡¹æ”¾åˆ°åº•éƒ¨ï¼Œå¹¶ç”¨ breakå…³é”®å­— é˜»æ­¢å…¶æ‰§è¡Œã€‚</p>
<p>3.4.2 å› ä¸ºSwift é‡Œ switch ä¸­çš„é€‰é¡¹é»˜è®¤æ˜¯åŒ…å«breakçš„ï¼Œå¦‚æœä¸éœ€è¦ä¸ç”¨ä½¿ç”¨ breakå…³é”®è¯ã€‚</p>
<p>3.4.3 caseè¯­å¥ åº”å’Œ switchè¯­å¥ å·¦å¯¹é½ï¼Œå¹¶åœ¨ æ ‡å‡†çš„defaultè¯­å¥ ä¹‹ä¸Šã€‚</p>
<p>3.4.4 å½“å®šä¹‰çš„é€‰é¡¹æœ‰å…³è”å€¼æ—¶ï¼Œç¡®ä¿å…³è”å€¼æœ‰æ°å½“çš„åç§°ï¼Œè€Œä¸åªæ˜¯ç±»å‹ã€‚(å¦‚. ä½¿ç”¨ case Hunger(hungerLevel: Int) è€Œä¸æ˜¯ case Hunger(Int)).</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Problem</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> attitude</div><div class="line">    <span class="keyword">case</span> hair</div><div class="line">    <span class="keyword">case</span> hunger(hungerLevel: <span class="type">Int</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">handleProblem</span><span class="params">(problem: Problem)</span></span> &#123;</div><div class="line">    <span class="keyword">switch</span> problem &#123;</div><div class="line">    <span class="keyword">case</span> .attitude:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"At least I don't have a hair problem."</span>)</div><div class="line">    <span class="keyword">case</span> .hair:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Your barber didn't know when to stop."</span>)</div><div class="line">    <span class="keyword">case</span> .hunger(<span class="keyword">let</span> hungerLevel):</div><div class="line">        <span class="built_in">print</span>(<span class="string">"The hunger level is \(hungerLevel)."</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.4.5 æ¨èå°½å¯èƒ½ä½¿ç”¨fall throughã€‚</p>
<p>3.4.6 å¦‚æœdefault çš„é€‰é¡¹ä¸åº”è¯¥è§¦å‘ï¼Œå¯ä»¥æŠ›å‡ºé”™è¯¯ æˆ– æ–­è¨€ç±»ä¼¼çš„åšæ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">handleDigit</span><span class="params">(<span class="number">_</span> digit: Int)</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">    <span class="keyword">switch</span> digit &#123;</div><div class="line">    <span class="keyword">case</span> <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Yes, \(digit) is a digit!"</span>)</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">        <span class="keyword">throw</span> <span class="type">Error</span>(message: <span class="string">"The given number was not a digit."</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>3.5 å¯é€‰ç±»å‹<br>3.5.1 å”¯ä¸€ä½¿ç”¨éšå¼æ‹†åŒ…å¯é€‰å‹ï¼ˆimplicitly unwrapped optionalsï¼‰çš„åœºæ™¯æ˜¯ç»“åˆ@IBOutletsï¼Œåœ¨å…¶ä»–åœºæ™¯ä½¿ç”¨ éå¯é€‰ç±»å‹ å’Œ å¸¸è§„å¯é€‰ç±»å‹ï¼Œå³ä½¿æœ‰çš„åœºæ™¯ä½ ç¡®å®šæœ‰çš„å˜é‡ä½¿ç”¨çš„æ—¶å€™æ°¸è¿œä¸ä¼šä¸º nilï¼Œ ä½†è¿™æ ·åšå¯ä»¥ä¿æŒä¸€è‡´æ€§å’Œç¨‹åºæ›´åŠ å¥å£®ã€‚</p>
<p>3.5.2 ä¸è¦ä½¿ç”¨ as! æˆ– try!ã€‚</p>
<p>3.5.3 å¦‚æœå¯¹äºä¸€ä¸ªå˜é‡ä½ ä¸æ‰“ç®—å£°æ˜ä¸ºå¯é€‰ç±»å‹ï¼Œä½†å½“éœ€è¦æ£€æŸ¥å˜é‡å€¼æ˜¯å¦ä¸º nilï¼Œæ¨èç”¨å½“å‰å€¼å’Œ nil ç›´æ¥æ¯”è¾ƒï¼Œè€Œä¸æ¨èä½¿ç”¨ if let è¯­æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨èå†™æ³•</span></div><div class="line"><span class="keyword">if</span> someOptional != <span class="literal">nil</span> &#123;</div><div class="line">    <span class="comment">// do something</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="number">_</span> = someOptional &#123;</div><div class="line">    <span class="comment">// do something</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.5.4 ä¸è¦ä½¿ç”¨ unownedï¼Œunowned å’Œ weak å˜é‡åŸºæœ¬ä¸Šç­‰ä»·ï¼Œå¹¶ä¸”éƒ½æ˜¯éšå¼æ‹†åŒ…( unowned åœ¨å¼•ç”¨è®¡æ•°ä¸Šæœ‰å°‘è®¸æ€§èƒ½ä¼˜åŒ–)ï¼Œç”±äºä¸æ¨èä½¿ç”¨éšå¼æ‹†åŒ…ï¼Œä¹Ÿä¸æ¨èä½¿ç”¨unowned å˜é‡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨èå†™æ³•</span></div><div class="line"><span class="keyword">weak</span> <span class="keyword">var</span> parentViewController: <span class="type">UIViewController</span>?</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="keyword">weak</span> <span class="keyword">var</span> parentViewController: <span class="type">UIViewController</span>!</div><div class="line"><span class="keyword">unowned</span> <span class="keyword">var</span> parentViewController: <span class="type">UIViewController</span></div></pre></td></tr></table></figure>
<p>3.5.5 å½“æ‹†åŒ…å–å€¼æ—¶ï¼Œä½¿ç”¨å’Œè¢«æ‹†åŒ…å–å€¼å˜é‡ç›¸åŒçš„åç§°ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> myValue = myValue <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>3.6 åè®®<br>åœ¨å®ç°åè®®çš„æ—¶å€™ï¼Œæœ‰ä¸¤ç§æ–¹å¼æ¥ç»„ç»‡ä½ çš„ä»£ç :<br>ä½¿ç”¨ // MARK: æ³¨é‡Šæ¥åˆ†å‰²åè®®å®ç°å’Œå…¶ä»–ä»£ç ã€‚<br>ä½¿ç”¨ extension åœ¨ ç±»/ç»“æ„ä½“å·²æœ‰ä»£ç å¤–ï¼Œä½†åœ¨åŒä¸€ä¸ªæ–‡ä»¶å†…ã€‚<br>è¯·æ³¨æ„ extension å†…çš„ä»£ç ä¸èƒ½è¢«å­ç±»é‡å†™ï¼Œè¿™ä¹Ÿæ„å‘³ç€æµ‹è¯•å¾ˆéš¾è¿›è¡Œã€‚ å¦‚æœè¿™æ˜¯ç»å¸¸å‘ç”Ÿçš„æƒ…å†µï¼Œä¸ºäº†ä»£ç ä¸€è‡´æ€§æœ€å¥½ç»Ÿä¸€ä½¿ç”¨ç¬¬ä¸€ç§åŠæ³•ã€‚å¦åˆ™ä½¿ç”¨ç¬¬äºŒç§åŠæ³•ï¼Œå…¶å¯ä»¥ä»£ç åˆ†å‰²æ›´æ¸…æ™°ã€‚<br>ä½¿ç”¨è€Œç¬¬äºŒç§æ–¹æ³•çš„æ—¶å€™ï¼Œä½¿ç”¨  // MARK:  ä¾ç„¶å¯ä»¥è®©ä»£ç åœ¨ Xcode å¯è¯»æ€§æ›´å¼ºã€‚</p>
</li>
<li><p>3.7 å±æ€§<br>3.7.1 å¯¹äºåªè¯»å±æ€§ï¼Œè®¡ç®—å(Computed)å±æ€§, æä¾› getter è€Œä¸æ˜¯ get {}ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> computedProperty: <span class="type">String</span> &#123;</div><div class="line">    <span class="keyword">if</span> someBool &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"I'm a mighty pirate!"</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="string">"I'm selling these fine leather jackets."</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.7.2 å¯¹äºå±æ€§ç›¸å…³æ–¹æ³• get {}, set {}, willSet, å’Œ didSet, ç¡®ä¿ç¼©è¿›ç›¸å…³ä»£ç å—ã€‚<br>3.7.3 å¯¹äºwillSet/didSet å’Œ set ä¸­çš„æ—§å€¼å’Œæ–°å€¼è™½ç„¶å¯ä»¥è‡ªå®šä¹‰åç§°ï¼Œä½†æ¨èä½¿ç”¨é»˜è®¤æ ‡å‡†åç§° newValue/oldValueã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> storedProperty: <span class="type">String</span> = <span class="string">"I'm selling these fine leather jackets."</span> &#123;</div><div class="line">    <span class="keyword">willSet</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"will set to \(newValue)"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">didSet</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"did set from \(oldValue) to \(storedProperty)"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> computedProperty: <span class="type">String</span>  &#123;</div><div class="line">    <span class="keyword">get</span> &#123;</div><div class="line">        <span class="keyword">if</span> someBool &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"I'm a mighty pirate!"</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> storedProperty</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">set</span> &#123;</div><div class="line">        storedProperty = newValue</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.7.4 å£°æ˜å•ä¾‹å±æ€§å¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼è¿›è¡Œï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PirateManager</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">let</span> shared = <span class="type">PirateManager</span>()</div><div class="line"></div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>3.8 é—­åŒ…<br>3.8.1 å¦‚æœå‚æ•°çš„ç±»å‹å¾ˆæ˜æ˜¾ï¼Œå¯ä»¥åœ¨å‡½æ•°åé‡Œå¯ä»¥çœç•¥å‚æ•°ç±»å‹, ä½†æ˜ç¡®å£°æ˜ç±»å‹ä¹Ÿæ˜¯å…è®¸çš„ã€‚ ä»£ç çš„å¯è¯»æ€§æœ‰æ—¶å€™æ˜¯æ·»åŠ è¯¦ç»†çš„ä¿¡æ¯ï¼Œè€Œæœ‰æ—¶å€™éƒ¨åˆ†é‡å¤ï¼Œæ ¹æ®ä½ çš„åˆ¤æ–­åŠ›åšå‡ºé€‰æ‹©å§ï¼Œä½†å‰åè¦ä¿æŒä¸€è‡´æ€§ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// çœç•¥ç±»å‹</span></div><div class="line">doSomethingWithClosure() &#123; response <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(response)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// æ˜ç¡®æŒ‡å‡ºç±»å‹</span></div><div class="line">doSomethingWithClosure() &#123; response: <span class="type">NSURLResponse</span> <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(response)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// map è¯­å¥ä½¿ç”¨ç®€å†™</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].flatMap &#123; <span class="type">String</span>($<span class="number">0</span>) &#125;</div></pre></td></tr></table></figure>
<p>3.8.2 å¦‚æœé—­åŒ…æ˜¯å˜é‡ç±»å‹ï¼Œä¸éœ€æŠŠå˜é‡å€¼æ”¾åœ¨æ‹¬å·ä¸­ï¼Œé™¤ééœ€è¦ï¼Œå¦‚å˜é‡ç±»å‹æ˜¯å¯é€‰ç±»å‹(Optional?)ï¼Œ æˆ–å½“å‰é—­åŒ…åœ¨å¦ä¸€ä¸ªé—­åŒ…å†…ã€‚ç¡®ä¿é—­åŒ…é‡Œçš„æ‰€ä»¥å‚æ•°æ”¾åœ¨å°æ‹¬å·ä¸­ï¼Œè¿™æ ·()è¡¨ç¤ºæ²¡æœ‰å‚æ•°ï¼ŒVoidè¡¨ç¤ºä¸éœ€è¦è¿”å›å€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> completionBlock: (<span class="type">Bool</span>) -&gt; <span class="type">Void</span> = &#123; (success) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"Success? \(success)"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> completionBlock: () -&gt; <span class="type">Void</span> = &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Completed!"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> completionBlock: (() -&gt; <span class="type">Void</span>)? = <span class="literal">nil</span></div></pre></td></tr></table></figure>
<p>3.8.3 åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œå°†å‚æ•°åç§°ä¿æŒåœ¨åŒä¸€è¡Œä¸Šï¼Œé¿å…è¿‡å¤šçš„æ°´å¹³æº¢å‡º(å³ç¡®ä¿è¡Œå°‘äº160ä¸ªå­—ç¬¦)ã€‚</p>
<p>3.8.4 å¦‚æœé—­åŒ…æ˜¯å˜é‡ç±»å‹ï¼Œä¸éœ€æŠŠå˜é‡å€¼æ”¾åœ¨æ‹¬å·ä¸­ï¼Œé™¤ééœ€è¦ï¼Œå¦‚å˜é‡ç±»å‹æ˜¯å¯é€‰ç±»å‹(Optional?)ï¼Œ æˆ–å½“å‰é—­åŒ…åœ¨å¦ä¸€ä¸ªé—­åŒ…å†…ã€‚ç¡®ä¿é—­åŒ…é‡Œçš„æ‰€ä»¥å‚æ•°æ”¾åœ¨å°æ‹¬å·ä¸­ï¼Œè¿™æ ·()è¡¨ç¤ºæ²¡æœ‰å‚æ•°ï¼ŒVoid è¡¨ç¤ºä¸éœ€è¦è¿”å›å€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å°¾éšé—­åŒ…</span></div><div class="line">doSomething(<span class="number">1.0</span>) &#123; (parameter1) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"Parameter 1 is \(parameter1)"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// é å°¾éšé—­åŒ…</span></div><div class="line">doSomething(<span class="number">1.0</span>, success: &#123; (parameter1) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"Success with \(parameter1)"</span>)</div><div class="line">&#125;, failure: &#123; (parameter1) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"Failure with \(parameter1)"</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
<li><p>3.9 æ•°ç»„<br>3.9.1 åŸºæœ¬ä¸Šä¸è¦é€šè¿‡ä¸‹æ ‡ç›´æ¥è®¿é—®æ•°ç»„å†…å®¹ï¼Œå¦‚æœå¯èƒ½ä½¿ç”¨å¦‚ .first æˆ– .last, å› ä¸ºè¿™äº›æ–¹æ³•æ˜¯éå¼ºåˆ¶ç±»å‹å¹¶ä¸ä¼šå´©æºƒã€‚æ¨èå°½å¯èƒ½ä½¿ç”¨ for item in items è€Œä¸æ˜¯ for i in 0..&lt; items.count ã€‚</p>
<p>3.9.2 ä¸è¦ä½¿ç”¨ += æˆ– + æ“ä½œç¬¦ç»™æ•°ç»„æ·»åŠ æ–°å…ƒç´ ï¼Œä½¿ç”¨æ€§èƒ½è¾ƒå¥½çš„.append() æˆ–.appendContentsOf()ï¼Œå¦‚æœéœ€è¦å£°æ˜æ•°ç»„åŸºäºå…¶ä»–çš„æ•°ç»„å¹¶ä¿æŒä¸å¯å˜ç±»å‹ï¼Œ ä½¿ç”¨ let myNewArray = [arr1, arr2].flatten()ï¼Œè€Œä¸æ˜¯ let myNewArray = arr1 + arr2 ã€‚</p>
</li>
<li><p>3.10 é”™è¯¯å¤„ç†<br>å‡è®¾ä¸€ä¸ªå‡½æ•° myFunction è¿”å›ç±»å‹å£°æ˜ä¸º Stringï¼Œä½†æ˜¯æ€»æœ‰å¯èƒ½å‡½æ•°ä¼šé‡åˆ°errorï¼Œæœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯è¿”å›ç±»å‹å£°æ˜ä¸º String?, å½“é‡åˆ°é”™è¯¯çš„æ—¶å€™è¿”å› nilã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">readFile</span><span class="params">(named filename: String)</span></span> -&gt; <span class="type">String</span>? &#123;</div><div class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> file = openFile(named: filename) <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">let</span> fileContents = file.read()</div><div class="line">    file.close()</div><div class="line">    <span class="keyword">return</span> fileContents</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSomeFile</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">let</span> filename = <span class="string">"somefile.txt"</span></div><div class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> fileContents = readFile(named: filename) <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Unable to open file \(filename)."</span>)</div><div class="line">        <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">print</span>(fileContents)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>å®é™…ä¸Šå¦‚æœé¢„çŸ¥å¤±è´¥çš„åŸå› ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨Swiftä¸­çš„ try/catch ã€‚<br>å®šä¹‰é”™è¯¯å¯¹è±¡ç»“æ„ä½“å¦‚ä¸‹:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Error</span>: <span class="title">Swift</span>.<span class="title">Error</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">let</span> file: <span class="type">StaticString</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">let</span> function: <span class="type">StaticString</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">let</span> line: <span class="type">UInt</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">let</span> message: <span class="type">String</span></div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(message: <span class="type">String</span>, file: <span class="type">StaticString</span> = #file, function: <span class="type">StaticString</span> = #function, line: <span class="type">UInt</span> = #line) &#123;</div><div class="line">        <span class="keyword">self</span>.file = file</div><div class="line">        <span class="keyword">self</span>.function = function</div><div class="line">        <span class="keyword">self</span>.line = line</div><div class="line">        <span class="keyword">self</span>.message = message</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ¡ˆä¾‹:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">readFile</span><span class="params">(named filename: String)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">String</span> &#123;</div><div class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> file = openFile(named: filename) <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="type">Error</span>(message: <span class="string">"Unable to open file named \(filename)."</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">let</span> fileContents = file.read()</div><div class="line">    file.close()</div><div class="line">    <span class="keyword">return</span> fileContents</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSomeFile</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">do</span> &#123;</div><div class="line">        <span class="keyword">let</span> fileContents = <span class="keyword">try</span> readFile(named: filename)</div><div class="line">        <span class="built_in">print</span>(fileContents)</div><div class="line">    &#125; <span class="keyword">catch</span> &#123;</div><div class="line">        <span class="built_in">print</span>(error)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…¶å®é¡¹ç›®ä¸­è¿˜æ˜¯æœ‰ä¸€äº›åœºæ™¯æ›´é€‚åˆå£°æ˜ä¸ºå¯é€‰ç±»å‹ï¼Œè€Œä¸æ˜¯é”™è¯¯æ•æ‰å’Œå¤„ç†ï¼Œæ¯”å¦‚åœ¨è·å–è¿œç«¯æ•°æ®è¿‡ç¨‹ä¸­é‡åˆ°é”™è¯¯ï¼Œnilä½œä¸ºè¿”å›ç»“æœæ˜¯åˆç†çš„ï¼Œä¹Ÿå°±æ˜¯å£°æ˜è¿”å›å¯é€‰ç±»å‹æ¯”é”™è¯¯å¤„ç†æ›´åˆç†ã€‚<br>æ•´ä½“ä¸Šè¯´ï¼Œå¦‚æœä¸€ä¸ªæ–¹æ³•æœ‰å¯èƒ½å¤±è´¥ï¼Œå¹¶ä¸”ä½¿ç”¨å¯é€‰ç±»å‹ä½œä¸ºè¿”å›ç±»å‹ä¼šå¯¼è‡´é”™è¯¯åŸå› æ¹®æ²¡ï¼Œä¸å¦¨è€ƒè™‘æŠ›å‡ºé”™è¯¯è€Œä¸æ˜¯åƒæ‰å®ƒã€‚</p>
<ul>
<li><p>3.11 ä½¿ç”¨ guard è¯­å¥<br>3.11.1 æ€»ä½“ä¸Šï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨æå‰è¿”å›çš„ç­–ç•¥ï¼Œè€Œä¸æ˜¯ if è¯­å¥çš„åµŒå¥—ã€‚ä½¿ç”¨ guard è¯­å¥å¯ä»¥æ”¹å–„ä»£ç çš„å¯è¯»æ€§ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨è</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">eatDoughnut</span><span class="params">(at index: Int)</span></span> &#123;</div><div class="line">    <span class="keyword">guard</span> index &gt;= <span class="number">0</span> &amp;&amp; index &lt; doughnuts.<span class="built_in">count</span> <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// å¦‚æœ index è¶…å‡ºå…è®¸èŒƒå›´ï¼Œæå‰è¿”å›</span></div><div class="line">        <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">let</span> doughnut = doughnuts[index]</div><div class="line">    eat(doughnut)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">eatDoughnut</span><span class="params">(at index: Int)</span></span> &#123;</div><div class="line">    <span class="keyword">if</span> index &gt;= <span class="number">0</span> &amp;&amp; index &lt; doughnuts.<span class="built_in">count</span> &#123;</div><div class="line">        <span class="keyword">let</span> doughnut = doughnuts[index]</div><div class="line">        eat(doughnut)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.11.2 åœ¨è§£æå¯é€‰ç±»å‹æ—¶ï¼Œæ¨èä½¿ç”¨ guard è¯­å¥ï¼Œè€Œä¸æ˜¯ if è¯­å¥ï¼Œå› ä¸º guard è¯­å¥å¯ä»¥å‡å°‘ä¸å¿…è¦çš„åµŒå¥—ç¼©è¿›ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨è</span></div><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> monkeyIsland = monkeyIsland <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div><div class="line">bookVacation(on: monkeyIsland)</div><div class="line">bragAboutVacation(at: monkeyIsland)</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> monkeyIsland = monkeyIsland &#123;</div><div class="line">    bookVacation(on: monkeyIsland)</div><div class="line">    bragAboutVacation(at: monkeyIsland)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ç¦æ­¢</span></div><div class="line"><span class="keyword">if</span> monkeyIsland == <span class="literal">nil</span> &#123;</div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div><div class="line">bookVacation(on: monkeyIsland!)</div><div class="line">bragAboutVacation(at: monkeyIsland!)</div></pre></td></tr></table></figure>
<p>3.11.3 å½“è§£æå¯é€‰ç±»å‹éœ€è¦å†³å®šåœ¨ if è¯­å¥ å’Œ guard è¯­å¥ä¹‹é—´åšé€‰æ‹©æ—¶ï¼Œæœ€é‡è¦çš„åˆ¤æ–­æ ‡å‡†æ˜¯æ˜¯å¦è®©ä»£ç å¯è¯»æ€§æ›´å¼ºï¼Œå®é™…é¡¹ç›®ä¸­ä¼šé¢ä¸´æ›´å¤šçš„æƒ…æ™¯ï¼Œå¦‚ä¾èµ– 2 ä¸ªä¸åŒçš„å¸ƒå°”å€¼ï¼Œå¤æ‚çš„é€»è¾‘è¯­å¥ä¼šæ¶‰åŠå¤šæ¬¡æ¯”è¾ƒç­‰ï¼Œå¤§ä½“ä¸Šè¯´ï¼Œæ ¹æ®ä½ çš„åˆ¤æ–­åŠ›è®©ä»£ç ä¿æŒä¸€è‡´æ€§å’Œæ›´å¼ºå¯è¯»æ€§ï¼Œ å¦‚æœä½ ä¸ç¡®å®š if è¯­å¥ å’Œ guard è¯­å¥å“ªä¸€ä¸ªå¯è¯»æ€§æ›´å¼ºï¼Œå»ºè®®ä½¿ç”¨ guard ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// if è¯­å¥æ›´æœ‰å¯è¯»æ€§</span></div><div class="line"><span class="keyword">if</span> operationFailed &#123;</div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// guard è¯­å¥è¿™é‡Œæœ‰æ›´å¥½çš„å¯è¯»æ€§</span></div><div class="line"><span class="keyword">guard</span> isSuccessful <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// åŒé‡å¦å®šä¸æ˜“è¢«ç†è§£ - ä¸è¦è¿™ä¹ˆåš</span></div><div class="line"><span class="keyword">guard</span> !operationFailed <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.11.4 å¦‚æœéœ€è¦åœ¨2ä¸ªçŠ¶æ€é—´åšå‡ºé€‰æ‹©ï¼Œå»ºè®®ä½¿ç”¨ if è¯­å¥ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ guard è¯­å¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨èå†™æ³•</span></div><div class="line"><span class="keyword">if</span> isFriendly &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Hello, nice to meet you!"</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"You have the manners of a beggar."</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="keyword">guard</span> isFriendly <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"You have the manners of a beggar."</span>)</div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">print</span>(<span class="string">"Hello, nice to meet you!"</span>)</div></pre></td></tr></table></figure>
<p>3.11.5 ä½ åªåº”è¯¥åœ¨åœ¨å¤±è´¥æƒ…å½¢ä¸‹é€€å‡ºå½“å‰ä¸Šä¸‹æ–‡çš„åœºæ™¯ä¸‹ä½¿ç”¨ guard è¯­å¥ï¼Œä¸‹é¢çš„ä¾‹å­å¯ä»¥è§£é‡Š if è¯­å¥æœ‰æ—¶å€™æ¯” guard è¯­å¥æ›´åˆé€‚ â€“ æˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸ç›¸å…³çš„æ¡ä»¶ï¼Œä¸åº”è¯¥ç›¸äº’é˜»å¡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> monkeyIsland = monkeyIsland &#123;</div><div class="line">    bookVacation(onIsland: monkeyIsland)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> woodchuck = woodchuck, canChuckWood(woodchuck) &#123;</div><div class="line">    woodchuck.chuckWood()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.11.6 æˆ‘ä»¬ä¼šç»å¸¸é‡åˆ°ä½¿ç”¨ guard è¯­å¥æ‹†åŒ…å¤šä¸ªå¯é€‰å€¼ï¼Œå¦‚æœæ‰€æœ‰æ‹†åŒ…å¤±è´¥çš„é”™è¯¯å¤„ç†éƒ½ä¸€è‡´å¯ä»¥æŠŠæ‹†åŒ…ç»„åˆåˆ°ä¸€èµ· (å¦‚ return, break, continue, throw, å…¶ä»–é€ƒé€¸é—­åŒ… ç­‰)ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç»„åˆåœ¨ä¸€èµ·å¯ä»¥ç«‹å³è§¦å‘ return</span></div><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> thingOne = thingOne,</div><div class="line">    <span class="keyword">let</span> thingTwo = thingTwo,</div><div class="line">    <span class="keyword">let</span> thingThree = thingThree <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ä½¿ç”¨ç‹¬ç«‹çš„è¯­å¥ å› ä¸ºæ¯ä¸ªåœºæ™¯è¿”å›ä¸åŒçš„é”™è¯¯</span></div><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> thingOne = thingOne <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="type">Error</span>(message: <span class="string">"Unwrapping thingOne failed."</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> thingTwo = thingTwo <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="type">Error</span>(message: <span class="string">"Unwrapping thingTwo failed."</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> thingThree = thingThree <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="type">Error</span>(message: <span class="string">"Unwrapping thingThree failed."</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.11.7 ä¸è¦æŠŠguardè¯­å¥å†™åœ¨ä¸€è¡Œç¨‹åºä¸­ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨èå†™æ³•</span></div><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> thingOne = thingOne <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ä¸æ¨è</span></div><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> thingOne = thingOne <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>æ–‡æ¡£/æ³¨é‡Š</p>
<ul>
<li><p>4.1 æ–‡æ¡£<br>å¦‚æœä¸€ä¸ªå‡½æ•°æ¯” O(1) å¤æ‚åº¦é«˜ï¼Œä½ éœ€è¦è€ƒè™‘ä¸ºå‡½æ•°æ·»åŠ æ³¨é‡Šï¼Œå› ä¸ºå‡½æ•°ç­¾å(æ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨) å¹¶ä¸æ˜¯é‚£ä¹ˆçš„ä¸€ç›®äº†ç„¶ï¼Œè¿™é‡Œæ¨èæ¯”è¾ƒæµè¡Œçš„æ’ä»¶ VVDocumenter. ä¸è®ºå‡ºäºä½•ç§åŸå› ï¼Œå¦‚æœæœ‰ä»»ä½•å¥‡æ·«å·§è®¡ä¸æ˜“ç†è§£çš„ä»£ç ï¼Œéƒ½éœ€è¦æ·»åŠ æ³¨é‡Šï¼Œå¯¹äºå¤æ‚çš„ ç±»/ç»“æ„ä½“/æšä¸¾/åè®®/å±æ€§ éƒ½éœ€è¦æ·»åŠ æ³¨é‡Šã€‚æ‰€æœ‰å…¬å¼€çš„ å‡½æ•°/ç±»/å˜é‡/æšä¸¾/åè®®/å±æ€§/å¸¸æ•° ä¹Ÿéƒ½éœ€è¦æ·»åŠ æ–‡æ¡£ï¼Œç‰¹åˆ«æ˜¯å‡½æ•°å£°æ˜ï¼ˆåŒ…æ‹¬åç§°å’Œå‚æ•°åˆ—è¡¨ï¼‰ä¸æ˜¯é‚£ä¹ˆæ¸…æ™°çš„æ—¶å€™ã€‚<br>å†™æ–‡æ¡£æ—¶ï¼Œç¡®ä¿å‚ç…§è‹¹æœæ–‡æ¡£ä¸­æåŠçš„æ ‡è®°è¯­æ³•åˆé›†ã€‚<br>åœ¨æ³¨é‡Šæ–‡æ¡£å®Œæˆåï¼Œä½ åº”æ£€æŸ¥æ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚<br>è§„åˆ™ï¼š</p>
<p>4.1.1 ä¸€è¡Œä¸è¦è¶…è¿‡160ä¸ªå­—ç¬¦ (å’Œä»£ç é•¿åº¦é™åˆ¶é›·åŒ)ã€‚</p>
<p>4.1.2 å³ä½¿æ–‡æ¡£æ³¨é‡Šåªæœ‰ä¸€è¡Œï¼Œä¹Ÿè¦ä½¿ç”¨æ¨¡å—åŒ–æ ¼å¼ (/<em>* </em>/)ã€‚</p>
<p>4.1.3 æ³¨é‡Šæ¨¡å—ä¸­çš„ç©ºè¡Œä¸è¦ä½¿ç”¨ * æ¥å ä½ã€‚</p>
<p>4.1.4 ç¡®å®šä½¿ç”¨æ–°çš„ â€“ parameter æ ¼å¼ï¼Œè€Œä¸æ˜¯å°±å¾— Use the new -:param: æ ¼å¼ï¼Œå¦å¤–æ³¨æ„ parameter æ˜¯å°å†™çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     è¿™ç§æ–¹æ³•ä¸ºä¸€ä¸ªäººæä¾›æŸç§é£Ÿç‰©ã€‚</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">     - parameter food: ä½ æƒ³è¦åƒçš„é£Ÿç‰©ã€‚</span></div><div class="line"><span class="comment">     - parameter person: åº”è¯¥åƒé£Ÿç‰©çš„äººã€‚</span></div><div class="line"><span class="comment">     - returns: å¦‚æœé£Ÿç‰©è¢«æŸäººåƒäº†åˆ™æ­£ç¡®ï¼›å¦åˆ™é”™è¯¯ã€‚</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">feed</span><span class="params">(<span class="number">_</span> food: Food, to person: Human)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="comment">// ...</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4.1.5 å¦‚æœéœ€è¦ç»™ä¸€ä¸ªæ–¹æ³•çš„ å‚æ•°/è¿”å›å€¼/æŠ›å‡ºå¼‚å¸¸ æ·»åŠ æ³¨é‡Šï¼ŒåŠ¡å¿…ç»™æ‰€æœ‰çš„æ·»åŠ æ³¨é‡Šï¼Œå³ä½¿ä¼šçœ‹èµ·æ¥æœ‰éƒ¨åˆ†é‡å¤ï¼Œå¦åˆ™æ³¨é‡Šä¼šçœ‹èµ·æ¥ä¸å®Œæ•´ï¼Œæœ‰æ—¶å€™å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°å€¼å¾—æ·»åŠ æ³¨é‡Šï¼Œå¯ä»¥åœ¨æ–¹æ³•æ³¨é‡Šé‡Œé‡ç‚¹æè¿°ã€‚</p>
<p>4.1.6 å¯¹äºå¤æ‚çš„ç±»ï¼Œè¯·ç”¨é€‚å½“çš„æ³¨é‡Šæ¥æè¿°ç±»çš„ç”¨æ³•ã€‚è®°ä½ï¼Œmarkdownè¯­æ³•åœ¨Swiftçš„æ³¨é‡Šæ–‡æ¡£ä¸­æ˜¯æœ‰æ•ˆçš„ã€‚å› æ­¤ï¼Œæ¢è¡Œã€åˆ—è¡¨ç­‰æ˜¯å¯ä»¥ä½¿ç”¨çš„çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> ## åŠŸèƒ½åˆ—è¡¨</span></div><div class="line"><span class="comment"> è¿™ä¸ªç±»æä¾›ä¸‹ä¸€ä¸‹å¾ˆèµçš„åŠŸèƒ½ï¼Œå¦‚ä¸‹:</span></div><div class="line"><span class="comment"> - åŠŸèƒ½ 1</span></div><div class="line"><span class="comment"> - åŠŸèƒ½ 2</span></div><div class="line"><span class="comment"> - åŠŸèƒ½ 3</span></div><div class="line"><span class="comment"> ## ä¾‹å­</span></div><div class="line"><span class="comment"> è¿™æ˜¯ä¸€ä¸ªä»£ç å—ä½¿ç”¨å››ä¸ªç©ºæ ¼ä½œä¸ºç¼©è¿›çš„ä¾‹å­ã€‚</span></div><div class="line"><span class="comment">     let myAwesomeThing = MyAwesomeClass()</span></div><div class="line"><span class="comment">     myAwesomeThing.makeMoney()</span></div><div class="line"><span class="comment"> ## è­¦å‘Š</span></div><div class="line"><span class="comment"> ä½¿ç”¨çš„æ—¶å€™æ€»æ³¨æ„ä»¥ä¸‹å‡ ç‚¹</span></div><div class="line"><span class="comment"> 1. ç¬¬ä¸€ç‚¹</span></div><div class="line"><span class="comment"> 2. ç¬¬äºŒç‚¹</span></div><div class="line"><span class="comment"> 3. ç¬¬ä¸‰ç‚¹</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyAwesomeClass</span> </span>&#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4.1.7 åœ¨æåˆ°ä»£ç æ—¶ï¼Œä½¿ç”¨ä»£ç æ ‡è®° - `ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> è¿™å¯èƒ½å’Œä¸€ä¸ª`UIViewController`æœ‰å…³ã€‚</span></div><div class="line"><span class="comment"> - warning: åœ¨è¿è¡Œæ­¤å‡½æ•°ä¹‹å‰ï¼Œè¯·ç¡®ä¿`someValue`æ˜¯`true`ã€‚</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunction</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4.1.8 åœ¨å†™æ–‡æ¡£æ³¨é‡Šæ—¶ï¼Œå°½é‡ä¿æŒç®€æ´ã€‚</p>
</li>
<li><p>4.2 å…¶ä»–æ³¨é‡ŠåŸåˆ™</p>
<p>4.2.1 // åé¢è¦ä¿ç•™ç©ºæ ¼ã€‚<br>4.2.2 æ³¨é‡Šå¿…é¡»è¦å¦èµ·ä¸€è¡Œã€‚<br>4.2.3 ä½¿ç”¨æ³¨é‡Š // MARK: - xoxo æ—¶, ä¸‹é¢ä¸€è¡Œä¿ç•™ä¸ºç©ºè¡Œã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pirate</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">// MARK: - å®ä¾‹å±æ€§</span></div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="keyword">let</span> pirateName: <span class="type">String</span></div><div class="line"></div><div class="line">  <span class="comment">// MARK: - åˆå§‹åŒ–</span></div><div class="line"></div><div class="line">  <span class="keyword">init</span>() &#123;</div><div class="line"></div><div class="line">      <span class="comment">/* ... */</span></div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/26/Swift-é¢å‘åè®®ç¼–ç¨‹-ç»„ä»¶åŒ–/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/26/Swift-é¢å‘åè®®ç¼–ç¨‹-ç»„ä»¶åŒ–/" itemprop="url">Swift é¢å‘åè®®ç¼–ç¨‹/ç»„ä»¶åŒ–</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-26T15:50:58+08:00">
                2018-02-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOSå¼€å‘/" itemprop="url" rel="index">
                    <span itemprop="name">iOSå¼€å‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>å¾—ç›Šäºé¢å‘å¯¹è±¡è¯­è¨€çš„ç‰¹æ€§ (å°è£…ã€ç»§æ‰¿ã€å¤šæ€) åœ¨æˆ‘ä»¬ç†Ÿæ‚‰çš„è®¾è®¡æ¨¡å¼ä¸­æ¸æ¸å½¢æˆç»Ÿä¸€çš„è½¯ä»¶å¼€å‘æ€æƒ³ï¼Œä½†æ˜¯ç”±äºOCçš„å±€é™æ€§, ä½¿å¾—iOSå¼€å‘ç»„ä»¶åŒ–ç¼–ç¨‹å˜å¾—ååˆ†ç¹çï¼Œéœ€è¦å°†ä¸€äº›åŠŸèƒ½æ‹†åˆ†ä¸ºç±»ï¼Œåœ¨æŠ½å–æŸäº›åŠŸèƒ½ä½œä¸ºåŸºç±»çš„ä¸æ–­è¿ç”¨ä¸­ï¼Œä»£ç çš„å¯ç§»æ¤æ€§é€æ¸å‡å¼±ã€‚å°±å¦‚åŒä¸€æ£µæ ‘ï¼Œä»ä¸»å¹²åˆ°å„ä¸ªåˆ†æ”¯ï¼Œæ¯ä¸ªåˆ†æ”¯å†é•¿æˆç»†ææœ«å¶ã€‚ä»£ç çš„è€¦åˆæ€§ä¹Ÿç›¸åº”å¢åŠ ã€‚éšç€è‹¹æœ swift è¯­è¨€çš„æ¨å‡ºï¼Œå¯¹äºä¼ ç»ŸOC è¯­è¨€å–å…¶ç²¾åï¼Œå¼ƒå…¶ç³Ÿç²•ã€‚ åŠ ä¸Šå¼€æºç¤¾åŒºä¼—å¤§ç¥çš„é½åŠ›ç»´æŠ¤ã€‚é€æ¸æˆä¸ºä¸€é—¨éå¸¸ä¼˜ç§€çš„é«˜çº§è¯­è¨€ã€‚å…¶ä¸­Swiftä¸­çš„é¢å‘åè®®ç¼–ç¨‹æ€æƒ³å°±æ˜¯å…¶ä¸­å¾ˆæœ‰ä»£è¡¨æ€§çš„ä¸€é¡¹ä¼˜ç§€ç»„æˆéƒ¨åˆ†ã€‚</strong></p>
<p>Swiftçš„ POP æ˜¯ä½¿ç”¨äº†ç»§æ‰¿çš„æ€æƒ³ï¼Œå®ƒæ¨¡æ‹Ÿäº†å¤šç»§æ‰¿å…³ç³»ï¼Œå®ç°äº†ä»£ç çš„è·¨çˆ¶ç±»å¤ç”¨ï¼ŒåŒæ—¶ä¹Ÿä¸å­˜åœ¨ is-a å…³ç³»ã€‚swiftä¸­ä¸»ç±»å’Œ extensionæ‰©å±•ç±» çš„ååŒå·¥ä½œï¼Œä¿ç•™äº† åœ¨ä¸»ç±»ä¸­å®šä¹‰æ–¹æ³• åœ¨æ‰€ç»§æ‰¿çš„ç±»ä¸­è¿›è¡Œå®ç°çš„ç‰¹æ€§ï¼Œåˆæ–°å¢äº†åœ¨ extensionæ‹“å±•ç±» ä¸­å®šä¹‰å¹¶å®ç°çš„æ–¹æ³•åœ¨ä»»ä½•ç»§æ‰¿è‡ªæ­¤åè®®çš„ç±»ä¸­å¯ä»¥ä»»æ„è°ƒç”¨ï¼Œä»è€Œå®ç°ç»„ä»¶åŒ–ç¼–ç¨‹ã€‚</p>
<p>ä¸¤ä¸ªç®€å•çš„ä½¿ç”¨åœºæ™¯å¯ä»¥å……åˆ†ä½“ç°swiftç»„ä»¶åŒ–ç¼–ç¨‹çš„ä¼˜åŠ¿ï¼š</p>
<h3 id="1-å®ç°ä¸€ä¸ªèƒ½æŠ–åŠ¨çš„-View"><a href="#1-å®ç°ä¸€ä¸ªèƒ½æŠ–åŠ¨çš„-View" class="headerlink" title="1.å®ç°ä¸€ä¸ªèƒ½æŠ–åŠ¨çš„ View"></a>1.å®ç°ä¸€ä¸ªèƒ½æŠ–åŠ¨çš„ View</h3><p>è®©æˆ‘ä»¬å‡è®¾ä½ çš„äº§å“ç»ç†è¿‡æ¥å’Œä½ è¯´ï¼Œâ€œæˆ‘ä»¬åœ¨ç‚¹å‡»é‚£ä¸ªæŒ‰é’®æ—¶å€™å‡ºç°ä¸€ä¸ªè§†å›¾ï¼Œè€Œä¸”å®ƒä¼šæŠ–åŠ¨ã€‚â€ è¿™æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„åŠ¨ç”»ï¼Œæ¯”å¦‚ï¼Œåœ¨ä½ çš„å¯†ç è¾“å…¥æ¡†ä¸Š â€“ å½“ç”¨æˆ·è¾“å…¥é”™è¯¯å¯†ç æ—¶ï¼Œå®ƒå°±ä¼šæŠ–åŠ¨ã€‚</p>
<p>æˆ‘ä»¬å¸¸å¸¸éƒ½æ˜¯ä» Stack Overflow å¼€å§‹çš„(ç¬‘)ã€‚ä¸€äº›äººå¯èƒ½å·²ç»æœ‰äº† Swift æŠ–åŠ¨å¯¹è±¡çš„åŸºç¡€ä»£ç ã€‚ä¸€äº›äººç”šè‡³éƒ½æœ‰ Swift çš„æŠ–åŠ¨å¯¹è±¡çš„ä»£ç ï¼Œæˆ‘æƒ³éƒ½ä¸ç”¨æƒ³ï¼Œåªè¦ç¨ç¨ä¿®æ”¹ä¸€ä¸‹ã€‚æœ€éš¾çš„éƒ¨åˆ†å½“ç„¶æ˜¯æ¶æ„ï¼šæˆ‘åœ¨å“ªé‡Œé›†æˆè¿™äº›ä»£ç å‘¢ï¼Ÿ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  FoodImageView.swift</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FoodImageView</span>: <span class="title">UIImageView</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">shake</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> animation = <span class="type">CABasicAnimation</span>(keyPath: <span class="string">"position"</span>)</div><div class="line">        animation.duration = <span class="number">0.05</span></div><div class="line">        animation.repeatCount = <span class="number">5</span></div><div class="line">        animation.autoreverses = <span class="literal">true</span></div><div class="line">        animation.fromValue = <span class="type">NSValue</span>(<span class="type">CGPoint</span>: <span class="type">CGPointMake</span>(<span class="keyword">self</span>.center.x - <span class="number">4.0</span>, <span class="keyword">self</span>.center.y))</div><div class="line">        animation.toValue = <span class="type">NSValue</span>(<span class="type">CGPoint</span>: <span class="type">CGPointMake</span>(<span class="keyword">self</span>.center.x + <span class="number">4.0</span>, <span class="keyword">self</span>.center.y))</div><div class="line">        layer.addAnimation(animation, forKey: <span class="string">"position"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘å°†åˆ›å»ºä¸€ä¸ª UIImageView çš„å­ç±»ï¼Œåˆ›å»ºæˆ‘çš„ FoodImageView ç„¶åå¢åŠ ä¸€ä¸ªæŠ–åŠ¨çš„åŠ¨ç”»ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  ViewController.swift</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> foodImageView: <span class="type">FoodImageView</span>!</div><div class="line"></div><div class="line">    <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">onShakeButtonTap</span><span class="params">(sender: AnyObject)</span></span> &#123;</div><div class="line">        foodImageView.shake()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨æˆ‘çš„ view controller é‡Œé¢ï¼Œåœ¨ interface builder é‡Œæˆ‘è¿æ¥æˆ‘çš„ viewï¼ŒæŠŠå®ƒåšä¸º FoodImageView çš„å­ç±»ï¼Œæˆ‘æœ‰ä¸€ä¸ª shake å‡½æ•°ï¼Œç„¶å å®Œæˆäº†ï¼ã€‚10 åˆ†é’Ÿæˆ‘å°±å®Œæˆäº†è¿™ä¸ªåŠŸèƒ½ã€‚æˆ‘å¾ˆå¼€å¿ƒï¼Œæˆ‘çš„ä»£ç å·¥ä½œå¾—å¾ˆæ­£å¸¸ã€‚</p>
<p>ç„¶åï¼Œä½ çš„äº§å“ç»ç†è¿‡æ¥è¯´ï¼Œâ€ä½ éœ€è¦åœ¨æŠ–åŠ¨è§†å›¾çš„æ—¶å€™æŠ–åŠ¨æŒ‰é’®ã€‚â€ ç„¶åæˆ‘å›å»å¯¹æŒ‰é’®åšäº†åŒæ ·çš„äº‹æƒ…ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  ShakeableButton.swift</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ActionButton</span>: <span class="title">UIButton</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">shake</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> animation = <span class="type">CABasicAnimation</span>(keyPath: <span class="string">"position"</span>)</div><div class="line">        animation.duration = <span class="number">0.05</span></div><div class="line">        animation.repeatCount = <span class="number">5</span></div><div class="line">        animation.autoreverses = <span class="literal">true</span></div><div class="line">        animation.fromValue = <span class="type">NSValue</span>(<span class="type">CGPoint</span>: <span class="type">CGPointMake</span>(<span class="keyword">self</span>.center.x - <span class="number">4.0</span>, <span class="keyword">self</span>.center.y))</div><div class="line">        animation.toValue = <span class="type">NSValue</span>(<span class="type">CGPoint</span>: <span class="type">CGPointMake</span>(<span class="keyword">self</span>.center.x + <span class="number">4.0</span>, <span class="keyword">self</span>.center.y))</div><div class="line">        layer.addAnimation(animation, forKey: <span class="string">"position"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ–°å»ºUIImageViewå­ç±»ï¼Œåˆ›å»ºä¸€ä¸ªæŒ‰é’®ï¼Œå¢åŠ ä¸€ä¸ª shake() å‡½æ•°ï¼Œå’Œæˆ‘çš„ ViewControllerã€‚ç°åœ¨æˆ‘èƒ½æŠ–åŠ¨æˆ‘çš„ foodImageView å’Œ Button äº†ï¼Œå®Œæˆäº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  ViewController.swift</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> foodImageView: <span class="type">FoodImageView</span>!</div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> actionButton: <span class="type">ActionButton</span>!</div><div class="line"></div><div class="line">    <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">onShakeButtonTap</span><span class="params">(sender: AnyObject)</span></span> &#123;</div><div class="line">      foodImageView.shake()</div><div class="line">      actionButton.shake()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¹¸è¿çš„æ˜¯ï¼Œè¿™ä¼šç»™ä½ ä¸€ä¸ªè­¦å‘Šï¼šæˆ‘åœ¨ä¸¤ä¸ªåœ°æ–¹é‡å¤äº†æŠ–åŠ¨çš„ä»£ç ã€‚å¦‚æœæˆ‘æƒ³æ”¹å˜æŠ–åŠ¨çš„å¹…åº¦ï¼Œæˆ‘éœ€è¦æ”¹ä¸¤å¤„ä»£ç ï¼Œè¿™å¾ˆä¸å¥½ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  UIViewExtension.swift</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIView</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">shake</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> animation = <span class="type">CABasicAnimation</span>(keyPath: <span class="string">"position"</span>)</div><div class="line">        animation.duration = <span class="number">0.05</span></div><div class="line">        animation.repeatCount = <span class="number">5</span></div><div class="line">        animation.autoreverses = <span class="literal">true</span></div><div class="line">        animation.fromValue = <span class="type">NSValue</span>(<span class="type">CGPoint</span>: <span class="type">CGPointMake</span>(<span class="keyword">self</span>.center.x - <span class="number">4.0</span>, <span class="keyword">self</span>.center.y))</div><div class="line">        animation.toValue = <span class="type">NSValue</span>(<span class="type">CGPoint</span>: <span class="type">CGPointMake</span>(<span class="keyword">self</span>.center.x + <span class="number">4.0</span>, <span class="keyword">self</span>.center.y))</div><div class="line">        layer.addAnimation(animation, forKey: <span class="string">"position"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½œä¸ºä¸€ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜ï¼Œæˆ‘ä»¬é©¬ä¸Šä¼šæ„è¯†åˆ°è¿™ç‚¹ï¼Œè€Œä¸”è¯•å›¾é‡æ„ã€‚å¦‚æœä½ ä»¥å‰ä½¿ç”¨è¿‡ Objective-Cï¼Œæˆ‘ä¼šåˆ›å»ºä¸€ä¸ª UIView çš„ç±»åˆ«ï¼Œåœ¨ Swift é‡Œé¢ï¼Œè¿™å°±æ˜¯æ‰©å±•ã€‚</p>
<p>æˆ‘èƒ½è¿™æ ·åšï¼Œå› ä¸º UIButton å’Œ UIImageView éƒ½æ˜¯ UI è§†å›¾ã€‚æˆ‘èƒ½æ‰©å±• UI è§†å›¾è€Œä¸”å¢åŠ ä¸€ä¸ª shake å‡½æ•°ã€‚ç°åœ¨æˆ‘ä»ç„¶å¯ä»¥ç»™æˆ‘çš„æŒ‰é’®å’Œå›¾åƒè§†å›¾éƒ½åŠ ä¸Šå…¶ä»–çš„é€»è¾‘ï¼Œä½†æ˜¯ shake å‡½æ•°å°±åˆ°å¤„éƒ½æ˜¯äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FoodImageView</span>: <span class="title">UIImageView</span> </span>&#123;</div><div class="line">    <span class="comment">// other customization here</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ActionButton</span>: <span class="title">UIButton</span> </span>&#123;</div><div class="line">    <span class="comment">// other customization here</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> foodImageView: <span class="type">FoodImageView</span>!</div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> actionButton: <span class="type">ActionButton</span>!</div><div class="line"></div><div class="line">    <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">onShakeButtonTap</span><span class="params">(sender: AnyObject)</span></span> &#123;</div><div class="line">        foodImageView.shake()</div><div class="line">        actionButton.shake()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é©¬ä¸Šæˆ‘ä»¬å°±èƒ½å‘ç°å¯è¯»æ€§å¾ˆå·®äº†ã€‚ä¾‹å¦‚ï¼Œå¯¹äº foodImageView å’Œ actionButton æ¥è¯´ï¼Œä½ çœ‹ä¸å‡ºæ¥ä»»ä½•æŠ–åŠ¨çš„æ„å›¾ã€‚æ•´ä¸ªç±»é‡Œé¢æ²¡æœ‰ä»»ä½•ä¸œè¥¿èƒ½å‘Šè¯‰ä½ å®ƒéœ€è¦æŠ–åŠ¨ã€‚è¿™æ ·è¡¨æ„ä¸æ˜ç¡®ï¼Œå› ä¸ºåˆ«å¤„å¯èƒ½ä¼šéšæœºå­˜åœ¨ä¸€ä¸ªæŠ–åŠ¨å‡½æ•°ï¼Œä½ ç”šè‡³ä¸çŸ¥é“å®ƒæ˜¯ä»å“ªé‡Œæ¥çš„ã€‚</p>
<p>æœ€ä¸»è¦çš„æ˜¯ï¼Œå¦‚æœä½ å¸¸å¸¸ä¸ºç±»åˆ«å’Œ UIView çš„æ‰©å±•è¿™æ ·åšçš„è¯ï¼Œä½ å¯èƒ½ä¼šæœ‰æ›´å¥½çš„åŠæ³•ã€‚åœ¨ä½ å¢åŠ äº† shake å‡½æ•°çš„åœ°æ–¹ï¼Œå°±æˆäº†æ‰€è°“çš„ ç§‘å­¦æ€ªäººçš„åƒåœ¾åœºã€‚ç„¶åæœ‰äººæ¥å’Œä½ è¯´ï¼Œ â€œæˆ‘æƒ³è¦ä¸€ä¸ªå¯è°ƒæš—çš„è§†å›¾â€ï¼Œç„¶åä½ å¢åŠ ä¸€ä¸ª dim å‡½æ•°å’Œå…¶ä»–åˆ«å¤„éšæœºçš„è°ƒç”¨å‡½æ•°ã€‚è¿™æ ·ï¼Œä»£ç æ–‡ä»¶æ–‡ä»¶å°±ä¼šå˜æˆä¸€ä¸ªå¾ˆé•¿çš„åƒåœ¾æ–‡ä»¶ï¼Œå› ä¸ºè¿™äº›éšæœºè°ƒç”¨çš„äº‹æƒ…éƒ½æ˜¯åœ¨ UI View é‡Œé¢å®Œæˆï¼Œå°½ç®¡æœ‰äº›æ—¶å€™ä¹Ÿè®¸åªæœ‰ä¸€ä¸¤ä¸ªåœ°æ–¹éœ€è¦è¿™ä¹ˆåšï¼Œè¿™å¯¼è‡´ä»£ç å˜å¾—ä¸å¯è¯»ï¼Œéš¾ä»¥æŸ¥çœ‹ã€‚æˆ‘ä»¬è¯¥å¦‚ä½•æ”¹å˜è¿™ç‚¹å‘¢ï¼Ÿ</p>
<p>è¿™æ˜¯ä¸€æ¬¡é¢å‘åè®®ç¼–ç¨‹çš„æ¼”è®²ï¼Œæˆ‘ä»¬å½“ç„¶ä¼šç”¨åˆ°åè®®ã€‚é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Shakeable çš„åè®®ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  Shakeable.swift</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Shakeable</span> </span>&#123; &#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Shakeable</span> <span class="title">where</span> <span class="title">Self</span>: <span class="title">UIView</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">shake</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">// implementation code</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨åè®®æ‰©å±•çš„å¸®åŠ©ä¸‹ï¼Œä½ å¯ä»¥æŠŠå®ƒä»¬é™åˆ¶åœ¨ä¸€ä¸ªç‰¹å®šçš„ç±»é‡Œé¢ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œæˆ‘èƒ½æŠ½å‡ºæˆ‘çš„ shake å‡½æ•°ï¼Œç„¶åç”¨ç±»åˆ«ï¼Œæˆ‘èƒ½è¯´è¿™æ˜¯æˆ‘ä»¬éœ€è¦éµå¾ªçš„å”¯ä¸€çš„ä¸œè¥¿ï¼Œåªæœ‰ UI è§†å›¾ä¼šæœ‰è¿™ä¸ªå‡½æ•°ã€‚</p>
<p>ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨ä½ åŸæ¥æƒ³ç”¨çš„åŒæ ·å¼ºå¤§çš„æ‰©å±•åŠŸèƒ½ï¼Œä½†æ˜¯ä½ æœ‰åè®®äº†ã€‚ä»»ä½•éµå¾ªåè®®çš„éè§†å›¾ä¸ä¼šå·¥ä½œã€‚åªæœ‰è§†å›¾æ‰èƒ½æœ‰è¿™ä¸ª shake çš„é»˜è®¤å®ç°ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FoodImageView</span>: <span class="title">UIImageView</span>, <span class="title">Shakeable</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ActionButton</span>: <span class="title">UIButton</span>, <span class="title">Shakeable</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° FoodImageView å’Œ ActionButton ä¼šéµå¾ª Shakeable åè®®ã€‚å®ƒä»¬ä¼šæœ‰ shake å‡½æ•°ï¼Œç°åœ¨çš„å¯è¯»æ€§å¼ºå¤šäº† â€“- æˆ‘å¯ä»¥ç†è§£ shaking æ˜¯æœ‰æ„å­˜åœ¨çš„ã€‚å¦‚æœä½ åœ¨åˆ«å¤„ä½¿ç”¨è§†å›¾ï¼Œæˆ‘éœ€è¦æƒ³æƒ³ï¼Œâ€åœ¨è¿™ä¹Ÿéœ€è¦æŠ–åŠ¨å—ï¼Ÿâ€ã€‚å®ƒå¢å¼ºäº†å¯è¯»æ€§ï¼Œä½†æ˜¯ä»£ç è¿˜æ˜¯é—­åˆçš„å’Œå¯é‡ç”¨çš„ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æƒ³æŠ–åŠ¨å’Œè°ƒæš—è§†å›¾ã€‚æˆ‘ä»¬ä¼šæœ‰å¦å¤–ä¸€ä¸ªåè®®ï¼Œä¸€ä¸ª Dimmable åè®®ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥ä¸ºäº†è°ƒæš—åšä¸€ä¸ªåè®®æ‰©å±•ã€‚å†å¼ºè°ƒä¸€éï¼Œé€šè¿‡çœ‹ç±»çš„å®šä¹‰æ¥çŸ¥æ™“è¿™ä¸ªç±»çš„ç”¨é€”ï¼Œè¿™æ ·æ„å›¾å°±ä¼šå¾ˆæ˜æ˜¾äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FoodImageView</span>: <span class="title">UIImageView</span>, <span class="title">Shakeable</span>, <span class="title">Dimmable</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…³äºé‡æ„ï¼Œå½“äº§å“ç»ç†è¯´ â€œæˆ‘ä¸æƒ³è¦æŠ–åŠ¨äº†â€ çš„æ—¶å€™ï¼Œä½ åªéœ€è¦åˆ é™¤ç›¸å…³çš„ Shakeable åè®®å°±å¥½äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FoodImageView</span>: <span class="title">UIImageView</span>, <span class="title">Dimmable</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨å®ƒåªèƒ½è°ƒæš—äº†ã€‚åŠŸèƒ½æ’æ‹”æ˜¯éå¸¸å®¹æ˜“çš„ï¼Œé€šè¿‡ä½¿ç”¨åè®®æˆ‘ä»¬å¾ˆå®¹æ˜“è·å¾—ä¹é«˜ä¼¼çš„æ¶æ„ã€‚å¦‚æœä½ æƒ³å­¦ä¹ ä½¿ç”¨åè®®çš„å…¶ä»–æ›´å¼ºå¤§çš„ä½¿ç”¨æ–¹å¼ï¼Œå¯ä»¥çœ‹çœ‹<a href="https://archive.fo/h2ZTz" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a> ï¼Œç„¶åå°è¯•åˆ›å»ºä¸€ä¸ªæœ‰è¿‡æ¸¡æ•ˆæœçš„å¯è°ƒæš—çš„è§†å›¾ã€‚</p>
<h3 id="2-xib-åŠ è½½-UIView"><a href="#2-xib-åŠ è½½-UIView" class="headerlink" title="2.xib åŠ è½½ UIView"></a>2.xib åŠ è½½ UIView</h3><p>æˆ‘ä»¬ä½¿ç”¨XIBåŠ è½½çš„è‡ªå®šä¹‰Viewéƒ½ä¼šä½¿ç”¨ç›¸åŒçš„æ–¹æ³•:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">Bundle</span>.main.loadNibNamed(<span class="string">"RedView"</span>, owner: <span class="literal">nil</span>, options: <span class="literal">nil</span>)?.last</div></pre></td></tr></table></figure>
<p>é€šå¸¸åœ¨è‡ªå®šä¹‰Viewçš„å®ç°ä¸­å®šä¹‰ä¸€ä¸ªç±»æ–¹æ³•ã€‚<br>ä¾‹å¦‚:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">loadWithNib</span>() -&gt; <span class="title">RedView</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="type">Bundle</span>.main.loadNibNamed(<span class="string">"RedView"</span>, owner: <span class="literal">nil</span>, options: <span class="literal">nil</span>)?.last! <span class="keyword">as</span>! <span class="type">RedView</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå¯ä»XIBåŠ è½½æŸç±»çš„åè®®,åœ¨è‡ªå®šä¹‰ç±»ä¸­ä»…ä»…éœ€è¦éµå®ˆè¿™ä¸ªåè®®,æ— éœ€å®ç°åè®®ä¸­çš„æ–¹æ³•,ä¾¿å¯å®ç°æ­¤åè®®ä¸­å®ç°çš„æ‰€æœ‰æ–¹æ³•.ä¾‹å¦‚å®šä¹‰ä¸€ä¸ª å¯ä»XIBåŠ è½½çš„åè®® NibLoadableã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">NibLoadable</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NibLoadable</span> <span class="title">where</span> <span class="title">Self</span>: <span class="title">UIView</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">loadViewWithNib</span><span class="params">()</span></span> -&gt; <span class="type">Self</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Bundle</span>.main.loadNibNamed(<span class="string">"\(self)"</span>, owner: <span class="literal">nil</span>, options: <span class="literal">nil</span>)?.last! <span class="keyword">as</span>! <span class="type">Self</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åªè¦åœ¨xibåŠ è½½çš„ç±»ä¸­ç»§æ‰¿æ­¤åè®®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">GreenView</span>: <span class="title">UIView</span> , <span class="title">NibLoadable</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å°±å¯ä»¥åœ¨éœ€è¦åˆå§‹åŒ–æ­¤å¯¹è±¡æ—¶ç›´æ¥è°ƒç”¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">GreenView</span>.loadViewWithNib()</div></pre></td></tr></table></figure>
<p><strong>å†™åœ¨æœ€åï¼Œè™½ç„¶Swiftå·²ç»ååˆ†å¼ºå¤§ï¼Œä½†æ˜¯æŠ€æœ¯æ¯•ç«Ÿæ˜¯è¦ä¸ºä¸šåŠ¡æœåŠ¡ã€‚ç¼ºå°‘äº†è¿è¡Œæ—¶ç‰¹æ€§ï¼Œä¹Ÿæ˜¯å¾ˆå¤šé¡¹ç›®æ— æ³•ä»OCå®Œå…¨è¿ç§»åˆ°Swiftçš„åŸå› ä¹‹ä¸€ï¼Œæ‰€ä»¥åœ¨å¼€å‘é¡¹ç›®çš„æ—¶å€™éœ€è¦æ…é‡é€‰æ‹©OCã€Swiftï¼Œæˆ–è€…åœ¨ä¸šåŠ¡æ›´æ–°ä¸æ˜¯ååˆ†é¢‘ç¹çš„æ—¶å€™ä¹Ÿå¯ä»¥é€‰æ‹©OCä¸Swiftæ··ç¼–ï¼ˆä¸šåŠ¡æ›´æ–°é¢‘ç¹çš„æ—¶å€™å¹¶ä¸å»ºè®®è¿™ä¹ˆåšï¼Œé‡åˆ°å‘è€—æ—¶å¯¼è‡´é¡¹ç›®delayæ¯•ç«Ÿä¸æ˜¯å¥½äº‹ï¼ŒOCè™½è€ï¼Œå°šèƒ½å†æˆ˜ï¼‰ï¼Œå¸Œæœ›ä»Šå¹´å³å°†å‘å¸ƒçš„Swift5èƒ½å¤Ÿç»™æˆ‘ä»¬å¸¦æ¥æƒŠå–œ</strong></p>
<h5 id="å‚è€ƒæ–‡ç« ï¼š"><a href="#å‚è€ƒæ–‡ç« ï¼š" class="headerlink" title="å‚è€ƒæ–‡ç« ï¼š"></a>å‚è€ƒæ–‡ç« ï¼š</h5><p><a href="http://blog.csdn.net/qxuewei/article/details/53945445" target="_blank" rel="external">iOS-Swift é¢å‘åè®®ç¼–ç¨‹/ç»„ä»¶åŒ–(æ¨¡å—åŒ–)ç¼–ç¨‹æ€æƒ³</a><br><a href="https://academy.realm.io/cn/posts/appbuilders-natasha-muraschev-practical-protocol-oriented-programming/" target="_blank" rel="external">åŸºäº Swift çš„é¢å‘åè®®ç¼–ç¨‹</a><br><a href="http://www.cocoachina.com/swift/20161121/18144.html" target="_blank" rel="external">ä» Swift çš„é¢å‘åè®®ç¼–ç¨‹è¯´å¼€å»</a><br><a href="http://blog.csdn.net/xuehongnizhao/article/details/55258066" target="_blank" rel="external">Swifté¢å‘åè®®ç¼–ç¨‹ï¼ˆé™„ä»£ç ï¼‰</a><br><a href="https://medium.com/ios-os-x-development/swift-protocol-extension-method-dispatch-6a6bf270ba94" target="_blank" rel="external">Swift protocol extension method dispatch</a></p>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/25/å¦‚ä½•æ‰“ç ´Swiftä¸­çš„å¾ªç¯å¼•ç”¨/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Coder bruce">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bruce's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/25/å¦‚ä½•æ‰“ç ´Swiftä¸­çš„å¾ªç¯å¼•ç”¨/" itemprop="url">å¦‚ä½•æ‰“ç ´Swiftä¸­çš„å¾ªç¯å¼•ç”¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-25T12:49:19+08:00">
                2018-01-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOSå¼€å‘/" itemprop="url" rel="index">
                    <span itemprop="name">iOSå¼€å‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Swiftçš„å†…å­˜ç®¡ç†ä¹Ÿæ˜¯ä½¿ç”¨çš„ARC(è‡ªåŠ¨å¼•ç”¨è®¡æ•°)ï¼šå½“æˆ‘ä»¬åˆå§‹åŒ–åˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹çš„æ—¶å€™,swiftå°±ä¼šæ›¿æˆ‘ä»¬ç®¡ç†å’Œåˆ†é…å†…å­˜,æ­¤æ—¶çš„å¼•ç”¨è®¡æ•°ä¸º1ï¼Œå½“å¯¹å…¶è¿›è¡Œinit(copy/mutableCopy)æ—¶ï¼Œå¼•ç”¨è®¡æ•°ä¼š+1ï¼Œè€Œå½“å®ä¾‹è¢«é”€æ¯æ—¶ï¼Œå¼•ç”¨è®¡æ•°å°±ä¼š-1ã€‚å½“ç³»ç»Ÿæ£€æµ‹åˆ°å¼•ç”¨è®¡æ•°ä¸º0çš„æ—¶å€™ï¼Œå°±ä¼šé‡Šæ”¾æ‰è¿™ä¸ªå†…å­˜ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™ç§å¼•ç”¨è®¡æ•°ä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜å°±æ˜¯å¾ªç¯å¼•ç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> b: <span class="type">B</span>?</div><div class="line"></div><div class="line">    <span class="keyword">init</span>() &#123;</div><div class="line">      <span class="built_in">print</span>(<span class="string">"Aåˆå§‹åŒ–"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">      <span class="built_in">print</span>(<span class="string">"Aææ„æ‰"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> a: <span class="type">A</span>?</div><div class="line"></div><div class="line">    <span class="keyword">init</span>() &#123;</div><div class="line">      <span class="built_in">print</span>(<span class="string">"Båˆå§‹åŒ–"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">      <span class="built_in">print</span>(<span class="string">"Bææ„æ‰"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> a: <span class="type">A</span>?;   a = <span class="type">A</span>()</div><div class="line"><span class="keyword">var</span> b: <span class="type">B</span>?;   b = <span class="type">B</span>()</div><div class="line"></div><div class="line">a!.b = b;   b!.a = a</div><div class="line">a = <span class="literal">nil</span>;    b = <span class="literal">nil</span></div></pre></td></tr></table></figure>
<p>ä½ ä¼šå‘ç°ï¼ŒAå’ŒBçš„ææ„å‡½æ•°deinitéƒ½æ²¡æœ‰è°ƒç”¨ï¼Œå› ä¸ºå½“aæ‰§è¡Œææ„çš„æ—¶å€™ï¼Œb.aè¿˜åœ¨å¯¹å…¶è¿›è¡Œå¼•ç”¨ï¼Œå½“bææ„çš„æ—¶å€™ï¼Œa.bä¹Ÿåœ¨å¯¹bè¿›è¡Œå¼•ç”¨ã€‚è¿™æ—¶å€™è§£å†³çš„æ–¹æ³•å°±æ˜¯å¯¹å…¶ä¸­çš„æŸä¸€ä¸ªå£°æ˜è¿›è¡Œè‹¥å¼•ç”¨ï¼Œå³åŠ ä¸Šweakï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">weak</span> <span class="keyword">var</span> b: <span class="type">B</span>?</div></pre></td></tr></table></figure>
<p>å¦å¤–ä¸€ç§é€ æˆå¾ªç¯å¼•ç”¨çš„é—®é¢˜å°±æ˜¯é—­åŒ…ï¼šé—­åŒ…ä¸­å¯¹ä»»ä½•å…ƒç´ çš„å¼•ç”¨éƒ½ä¼šè¢«é—­åŒ…è‡ªåŠ¨æŒæœ‰ï¼Œå¦‚æœæˆ‘ä»¬åœ¨é—­åŒ…ä¸­éœ€è¦ä½¿ç”¨selfçš„è¯ï¼Œé‚£å°±ç›¸å½“äºé—­åŒ…å¯¹selfæŒæœ‰ï¼Œè€Œblockåˆæ˜¯è¢«selfç›´æ¥æˆ–é—´æ¥æŒæœ‰ï¼Œè¿™æ ·å°±é€ æˆäº†å¾ªç¯å¼•ç”¨ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line"></div><div class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> block: ()-&gt;() = &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="keyword">self</span>.name )</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Cåˆå§‹åŒ–"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Cææ„"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> <span class="built_in">c</span>: <span class="type">C</span>? = <span class="type">C</span>(name: <span class="string">"c"</span>)</div><div class="line"><span class="built_in">c</span>?.block()</div><div class="line"><span class="built_in">c</span> = <span class="literal">nil</span></div></pre></td></tr></table></figure>
<p>è¿™é‡ŒCçš„ææ„å‡½æ•°ä¹Ÿæ˜¯æ²¡æœ‰æ‰§è¡Œçš„ã€‚blockæ˜¯selfçš„å±æ€§ï¼Œblocké‡Œé¢åˆå¯¹selfæŒæœ‰ï¼Œè¿™å°±å½¢æˆäº†å¾ªç¯å¼•ç”¨ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨unownedï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨weakï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// unowned</span></div><div class="line"><span class="built_in">lazy</span> <span class="keyword">var</span> block: ()-&gt;() = &#123; [<span class="keyword">unowned</span> <span class="keyword">self</span>] <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(<span class="keyword">self</span>.name)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// weak</span></div><div class="line"><span class="built_in">lazy</span> <span class="keyword">var</span> block: ()-&gt;() = &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> strongSelf = <span class="keyword">self</span> &#123;</div><div class="line">        <span class="built_in">print</span>(strongSelf.name)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆè¿™ä¸¤ä¸ªä½¿ç”¨æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿæ¥ä¸‹æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line"></div><div class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> block: ()-&gt;() = &#123; [<span class="keyword">unowned</span> <span class="keyword">self</span>] <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(<span class="keyword">self</span>.name)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Cåˆå§‹åŒ–"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Cææ„"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> block: (()-&gt;())!</div><div class="line"></div><div class="line">    <span class="keyword">init</span>(callBack: (()-&gt;())?) &#123;</div><div class="line">        <span class="keyword">self</span>.block = callBack!</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Dæ„é€ "</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Dææ„"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> <span class="built_in">c</span>: <span class="type">C</span>? = <span class="type">C</span>(name: <span class="string">"c"</span>)</div><div class="line"><span class="keyword">var</span> d = <span class="type">D</span>.<span class="keyword">init</span>(callBack: <span class="built_in">c</span>?.block)</div><div class="line"><span class="built_in">c</span>!.block()</div><div class="line"><span class="built_in">c</span> = <span class="literal">nil</span></div><div class="line">d.block()</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå½“ä½ è¿è¡Œåˆ° d.block()çš„æ—¶å€™ï¼Œæ˜¯ä¼šæœ‰ä¸€ä¸ªerrorã€‚</p>
<p>å› ä¸ºå½“d.block()æ‰§è¡Œçš„æ—¶å€™ï¼Œcå·²ç»è¢«ææ„æ‰äº†ï¼Œè€Œé—­åŒ…é‡Œçš„selfè‚¯å®šä¹Ÿæ˜¯ä¸å­˜åœ¨çš„ï¼Œæ˜¯ä¸€ä¸ªnilï¼Œè¿™ä¸ªæ—¶å€™æ‰§è¡Œçš„è¯self.nameå°±ä¼šæŠ¥é”™ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬ä¸ç¡®å®šæ˜¯å¦æœ‰å¤–éƒ¨å˜é‡åœ¨æŒæœ‰è¿™ä¸ªblockçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±åº”è¯¥ä½¿ç”¨weakæ›´ä¸ºå®‰å…¨ï¼Œå› ä¸ºä½¿ç”¨weakçš„è¯self.nameéœ€è¦æ”¹æˆå¯é€‰æ€§çš„self?.nameï¼Œè¿™ä¸ªæ—¶å€™self?.nameè‚¯å®šå°±ä¸ºniläº†ã€‚æ‰€ä»¥æ¢æˆweakä¹‹åï¼Œåœ¨playgroundé‡Œçš„d.block()å°±ä¸ä¼šæœ‰é”™è¯¯äº†ï¼Œè€Œä¸”blockä¹Ÿæ˜¯ä¼šæ­£å¸¸æ‰§è¡Œçš„ï¼Œåªä¸è¿‡print(self?.name)æ‰“å°å‡ºæ¥ä¸ºnilã€‚</p>
<p>æœ€ç»ˆä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line"></div><div class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> block: ()-&gt;() = &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(<span class="keyword">self</span>?.name ?? <span class="string">"nothing"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Cåˆå§‹åŒ–"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Cææ„"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> block: (()-&gt;())!</div><div class="line"></div><div class="line">    <span class="keyword">init</span>(callBack: (()-&gt;())?) &#123;</div><div class="line">        <span class="keyword">self</span>.block = callBack!</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Dæ„é€ "</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Dææ„"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> <span class="built_in">c</span>: <span class="type">C</span>? = <span class="type">C</span>(name: <span class="string">"c"</span>)</div><div class="line"><span class="keyword">var</span> d = <span class="type">D</span>.<span class="keyword">init</span>(callBack: <span class="built_in">c</span>?.block)</div><div class="line"><span class="built_in">c</span>!.block()</div><div class="line"><span class="built_in">c</span> = <span class="literal">nil</span></div><div class="line">d.block()</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
    
    <div>
    
    </div>

    <div>
      
    </div>
    
    

    

    
    
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          
        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="Coder bruce" />
          <p class="site-author-name" itemprop="name">Coder bruce</p>
           
              <p class="site-description motion-element" itemprop="description">hello world</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">45</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/a1049145827" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/ff82b16c5264" target="_blank" title="ç®€ä¹¦">
                  
                    <i class="fa fa-fw fa-heartbeat"></i>
                  
                    
                      ç®€ä¹¦
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Coder bruce</span>
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_pv">
  æœ¬ç«™è®¿å®¢æ•°:<span id="busuanzi_value_site_pv"></span>
</span>
</div>







<div class="theme-info">
  <!-- <div class="powered-by"></div> -->
  <span class="post-count">åšå®¢å…¨ç«™å…±40.0kå­—</span>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>




  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
<!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
<script type="text/javascript" src="/js/src/love.js"></script>